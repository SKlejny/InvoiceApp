{"ast":null,"code":"// src/components/SettingsModal.js\nimport React from'react';import{X,Settings as SettingsIcon,Sun,Moon}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SettingsModal=_ref=>{let{isOpen,onClose,currentExcelPreference,onPreferenceChange,isDarkMode,toggleDarkMode}=_ref;if(!isOpen)return null;const handleRadioChange=event=>{onPreferenceChange(event.target.value);};// Refined toggle handler to prevent double-clicks\nconst handleThemeToggleClick=event=>{// IMPORTANT: Stop propagation and prevent default on the *visual toggle element*\n// This stops the click event from bubbling up to the parent <label>,\n// which would otherwise trigger an implicit click on the hidden checkbox.\nevent.stopPropagation();event.preventDefault();console.log('Theme Toggle Clicked! Current mode:',isDarkMode);// Debugging log\ntoggleDarkMode();// This is the state-flipping function from App.js\n};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-dark-bg-canvas-start bg-opacity-70 flex items-center justify-center z-[9999] p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light-bg-card p-8 rounded-xl shadow-2xl text-center max-w-md w-full  border-t-4 border-brand-orange-light  dark:bg-dark-bg-card dark:border-brand-orange-dark  dark:shadow-xl  transform scale-100 opacity-100 transition-all duration-300 ease-out\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark flex items-center\",children:[/*#__PURE__*/_jsx(SettingsIcon,{size:24,className:\"mr-3 text-ui-blue-light dark:text-ui-blue-dark\"}),\"Settings\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-text-secondary-light hover:text-text-primary-light dark:text-text-secondary-dark dark:hover:text-text-primary-dark transition-colors\",\"aria-label\":\"Close settings\",children:/*#__PURE__*/_jsx(X,{size:24})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left bg-border-subtle-light/30 dark:bg-border-subtle-dark/30 p-5 rounded-lg mb-6 shadow-inner\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-text-primary-light mb-4 dark:text-text-primary-dark\",children:\"How to open Excel files:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col space-y-3\",children:['ask','web','desktop'].map(option=>/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center text-text-secondary-light dark:text-text-secondary-dark  cursor-pointer p-2 rounded-md hover:bg-ui-blue-light/10 dark:hover:bg-ui-blue-dark/10 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",className:\"hidden peer\",name:\"excelOpeningPreference\",value:option,checked:currentExcelPreference===option,onChange:handleRadioChange}),/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 rounded-full border-2 border-text-secondary-light  peer-checked:border-brand-orange-light dark:border-text-secondary-dark  dark:peer-checked:border-brand-orange-dark flex items-center justify-center  transition-all duration-200 flex-shrink-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-2.5 h-2.5 rounded-full bg-brand-orange-light opacity-0  peer-checked:opacity-100 dark:bg-brand-orange-dark transition-opacity duration-200\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-3 font-medium\",children:[option==='ask'&&'Always ask me (default)',option==='web'&&'Always open in Excel Online',option==='desktop'&&'Always open in Excel App (if installed)']})]},option))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-left bg-border-subtle-light/30 dark:bg-border-subtle-dark/30 p-5 rounded-lg mb-6 shadow-inner\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-text-primary-light mb-4 dark:text-text-primary-dark\",children:\"App Theme:\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center cursor-pointer justify-between\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-text-secondary-light font-medium dark:text-text-secondary-dark flex items-center\",children:[isDarkMode?/*#__PURE__*/_jsx(Moon,{size:20,className:\"mr-2 text-ui-blue-dark\"}):/*#__PURE__*/_jsx(Sun,{size:20,className:\"mr-2 text-ui-blue-light\"}),isDarkMode?'Dark Mode':'Light Mode']}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-12 h-6 rounded-full transition-all duration-300 bg-text-secondary-light peer-checked:bg-status-approved-light dark:bg-text-secondary-dark dark:peer-checked:bg-status-approved-dark\",onClick:handleThemeToggleClick// <-- IMPORTANT: onClick moved here\n,\"aria-label\":isDarkMode?\"Switch to light mode\":\"Switch to dark mode\",role:\"switch\",\"aria-checked\":isDarkMode,children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",className:\"sr-only peer\",checked:isDarkMode,onChange:()=>{}}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-1 top-1 w-4 h-4 rounded-full transition-all duration-300 bg-brand-orange-light transform peer-checked:translate-x-6 dark:bg-brand-orange-dark\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"px-6 py-2 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md  hover:bg-ui-blue-light/20 transition-colors duration-300 font-medium  dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20\",\"aria-label\":\"Close settings\",children:\"Close\"})]})});};export default SettingsModal;","map":{"version":3,"names":["React","X","Settings","SettingsIcon","Sun","Moon","jsx","_jsx","jsxs","_jsxs","SettingsModal","_ref","isOpen","onClose","currentExcelPreference","onPreferenceChange","isDarkMode","toggleDarkMode","handleRadioChange","event","target","value","handleThemeToggleClick","stopPropagation","preventDefault","console","log","className","children","size","onClick","map","option","type","name","checked","onChange","role"],"sources":["/workspaces/InvoiceApp/src/components/SettingsModal.js"],"sourcesContent":["// src/components/SettingsModal.js\n\nimport React from 'react';\nimport { X, Settings as SettingsIcon, Sun, Moon } from 'lucide-react';\n\nconst SettingsModal = ({ isOpen, onClose, currentExcelPreference, onPreferenceChange, isDarkMode, toggleDarkMode }) => {\n  if (!isOpen) return null;\n\n  const handleRadioChange = (event) => {\n    onPreferenceChange(event.target.value);\n  };\n\n  // Refined toggle handler to prevent double-clicks\n  const handleThemeToggleClick = (event) => {\n    // IMPORTANT: Stop propagation and prevent default on the *visual toggle element*\n    // This stops the click event from bubbling up to the parent <label>,\n    // which would otherwise trigger an implicit click on the hidden checkbox.\n    event.stopPropagation(); \n    event.preventDefault(); \n\n    console.log('Theme Toggle Clicked! Current mode:', isDarkMode); // Debugging log\n    toggleDarkMode(); // This is the state-flipping function from App.js\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-dark-bg-canvas-start bg-opacity-70 flex items-center justify-center z-[9999] p-4\">\n      <div className=\"bg-light-bg-card p-8 rounded-xl shadow-2xl text-center max-w-md w-full \n                      border-t-4 border-brand-orange-light \n                      dark:bg-dark-bg-card dark:border-brand-orange-dark \n                      dark:shadow-xl \n                      transform scale-100 opacity-100 transition-all duration-300 ease-out\">\n        \n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark flex items-center\">\n            <SettingsIcon size={24} className=\"mr-3 text-ui-blue-light dark:text-ui-blue-dark\" />\n            Settings\n          </h2>\n          <button \n            onClick={onClose} \n            className=\"text-text-secondary-light hover:text-text-primary-light dark:text-text-secondary-dark dark:hover:text-text-primary-dark transition-colors\"\n            aria-label=\"Close settings\"\n          >\n            <X size={24} />\n          </button>\n        </div>\n\n        {/* Excel Opening Preference Section (unchanged) */}\n        <div className=\"text-left bg-border-subtle-light/30 dark:bg-border-subtle-dark/30 p-5 rounded-lg mb-6 shadow-inner\">\n          <h3 className=\"text-lg font-semibold text-text-primary-light mb-4 dark:text-text-primary-dark\">\n            How to open Excel files:\n          </h3>\n          <div className=\"flex flex-col space-y-3\">\n            {['ask', 'web', 'desktop'].map((option) => (\n              <label \n                key={option}\n                className=\"inline-flex items-center text-text-secondary-light dark:text-text-secondary-dark \n                           cursor-pointer p-2 rounded-md hover:bg-ui-blue-light/10 dark:hover:bg-ui-blue-dark/10 transition-colors\" \n              >\n                <input\n                  type=\"radio\"\n                  className=\"hidden peer\"\n                  name=\"excelOpeningPreference\"\n                  value={option}\n                  checked={currentExcelPreference === option}\n                  onChange={handleRadioChange}\n                />\n                <div className=\"w-5 h-5 rounded-full border-2 border-text-secondary-light \n                                peer-checked:border-brand-orange-light dark:border-text-secondary-dark \n                                dark:peer-checked:border-brand-orange-dark flex items-center justify-center \n                                transition-all duration-200 flex-shrink-0\">\n                  <div className=\"w-2.5 h-2.5 rounded-full bg-brand-orange-light opacity-0 \n                                  peer-checked:opacity-100 dark:bg-brand-orange-dark transition-opacity duration-200\"></div>\n                </div>\n                <span className=\"ml-3 font-medium\">\n                  {option === 'ask' && 'Always ask me (default)'}\n                  {option === 'web' && 'Always open in Excel Online'}\n                  {option === 'desktop' && 'Always open in Excel App (if installed)'}\n                </span>\n              </label>\n            ))}\n          </div>\n        </div>\n\n        {/* Dark Mode Toggle Section */}\n        <div className=\"text-left bg-border-subtle-light/30 dark:bg-border-subtle-dark/30 p-5 rounded-lg mb-6 shadow-inner\">\n          <h3 className=\"text-lg font-semibold text-text-primary-light mb-4 dark:text-text-primary-dark\">\n            App Theme:\n          </h3>\n          <label className=\"flex items-center cursor-pointer justify-between\">\n            <span className=\"text-text-secondary-light font-medium dark:text-text-secondary-dark flex items-center\">\n              {isDarkMode ? <Moon size={20} className=\"mr-2 text-ui-blue-dark\" /> : <Sun size={20} className=\"mr-2 text-ui-blue-light\" />}\n              {isDarkMode ? 'Dark Mode' : 'Light Mode'}\n            </span>\n            {/* Toggle Switch Visuals - onClick is now on this div, with stopPropagation/preventDefault */}\n            <div className=\"relative w-12 h-6 rounded-full transition-all duration-300\n                            bg-text-secondary-light peer-checked:bg-status-approved-light\n                            dark:bg-text-secondary-dark dark:peer-checked:bg-status-approved-dark\"\n                 onClick={handleThemeToggleClick} // <-- IMPORTANT: onClick moved here\n                 aria-label={isDarkMode ? \"Switch to light mode\" : \"Switch to dark mode\"}\n                 role=\"switch\"\n                 aria-checked={isDarkMode}\n            >\n              {/* The hidden checkbox input. Its 'checked' state is controlled by 'isDarkMode'. */}\n              {/* onChange is provided but does nothing directly, as clicks are handled on the parent div */}\n              <input type=\"checkbox\" className=\"sr-only peer\" checked={isDarkMode} onChange={() => {}} />\n              {/* The visual thumb */}\n              <div className=\"absolute left-1 top-1 w-4 h-4 rounded-full transition-all duration-300\n                              bg-brand-orange-light transform peer-checked:translate-x-6\n                              dark:bg-brand-orange-dark\"></div>\n            </div>\n          </label>\n        </div>\n\n        {/* Close Button */}\n        <button\n          onClick={onClose}\n          className=\"px-6 py-2 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md \n                     hover:bg-ui-blue-light/20 transition-colors duration-300 font-medium \n                     dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20\"\n          aria-label=\"Close settings\"\n        >\n          Close\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default SettingsModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}