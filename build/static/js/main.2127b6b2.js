/*! For license information please see main.2127b6b2.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var n=r(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var n,i={},l=null,u=null;for(n in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,n)&&!c.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:o,type:e,key:l,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},202:(e,t)=>{var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}function v(){}function b(e,t,r){this.props=e,this.context=t,this.refs=m,this.updater=r||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,p(w,y.prototype),w.isPureReactComponent=!0;var k=Array.isArray,C=Object.prototype.hasOwnProperty,I={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,o)&&!A.hasOwnProperty(o)&&(i[o]=t[o]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===i[o]&&(i[o]=c[o]);return{$$typeof:r,type:e,key:a,ref:s,props:i,_owner:I.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var T=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return a=a(c=e),e=""===i?"."+E(c,0):i,k(a)?(o="",null!=e&&(o=e.replace(T,"$&/")+"/"),P(a,t,o,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",k(e))for(var l=0;l<e.length;l++){var u=i+E(s=e[l],l);c+=P(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=g&&e[g]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=P(s=s.value,t,o,u=i+E(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,r){if(null==e)return e;var n=[],o=0;return P(e,n,"","",function(e){return t.call(r,e,o++)}),n}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},M={transition:null},O={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:M,ReactCurrentOwner:I};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,r){R(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=p({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=I.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)C.call(t,l)&&!A.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:r,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,r){return N.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,r){return N.current.useReducer(e,t,r)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return N.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,o=e[n];if(!(0<i(o,t)))break e;e[n]=t,e[r]=o,r=n}}function n(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length,a=o>>>1;n<a;){var s=2*(n+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,r))l<o&&0>i(u,c)?(e[n]=u,e[l]=r,n=l):(e[n]=c,e[s]=r,n=s);else{if(!(l<o&&0>i(u,r)))break e;e[n]=u,e[l]=r,n=l}}}return t}function i(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,g=3,f=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=n(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,r(l,t)}t=n(u)}}function k(e){if(m=!1,w(e),!p)if(null!==n(l))p=!0,M(C);else{var t=n(u);null!==t&&O(k,t.startTime-e)}}function C(e,r){p=!1,m&&(m=!1,v(S),S=-1),f=!0;var i=g;try{for(w(r),h=n(l);null!==h&&(!(h.expirationTime>r)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,g=h.priorityLevel;var s=a(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?h.callback=s:h===n(l)&&o(l),w(r)}else o(l);h=n(l)}if(null!==h)var c=!0;else{var d=n(u);null!==d&&O(k,d.startTime-r),c=!1}return c}finally{h=null,g=i,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,A=!1,x=null,S=-1,T=5,E=-1;function P(){return!(t.unstable_now()-E<T)}function R(){if(null!==x){var e=t.unstable_now();E=e;var r=!0;try{r=x(!0,e)}finally{r?I():(A=!1,x=null)}}else A=!1}if("function"===typeof b)I=function(){b(R)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,N=_.port2;_.port1.onmessage=R,I=function(){N.postMessage(null)}}else I=function(){y(R,0)};function M(e){x=e,A||(A=!0,I())}function O(e,r){S=y(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,M(C))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(e){switch(g){case 1:case 2:case 3:var t=3;break;default:t=g}var r=g;g=t;try{return e()}finally{g=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=g;g=e;try{return t()}finally{g=r}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,r(u,e),null===n(l)&&e===n(u)&&(m?(v(S),S=-1):m=!0,O(k,i-a))):(e.sortIndex=s,r(l,e),p||f||(p=!0,M(C))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=g;return function(){var r=g;g=t;try{return e.apply(this,arguments)}finally{g=r}}}},391:(e,t,r)=>{var n=r(950);t.H=n.createRoot,n.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},730:(e,t,r)=>{var n=r(43),o=r(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},f={};function p(e,t,r,n,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,r,n){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,o,n)&&(r=null),n||null===o?function(e){return!!d.call(f,e)||!d.call(g,e)&&(h.test(e)?f[e]=!0:(g[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=null===r?3!==o.type&&"":r:(t=o.attributeName,n=o.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(o=o.type)||4===o&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var q,j=Object.assign;function D(e){if(void 0===q)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var F=!1;function H(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var n=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){n=l}e.call(t.prototype)}else{try{throw Error()}catch(l){n=l}e()}}catch(l){if(l&&n&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),i=n.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var c="\n"+o[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?D(e):""}function U(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 1:return e=H(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case C:return"Portal";case x:return"Profiler";case A:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return z(e(t))}catch(r){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function J(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=K(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){$(e,t);var r=K(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+K(r),t=null,o=0;o<e.length;o++){if(e[o].value===r)return e[o].selected=!0,void(n&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(i(92));if(te(r)){if(1<r.length)throw Error(i(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:K(r)}}function ie(e,t){var r=K(t.value),n=K(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function me(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),o=pe(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}Object.keys(ge).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]})});var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Ae=null;function xe(e){if(e=wo(e)){if("function"!==typeof Ce)throw Error(i(280));var t=e.stateNode;t&&(t=Co(t),Ce(e.stateNode,e.type,t))}}function Se(e){Ie?Ae?Ae.push(e):Ae=[e]:Ie=e}function Te(){if(Ie){var e=Ie,t=Ae;if(Ae=Ie=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Re=!1;function _e(e,t,r){if(Re)return e(t,r);Re=!0;try{return Ee(e,t,r)}finally{Re=!1,(null!==Ie||null!==Ae)&&(Pe(),Te())}}function Ne(e,t){var r=e.stateNode;if(null===r)return null;var n=Co(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(i(231,t,typeof r));return r}var Me=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Me=!1}function Le(e,t,r,n,o,i,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(r,l)}catch(u){this.onError(u)}}var qe=!1,je=null,De=!1,Fe=null,He={onError:function(e){qe=!0,je=e}};function Ue(e,t,r,n,o,i,a,s,c){qe=!1,je=null,Le.apply(He,arguments)}function ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(ze(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(n=o.return)){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return Ke(o),e;if(a===n)return Ke(o),t;a=a.sibling}throw Error(i(188))}if(r.return!==n.return)r=o,n=a;else{for(var s=!1,c=o.child;c;){if(c===r){s=!0,r=o,n=a;break}if(c===n){s=!0,n=o,r=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===r){s=!0,r=a,n=o;break}if(c===n){s=!0,n=a,r=o;break}c=c.sibling}if(!s)throw Error(i(189))}}if(r.alternate!==n)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var We=o.unstable_scheduleCallback,Qe=o.unstable_cancelCallback,Ye=o.unstable_shouldYield,Je=o.unstable_requestPaint,$e=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,nt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~o;0!==s?n=dt(s):0!==(i&=a)&&(n=dt(i))}else 0!==(a=r&~o)?n=dt(a):0!==i&&(n=dt(i));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&o)&&((o=n&-n)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)o=1<<(r=31-at(t)),n|=e[r],t&=~o;return n}function gt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function vt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-at(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,Ct,It,At,xt,St=!1,Tt=[],Et=null,Pt=null,Rt=null,_t=new Map,Nt=new Map,Mt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":_t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function qt(e,t,r,n,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=wo(t))&&Ct(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function jt(e){var t=bo(e.target);if(null!==t){var r=ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Be(r)))return e.blockedOn=t,void xt(e.priority,function(){It(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=wo(r))&&Ct(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);we=n,r.target.dispatchEvent(n),we=null,t.shift()}return!0}function Ft(e,t,r){Dt(e)&&r.delete(t)}function Ht(){St=!1,null!==Et&&Dt(Et)&&(Et=null),null!==Pt&&Dt(Pt)&&(Pt=null),null!==Rt&&Dt(Rt)&&(Rt=null),_t.forEach(Ft),Nt.forEach(Ft)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ht)))}function zt(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var r=1;r<Tt.length;r++){var n=Tt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Ut(Et,e),null!==Pt&&Ut(Pt,e),null!==Rt&&Ut(Rt,e),_t.forEach(t),Nt.forEach(t),r=0;r<Mt.length;r++)(n=Mt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Mt.length&&null===(r=Mt[0]).blockedOn;)jt(r),null===r.blockedOn&&Mt.shift()}var Bt=w.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,r,n){var o=bt,i=Bt.transition;Bt.transition=null;try{bt=1,Wt(e,t,r,n)}finally{bt=o,Bt.transition=i}}function Vt(e,t,r,n){var o=bt,i=Bt.transition;Bt.transition=null;try{bt=4,Wt(e,t,r,n)}finally{bt=o,Bt.transition=i}}function Wt(e,t,r,n){if(Kt){var o=Yt(e,t,r,n);if(null===o)Kn(e,t,n,Qt,r),Lt(e,n);else if(function(e,t,r,n,o){switch(t){case"focusin":return Et=qt(Et,e,t,r,n,o),!0;case"dragenter":return Pt=qt(Pt,e,t,r,n,o),!0;case"mouseover":return Rt=qt(Rt,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return _t.set(i,qt(_t.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,Nt.set(i,qt(Nt.get(i)||null,e,t,r,n,o)),!0}return!1}(o,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<Ot.indexOf(e)){for(;null!==o;){var i=wo(o);if(null!==i&&kt(i),null===(i=Yt(e,t,r,n))&&Kn(e,t,n,Qt,r),i===o)break;o=i}null!==o&&n.stopPropagation()}else Kn(e,t,n,null,r)}}var Qt=null;function Yt(e,t,r,n){if(Qt=null,null!==(e=bo(e=ke(n))))if(null===(t=ze(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,n=r.length,o="value"in $t?$t.value:$t.textContent,i=o.length;for(e=0;e<n&&r[e]===o[e];e++);var a=n-e;for(t=1;t<=a&&r[n-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function or(e){function t(t,r,n,o,i){for(var a in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var ir,ar,sr,cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=or(cr),ur=j({},cr,{view:0,detail:0}),dr=or(ur),hr=j({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ar,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(ir=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=ir=0,sr=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),gr=or(hr),fr=or(j({},hr,{dataTransfer:0})),pr=or(j({},ur,{relatedTarget:0})),mr=or(j({},cr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=j({},cr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=or(yr),br=or(j({},cr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ir(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Cr[e])&&!!t[e]}function Ar(){return Ir}var xr=j({},ur,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ar,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=or(xr),Tr=or(j({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=or(j({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ar})),Pr=or(j({},cr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rr=j({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_r=or(Rr),Nr=[9,13,27,32],Mr=u&&"CompositionEvent"in window,Or=null;u&&"documentMode"in document&&(Or=document.documentMode);var Lr=u&&"TextEvent"in window&&!Or,qr=u&&(!Mr||Or&&8<Or&&11>=Or),jr=String.fromCharCode(32),Dr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Br(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function Kr(e,t,r,n){Se(n),0<(t=Vn(t,"onChange")).length&&(r=new lr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Gr=null,Vr=null;function Wr(e){Dn(e,0)}function Qr(e){if(W(ko(e)))return e}function Yr(e,t){if("change"===e)return t}var Jr=!1;if(u){var $r;if(u){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}$r=Xr}else $r=!1;Jr=$r&&(!document.documentMode||9<document.documentMode)}function en(){Gr&&(Gr.detachEvent("onpropertychange",tn),Vr=Gr=null)}function tn(e){if("value"===e.propertyName&&Qr(Vr)){var t=[];Kr(t,Vr,e,ke(e)),_e(Wr,t)}}function rn(e,t,r){"focusin"===e?(en(),Vr=r,(Gr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qr(Vr)}function on(e,t){if("click"===e)return Qr(t)}function an(e,t){if("input"===e||"change"===e)return Qr(t)}var sn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cn(e,t){if(sn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!d.call(t,o)||!sn(e[o],t[o]))return!1}return!0}function ln(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=ln(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ln(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Q((e=t.contentWindow).document)}return t}function gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&gn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=void 0===n.end?i:Math.min(n.end,o),!e.extend&&i>n&&(o=n,n=i,i=o),o=un(r,i);var a=un(r,n);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pn=u&&"documentMode"in document&&11>=document.documentMode,mn=null,yn=null,vn=null,bn=!1;function wn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==mn||mn!==Q(n)||("selectionStart"in(n=mn)&&gn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},vn&&cn(vn,n)||(vn=n,0<(n=Vn(yn,"onSelect")).length&&(t=new lr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=mn)))}function kn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Cn={animationend:kn("Animation","AnimationEnd"),animationiteration:kn("Animation","AnimationIteration"),animationstart:kn("Animation","AnimationStart"),transitionend:kn("Transition","TransitionEnd")},In={},An={};function xn(e){if(In[e])return In[e];if(!Cn[e])return e;var t,r=Cn[e];for(t in r)if(r.hasOwnProperty(t)&&t in An)return In[e]=r[t];return e}u&&(An=document.createElement("div").style,"AnimationEvent"in window||(delete Cn.animationend.animation,delete Cn.animationiteration.animation,delete Cn.animationstart.animation),"TransitionEvent"in window||delete Cn.transitionend.transition);var Sn=xn("animationend"),Tn=xn("animationiteration"),En=xn("animationstart"),Pn=xn("transitionend"),Rn=new Map,_n="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){Rn.set(e,t),c(t,[e])}for(var Mn=0;Mn<_n.length;Mn++){var On=_n[Mn];Nn(On.toLowerCase(),"on"+(On[0].toUpperCase()+On.slice(1)))}Nn(Sn,"onAnimationEnd"),Nn(Tn,"onAnimationIteration"),Nn(En,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(Pn,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function jn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,o,a,s,c,l){if(Ue.apply(this,arguments),qe){if(!qe)throw Error(i(198));var u=je;qe=!1,je=null,De||(De=!0,Fe=u)}}(n,t,void 0,e),e.currentTarget=null}function Dn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;jn(o,s,l),i=c}else for(a=0;a<n.length;a++){if(c=(s=n[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;jn(o,s,l),i=c}}}if(De)throw e=Fe,De=!1,Fe=null,e}function Fn(e,t){var r=t[mo];void 0===r&&(r=t[mo]=new Set);var n=e+"__bubble";r.has(n)||(Bn(t,e,2,!1),r.add(n))}function Hn(e,t,r){var n=0;t&&(n|=4),Bn(r,e,n,t)}var Un="_reactListening"+Math.random().toString(36).slice(2);function zn(e){if(!e[Un]){e[Un]=!0,a.forEach(function(t){"selectionchange"!==t&&(qn.has(t)||Hn(t,!1,e),Hn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Un]||(t[Un]=!0,Hn("selectionchange",!1,t))}}function Bn(e,t,r,n){switch(Jt(t)){case 1:var o=Gt;break;case 4:o=Vt;break;default:o=Wt}r=o.bind(null,t,r,e),o=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),n?void 0!==o?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):void 0!==o?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function Kn(e,t,r,n,o){var i=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var a=n.tag;if(3===a||4===a){var s=n.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=n.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=bo(s)))return;if(5===(c=a.tag)||6===c){n=i=a;continue e}s=s.parentNode}}n=n.return}_e(function(){var n=i,o=ke(r),a=[];e:{var s=Rn.get(e);if(void 0!==s){var c=lr,l=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":c=Sr;break;case"focusin":l="focus",c=pr;break;case"focusout":l="blur",c=pr;break;case"beforeblur":case"afterblur":c=pr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=gr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Er;break;case Sn:case Tn:case En:c=mr;break;case Pn:c=Pr;break;case"scroll":c=dr;break;case"wheel":c=_r;break;case"copy":case"cut":case"paste":c=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Tr}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var g,f=n;null!==f;){var p=(g=f).stateNode;if(5===g.tag&&null!==p&&(g=p,null!==h&&(null!=(p=Ne(f,h))&&u.push(Gn(f,p,g)))),d)break;f=f.return}0<u.length&&(s=new c(s,l,null,r,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===we||!(l=r.relatedTarget||r.fromElement)||!bo(l)&&!l[po])&&(c||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=n,null!==(l=(l=r.relatedTarget||r.toElement)?bo(l):null)&&(l!==(d=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=n),c!==l)){if(u=gr,p="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tr,p="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==c?s:ko(c),g=null==l?s:ko(l),(s=new u(p,f+"leave",c,r,o)).target=d,s.relatedTarget=g,p=null,bo(o)===n&&((u=new u(h,f+"enter",l,r,o)).target=g,u.relatedTarget=d,p=u),d=p,c&&l)e:{for(h=l,f=0,g=u=c;g;g=Wn(g))f++;for(g=0,p=h;p;p=Wn(p))g++;for(;0<f-g;)u=Wn(u),f--;for(;0<g-f;)h=Wn(h),g--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Wn(u),h=Wn(h)}u=null}else u=null;null!==c&&Qn(a,s,c,u,!1),null!==l&&null!==d&&Qn(a,d,l,u,!0)}if("select"===(c=(s=n?ko(n):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Yr;else if(Br(s))if(Jr)m=an;else{m=nn;var y=rn}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=on);switch(m&&(m=m(e,n))?Kr(a,m,r,o):(y&&y(e,s,n),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=n?ko(n):window,e){case"focusin":(Br(y)||"true"===y.contentEditable)&&(mn=y,yn=n,vn=null);break;case"focusout":vn=yn=mn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,wn(a,r,o);break;case"selectionchange":if(pn)break;case"keydown":case"keyup":wn(a,r,o)}var v;if(Mr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ur?Fr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(qr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ur&&(v=er()):(Xt="value"in($t=o)?$t.value:$t.textContent,Ur=!0)),0<(y=Vn(n,b)).length&&(b=new br(b,e,null,r,o),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Hr(r))&&(b.data=v))),(v=Lr?function(e,t){switch(e){case"compositionend":return Hr(t);case"keypress":return 32!==t.which?null:(Dr=!0,jr);case"textInput":return(e=t.data)===jr&&Dr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Mr&&Fr(e,t)?(e=er(),Zt=Xt=$t=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Vn(n,"onBeforeInput")).length&&(o=new br("onBeforeInput","beforeinput",null,r,o),a.push({event:o,listeners:n}),o.data=v))}Dn(a,t)})}function Gn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Vn(e,t){for(var r=t+"Capture",n=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=Ne(e,r))&&n.unshift(Gn(e,i,o)),null!=(i=Ne(e,t))&&n.push(Gn(e,i,o))),e=e.return}return n}function Wn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qn(e,t,r,n,o){for(var i=t._reactName,a=[];null!==r&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(null!==c&&c===n)break;5===s.tag&&null!==l&&(s=l,o?null!=(c=Ne(r,i))&&a.unshift(Gn(r,c,s)):o||null!=(c=Ne(r,i))&&a.push(Gn(r,c,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Yn=/\r\n?/g,Jn=/\u0000|\uFFFD/g;function $n(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Jn,"")}function Xn(e,t,r){if(t=$n(t),$n(e)!==t&&r)throw Error(i(425))}function Zn(){}var eo=null,to=null;function ro(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var no="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:no;function so(e){setTimeout(function(){throw e})}function co(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&8===o.nodeType)if("/$"===(r=o.data)){if(0===n)return e.removeChild(o),void zt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=o}while(r);zt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),go="__reactFiber$"+ho,fo="__reactProps$"+ho,po="__reactContainer$"+ho,mo="__reactEvents$"+ho,yo="__reactListeners$"+ho,vo="__reactHandles$"+ho;function bo(e){var t=e[go];if(t)return t;for(var r=e.parentNode;r;){if(t=r[po]||r[go]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=uo(e);null!==e;){if(r=e[go])return r;e=uo(e)}return t}r=(e=r).parentNode}return null}function wo(e){return!(e=e[go]||e[po])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ko(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Co(e){return e[fo]||null}var Io=[],Ao=-1;function xo(e){return{current:e}}function So(e){0>Ao||(e.current=Io[Ao],Io[Ao]=null,Ao--)}function To(e,t){Ao++,Io[Ao]=e.current,e.current=t}var Eo={},Po=xo(Eo),Ro=xo(!1),_o=Eo;function No(e,t){var r=e.type.contextTypes;if(!r)return Eo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in r)i[o]=t[o];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oo(){So(Ro),So(Po)}function Lo(e,t,r){if(Po.current!==Eo)throw Error(i(168));To(Po,t),To(Ro,r)}function qo(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var o in n=n.getChildContext())if(!(o in t))throw Error(i(108,B(e)||"Unknown",o));return j({},r,n)}function jo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Eo,_o=Po.current,To(Po,e),To(Ro,Ro.current),!0}function Do(e,t,r){var n=e.stateNode;if(!n)throw Error(i(169));r?(e=qo(e,t,_o),n.__reactInternalMemoizedMergedChildContext=e,So(Ro),So(Po),To(Po,e)):So(Ro),To(Ro,r)}var Fo=null,Ho=!1,Uo=!1;function zo(e){null===Fo?Fo=[e]:Fo.push(e)}function Bo(){if(!Uo&&null!==Fo){Uo=!0;var e=0,t=bt;try{var r=Fo;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Fo=null,Ho=!1}catch(o){throw null!==Fo&&(Fo=Fo.slice(e+1)),We(Ze,Bo),o}finally{bt=t,Uo=!1}}return null}var Ko=[],Go=0,Vo=null,Wo=0,Qo=[],Yo=0,Jo=null,$o=1,Xo="";function Zo(e,t){Ko[Go++]=Wo,Ko[Go++]=Vo,Vo=e,Wo=t}function ei(e,t,r){Qo[Yo++]=$o,Qo[Yo++]=Xo,Qo[Yo++]=Jo,Jo=e;var n=$o;e=Xo;var o=32-at(n)-1;n&=~(1<<o),r+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(n&(1<<a)-1).toString(32),n>>=a,o-=a,$o=1<<32-at(t)+o|r<<o|n,Xo=i+e}else $o=1<<i|r<<o|n,Xo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ri(e){for(;e===Vo;)Vo=Ko[--Go],Ko[Go]=null,Wo=Ko[--Go],Ko[Go]=null;for(;e===Jo;)Jo=Qo[--Yo],Qo[Yo]=null,Xo=Qo[--Yo],Qo[Yo]=null,$o=Qo[--Yo],Qo[Yo]=null}var ni=null,oi=null,ii=!1,ai=null;function si(e,t){var r=_l(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ci(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,oi=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Jo?{id:$o,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=_l(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ni=e,oi=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var r=t;if(!ci(e,t)){if(li(e))throw Error(i(418));t=lo(r.nextSibling);var n=ni;t&&ci(e,t)?si(n,r):(e.flags=-4097&e.flags|2,ii=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ni=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ro(e.type,e.memoizedProps)),t&&(t=oi)){if(li(e))throw gi(),Error(i(418));for(;t;)si(e,t),t=lo(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){oi=lo(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}oi=null}}else oi=ni?lo(e.stateNode.nextSibling):null;return!0}function gi(){for(var e=oi;e;)e=lo(e.nextSibling)}function fi(){oi=ni=null,ii=!1}function pi(e){null===ai?ai=[e]:ai.push(e)}var mi=w.ReactCurrentBatchConfig;function yi(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(i(309));var n=r.stateNode}if(!n)throw Error(i(147,e));var o=n,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!r._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function a(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,r,n){return null===t||6!==t.tag?((t=jl(r,e.mode,n)).return=e,t):((t=o(t,r)).return=e,t)}function l(e,t,r,n){var i=r.type;return i===I?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===N&&bi(i)===t.type)?((n=o(t,r.props)).ref=yi(e,t,r),n.return=e,n):((n=Ol(r.type,r.key,r.props,null,e.mode,n)).ref=yi(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Dl(r,e.mode,n)).return=e,t):((t=o(t,r.children||[])).return=e,t)}function d(e,t,r,n,i){return null===t||7!==t.tag?((t=Ll(r,e.mode,n,i)).return=e,t):((t=o(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jl(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(r=Ol(t.type,t.key,t.props,null,e.mode,r)).ref=yi(e,null,t),r.return=e,r;case C:return(t=Dl(t,e.mode,r)).return=e,t;case N:return h(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Ll(t,e.mode,r,null)).return=e,t;vi(e,t)}return null}function g(e,t,r,n){var o=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==o?null:c(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return r.key===o?l(e,t,r,n):null;case C:return r.key===o?u(e,t,r,n):null;case N:return g(e,t,(o=r._init)(r._payload),n)}if(te(r)||L(r))return null!==o?null:d(e,t,r,n,null);vi(e,r)}return null}function f(e,t,r,n,o){if("string"===typeof n&&""!==n||"number"===typeof n)return c(t,e=e.get(r)||null,""+n,o);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return l(t,e=e.get(null===n.key?r:n.key)||null,n,o);case C:return u(t,e=e.get(null===n.key?r:n.key)||null,n,o);case N:return f(e,t,r,(0,n._init)(n._payload),o)}if(te(n)||L(n))return d(t,e=e.get(r)||null,n,o,null);vi(t,n)}return null}function p(o,i,s,c){for(var l=null,u=null,d=i,p=i=0,m=null;null!==d&&p<s.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var y=g(o,d,s[p],c);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(o,d),i=a(y,i,p),null===u?l=y:u.sibling=y,u=y,d=m}if(p===s.length)return r(o,d),ii&&Zo(o,p),l;if(null===d){for(;p<s.length;p++)null!==(d=h(o,s[p],c))&&(i=a(d,i,p),null===u?l=d:u.sibling=d,u=d);return ii&&Zo(o,p),l}for(d=n(o,d);p<s.length;p++)null!==(m=f(d,o,p,s[p],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),i=a(m,i,p),null===u?l=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(o,e)}),ii&&Zo(o,p),l}function m(o,s,c,l){var u=L(c);if("function"!==typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var d=u=null,p=s,m=s=0,y=null,v=c.next();null!==p&&!v.done;m++,v=c.next()){p.index>m?(y=p,p=null):y=p.sibling;var b=g(o,p,v.value,l);if(null===b){null===p&&(p=y);break}e&&p&&null===b.alternate&&t(o,p),s=a(b,s,m),null===d?u=b:d.sibling=b,d=b,p=y}if(v.done)return r(o,p),ii&&Zo(o,m),u;if(null===p){for(;!v.done;m++,v=c.next())null!==(v=h(o,v.value,l))&&(s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return ii&&Zo(o,m),u}for(p=n(o,p);!v.done;m++,v=c.next())null!==(v=f(p,o,m,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(o,e)}),ii&&Zo(o,m),u}return function e(n,i,a,c){if("object"===typeof a&&null!==a&&a.type===I&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case k:e:{for(var l=a.key,u=i;null!==u;){if(u.key===l){if((l=a.type)===I){if(7===u.tag){r(n,u.sibling),(i=o(u,a.props.children)).return=n,n=i;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===N&&bi(l)===u.type){r(n,u.sibling),(i=o(u,a.props)).ref=yi(n,u,a),i.return=n,n=i;break e}r(n,u);break}t(n,u),u=u.sibling}a.type===I?((i=Ll(a.props.children,n.mode,c,a.key)).return=n,n=i):((c=Ol(a.type,a.key,a.props,null,n.mode,c)).ref=yi(n,i,a),c.return=n,n=c)}return s(n);case C:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){r(n,i.sibling),(i=o(i,a.children||[])).return=n,n=i;break e}r(n,i);break}t(n,i),i=i.sibling}(i=Dl(a,n.mode,c)).return=n,n=i}return s(n);case N:return e(n,i,(u=a._init)(a._payload),c)}if(te(a))return p(n,i,a,c);if(L(a))return m(n,i,a,c);vi(n,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(r(n,i.sibling),(i=o(i,a)).return=n,n=i):(r(n,i),(i=jl(a,n.mode,c)).return=n,n=i),s(n)):r(n,i)}}var ki=wi(!0),Ci=wi(!1),Ii=xo(null),Ai=null,xi=null,Si=null;function Ti(){Si=xi=Ai=null}function Ei(e){var t=Ii.current;So(Ii),e._currentValue=t}function Pi(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ri(e,t){Ai=e,Si=xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function _i(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===xi){if(null===Ai)throw Error(i(308));xi=e,Ai.dependencies={lanes:0,firstContext:e}}else xi=xi.next=e;return t}var Ni=null;function Mi(e){null===Ni?Ni=[e]:Ni.push(e)}function Oi(e,t,r,n){var o=t.interleaved;return null===o?(r.next=r,Mi(t)):(r.next=o.next,o.next=r),t.interleaved=r,Li(e,n)}function Li(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var qi=!1;function ji(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hi(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Ec)){var o=n.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),n.pending=t,Li(e,r)}return null===(o=n.interleaved)?(t.next=t,Mi(n)):(t.next=o.next,o.next=t),n.interleaved=t,Li(e,r)}function Ui(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}function zi(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var o=null,i=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===i?o=i=a:i=i.next=a,r=r.next}while(null!==r);null===i?o=i=t:i=i.next=t}else o=i=t;return r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bi(e,t,r,n){var o=e.updateQueue;qi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var h=s.lane,g=s.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:g,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,p=s;switch(h=t,g=r,p.tag){case 1:if("function"===typeof(f=p.payload)){d=f.call(g,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=p.payload)?f.call(g,d,h):f)||void 0===h)break e;d=j({},d,h);break e;case 2:qi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else g={eventTime:g,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=g,c=d):u=u.next=g,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);qc|=a,e.lanes=a,e.memoizedState=d}}function Ki(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(null!==o){if(n.callback=null,n=r,"function"!==typeof o)throw Error(i(191,o));o.call(n)}}}var Gi={},Vi=xo(Gi),Wi=xo(Gi),Qi=xo(Gi);function Yi(e){if(e===Gi)throw Error(i(174));return e}function Ji(e,t){switch(To(Qi,t),To(Wi,e),To(Vi,Gi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}So(Vi),To(Vi,t)}function $i(){So(Vi),So(Wi),So(Qi)}function Xi(e){Yi(Qi.current);var t=Yi(Vi.current),r=ce(t,e.type);t!==r&&(To(Wi,e),To(Vi,r))}function Zi(e){Wi.current===e&&(So(Vi),So(Wi))}var ea=xo(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function na(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var oa=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,aa=0,sa=null,ca=null,la=null,ua=!1,da=!1,ha=0,ga=0;function fa(){throw Error(i(321))}function pa(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function ma(e,t,r,n,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Za:es,e=r(n,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=ca=null,t.updateQueue=null,oa.current=ts,e=r(n,o)}while(da)}if(oa.current=Xa,t=null!==ca&&null!==ca.next,aa=0,la=ca=sa=null,ua=!1,t)throw Error(i(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=e:la=la.next=e,la}function ba(){if(null===ca){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===la?sa.memoizedState:la.next;if(null!==t)la=t,ca=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===la?sa.memoizedState=la=e:la=la.next=e}return la}function wa(e,t){return"function"===typeof t?t(e):t}function ka(e){var t=ba(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=ca,o=n.baseQueue,a=r.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}n.baseQueue=o=a,r.pending=null}if(null!==o){a=o.next,n=n.baseState;var c=s=null,l=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,s=n):l=l.next=h,sa.lanes|=d,qc|=d}u=u.next}while(null!==u&&u!==a);null===l?s=n:l.next=c,sn(n,t.memoizedState)||(bs=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(null!==(e=r.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,qc|=a,o=o.next}while(o!==e)}else null===o&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ca(e){var t=ba(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(null!==o){r.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sn(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Ia(){}function Aa(e,t){var r=sa,n=ba(),o=t(),a=!sn(n.memoizedState,o);if(a&&(n.memoizedState=o,bs=!0),n=n.queue,qa(Ta.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(r.flags|=2048,_a(9,Sa.bind(null,r,n,o,t),void 0,null),null===Pc)throw Error(i(349));0!==(30&aa)||xa(r,t,o)}return o}function xa(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Sa(e,t,r,n){t.value=r,t.getSnapshot=n,Ea(t)&&Pa(e)}function Ta(e,t,r){return r(function(){Ea(t)&&Pa(e)})}function Ea(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch(n){return!0}}function Pa(e){var t=Li(e,1);null!==t&&rl(t,e,1,-1)}function Ra(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[t.memoizedState,e]}function _a(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Na(){return ba().memoizedState}function Ma(e,t,r,n){var o=va();sa.flags|=e,o.memoizedState=_a(1|t,r,void 0,void 0===n?null:n)}function Oa(e,t,r,n){var o=ba();n=void 0===n?null:n;var i=void 0;if(null!==ca){var a=ca.memoizedState;if(i=a.destroy,null!==n&&pa(n,a.deps))return void(o.memoizedState=_a(t,r,i,n))}sa.flags|=e,o.memoizedState=_a(1|t,r,i,n)}function La(e,t){return Ma(8390656,8,e,t)}function qa(e,t){return Oa(2048,8,e,t)}function ja(e,t){return Oa(4,2,e,t)}function Da(e,t){return Oa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ha(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Oa(4,4,Fa.bind(null,t,e),r)}function Ua(){}function za(e,t){var r=ba();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pa(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ba(e,t){var r=ba();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&pa(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ka(e,t,r){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=r):(sn(r,t)||(r=pt(),sa.lanes|=r,qc|=r,e.baseState=!0),t)}function Ga(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=r,ia.transition=n}}function Va(){return ba().memoizedState}function Wa(e,t,r){var n=tl(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ja(t,r);else if(null!==(r=Oi(e,t,r,n))){rl(r,e,n,el()),$a(r,t,n)}}function Qa(e,t,r){var n=tl(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ja(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,r);if(o.hasEagerState=!0,o.eagerState=s,sn(s,a)){var c=t.interleaved;return null===c?(o.next=o,Mi(t)):(o.next=c.next,c.next=o),void(t.interleaved=o)}}catch(l){}null!==(r=Oi(e,t,o,n))&&(rl(r,e,n,o=el()),$a(r,t,n))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ja(e,t){da=ua=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function $a(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,vt(e,r)}}var Xa={readContext:_i,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Za={readContext:_i,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:_i,useEffect:La,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ma(4194308,4,Fa.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var r=va();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=va();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Wa.bind(null,sa,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ra,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ra(!1),t=e[0];return e=Ga.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=sa,o=va();if(ii){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===Pc)throw Error(i(349));0!==(30&aa)||xa(n,t,r)}o.memoizedState=r;var a={value:r,getSnapshot:t};return o.queue=a,La(Ta.bind(null,n,a,e),[e]),n.flags|=2048,_a(9,Sa.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=va(),t=Pc.identifierPrefix;if(ii){var r=Xo;t=":"+t+"R"+(r=($o&~(1<<32-at($o)-1)).toString(32)+r),0<(r=ha++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ga++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:_i,useCallback:za,useContext:_i,useEffect:qa,useImperativeHandle:Ha,useInsertionEffect:ja,useLayoutEffect:Da,useMemo:Ba,useReducer:ka,useRef:Na,useState:function(){return ka(wa)},useDebugValue:Ua,useDeferredValue:function(e){return Ka(ba(),ca.memoizedState,e)},useTransition:function(){return[ka(wa)[0],ba().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Aa,useId:Va,unstable_isNewReconciler:!1},ts={readContext:_i,useCallback:za,useContext:_i,useEffect:qa,useImperativeHandle:Ha,useInsertionEffect:ja,useLayoutEffect:Da,useMemo:Ba,useReducer:Ca,useRef:Na,useState:function(){return Ca(wa)},useDebugValue:Ua,useDeferredValue:function(e){var t=ba();return null===ca?t.memoizedState=e:Ka(t,ca.memoizedState,e)},useTransition:function(){return[Ca(wa)[0],ba().memoizedState]},useMutableSource:Ia,useSyncExternalStore:Aa,useId:Va,unstable_isNewReconciler:!1};function rs(e,t){if(e&&e.defaultProps){for(var r in t=j({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ns(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:j({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=el(),o=tl(e),i=Fi(n,o);i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Hi(e,i,o))&&(rl(t,e,o,n),Ui(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=el(),o=tl(e),i=Fi(n,o);i.tag=1,i.payload=t,void 0!==r&&null!==r&&(i.callback=r),null!==(t=Hi(e,i,o))&&(rl(t,e,o,n),Ui(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=el(),n=tl(e),o=Fi(r,n);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Hi(e,o,n))&&(rl(t,e,n,r),Ui(t,e,n))}};function is(e,t,r,n,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!cn(r,n)||!cn(o,i))}function as(e,t,r){var n=!1,o=Eo,i=t.contextType;return"object"===typeof i&&null!==i?i=_i(i):(o=Mo(t)?_o:Po.current,i=(n=null!==(n=t.contextTypes)&&void 0!==n)?No(e,o):Eo),t=new t(r,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function cs(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},ji(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=_i(i):(i=Mo(t)?_o:Po.current,o.context=No(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ns(e,t,i,r),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),Bi(e,r,o,n),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var r="",n=t;do{r+=U(n),n=n.return}while(n);var o=r}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hs="function"===typeof WeakMap?WeakMap:Map;function gs(e,t,r){(r=Fi(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Kc||(Kc=!0,Gc=n),ds(0,t)},r}function fs(e,t,r){(r=Fi(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(r.callback=function(){ds(0,t),"function"!==typeof n&&(null===Vc?Vc=new Set([this]):Vc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ps(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new hs;var o=new Set;n.set(t,o)}else void 0===(o=n.get(t))&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=xl.bind(null,e,t,r),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,r,n,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fi(-1,1)).tag=2,Hi(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var vs=w.ReactCurrentOwner,bs=!1;function ws(e,t,r,n){t.child=null===e?Ci(t,null,r,n):ki(t,e.child,r,n)}function ks(e,t,r,n,o){r=r.render;var i=t.ref;return Ri(t,o),n=ma(e,t,r,n,i,o),r=ya(),null===e||bs?(ii&&r&&ti(t),t.flags|=1,ws(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ks(e,t,o))}function Cs(e,t,r,n,o){if(null===e){var i=r.type;return"function"!==typeof i||Nl(i)||void 0!==i.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ol(r.type,null,n,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Is(e,t,i,n,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((r=null!==(r=r.compare)?r:cn)(a,n)&&e.ref===t.ref)return Ks(e,t,o)}return t.flags|=1,(e=Ml(i,n)).ref=t.ref,e.return=t,t.child=e}function Is(e,t,r,n,o){if(null!==e){var i=e.memoizedProps;if(cn(i,n)&&e.ref===t.ref){if(bs=!1,t.pendingProps=n=i,0===(e.lanes&o))return t.lanes=e.lanes,Ks(e,t,o);0!==(131072&e.flags)&&(bs=!0)}}return Ss(e,t,r,n,o)}function As(e,t,r){var n=t.pendingProps,o=n.children,i=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},To(Mc,Nc),Nc|=r;else{if(0===(1073741824&r))return e=null!==i?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,To(Mc,Nc),Nc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==i?i.baseLanes:r,To(Mc,Nc),Nc|=n}else null!==i?(n=i.baseLanes|r,t.memoizedState=null):n=r,To(Mc,Nc),Nc|=n;return ws(e,t,o,r),t.child}function xs(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,r,n,o){var i=Mo(r)?_o:Po.current;return i=No(t,i),Ri(t,o),r=ma(e,t,r,n,i,o),n=ya(),null===e||bs?(ii&&n&&ti(t),t.flags|=1,ws(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ks(e,t,o))}function Ts(e,t,r,n,o){if(Mo(r)){var i=!0;jo(t)}else i=!1;if(Ri(t,o),null===t.stateNode)Bs(e,t),as(t,r,n),cs(t,r,n,o),n=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=r.contextType;"object"===typeof l&&null!==l?l=_i(l):l=No(t,l=Mo(r)?_o:Po.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==n||c!==l)&&ss(t,a,n,l),qi=!1;var h=t.memoizedState;a.state=h,Bi(t,n,a,o),c=t.memoizedState,s!==n||h!==c||Ro.current||qi?("function"===typeof u&&(ns(t,r,u,n),c=t.memoizedState),(s=qi||is(t,r,s,n,h,c,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=l,n=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Di(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:rs(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(c=r.contextType)&&null!==c?c=_i(c):c=No(t,c=Mo(r)?_o:Po.current);var g=r.getDerivedStateFromProps;(u="function"===typeof g||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==c)&&ss(t,a,n,c),qi=!1,h=t.memoizedState,a.state=h,Bi(t,n,a,o);var f=t.memoizedState;s!==d||h!==f||Ro.current||qi?("function"===typeof g&&(ns(t,r,g,n),f=t.memoizedState),(l=qi||is(t,r,l,n,h,f,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(n,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,f,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),a.props=n,a.state=f,a.context=c,n=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Es(e,t,r,n,i,o)}function Es(e,t,r,n,o,i){xs(e,t);var a=0!==(128&t.flags);if(!n&&!a)return o&&Do(t,r,!1),Ks(e,t,i);n=t.stateNode,vs.current=t;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&a?(t.child=ki(t,e.child,null,i),t.child=ki(t,null,s,i)):ws(e,t,s,i),t.memoizedState=n.state,o&&Do(t,r,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),Ji(e,t.containerInfo)}function Rs(e,t,r,n,o){return fi(),pi(o),t.flags|=256,ws(e,t,r,n),t.child}var _s,Ns,Ms,Os,Ls={dehydrated:null,treeContext:null,retryLane:0};function qs(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,t,r){var n,o=t.pendingProps,a=ea.current,s=!1,c=0!==(128&t.flags);if((n=c)||(n=(null===e||null!==e.memoizedState)&&0!==(2&a)),n?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),To(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=o.children,e=o.fallback,s?(o=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=ql(c,o,0,null),e=Ll(e,o,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=qs(r),t.memoizedState=Ls,e):Ds(t,c));if(null!==(a=e.memoizedState)&&null!==(n=a.dehydrated))return function(e,t,r,n,o,a,s){if(r)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,n=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=n.fallback,o=t.mode,n=ql({mode:"visible",children:n.children},o,0,null),(a=Ll(a,o,s,null)).flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,0!==(1&t.mode)&&ki(t,e.child,null,s),t.child.memoizedState=qs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===o.data){if(n=o.nextSibling&&o.nextSibling.dataset)var c=n.dgst;return n=c,Fs(e,t,s,n=us(a=Error(i(419)),n,void 0))}if(c=0!==(s&e.childLanes),bs||c){if(null!==(n=Pc)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(n.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Li(e,o),rl(n,e,o,-1))}return pl(),Fs(e,t,s,n=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Tl.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=lo(o.nextSibling),ni=t,ii=!0,ai=null,null!==e&&(Qo[Yo++]=$o,Qo[Yo++]=Xo,Qo[Yo++]=Jo,$o=e.id,Xo=e.overflow,Jo=t),t=Ds(t,n.children),t.flags|=4096,t)}(e,t,c,o,n,a,r);if(s){s=o.fallback,c=t.mode,n=(a=e.child).sibling;var l={mode:"hidden",children:o.children};return 0===(1&c)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=Ml(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==n?s=Ml(n,s):(s=Ll(s,c,r,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,c=null===(c=e.child.memoizedState)?qs(r):{baseLanes:c.baseLanes|r,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~r,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Ml(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=r),o.return=t,o.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Ds(e,t){return(t=ql({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,r,n){return null!==n&&pi(n),ki(t,e.child,null,r),(e=Ds(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hs(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Pi(e.return,t,r)}function Us(e,t,r,n,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function zs(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(ws(e,t,n.children,r),0!==(2&(n=ea.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,r,t);else if(19===e.tag)Hs(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(To(ea,n),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;null!==r;)null!==(e=r.alternate)&&null===ta(e)&&(o=r),r=r.sibling;null===(r=o)?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Us(t,!1,o,r,i);break;case"backwards":for(r=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Us(t,!0,r,null,i);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),qc|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=Ml(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Ml(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Gs(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=14680064&o.subtreeFlags,n|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Ws(e,t,r){var n=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(t),null;case 1:case 17:return Mo(t.type)&&Oo(),Vs(t),null;case 3:return n=t.stateNode,$i(),So(Ro),So(Po),na(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(al(ai),ai=null))),Ns(e,t),Vs(t),null;case 5:Zi(t);var o=Yi(Qi.current);if(r=t.type,null!==e&&null!=t.stateNode)Ms(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(i(166));return Vs(t),null}if(e=Yi(Vi.current),hi(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[go]=t,n[fo]=a,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(o=0;o<Ln.length;o++)Fn(Ln[o],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":J(n,a),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Fn("invalid",n);break;case"textarea":oe(n,a),Fn("invalid",n)}for(var c in ve(r,a),o=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?n.textContent!==l&&(!0!==a.suppressHydrationWarning&&Xn(n.textContent,l,e),o=["children",l]):"number"===typeof l&&n.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Xn(n.textContent,l,e),o=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Fn("scroll",n)}switch(r){case"input":V(n),Z(n,a,!0);break;case"textarea":V(n),ae(n);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(n.onclick=Zn)}n=o,t.updateQueue=n,null!==n&&(t.flags|=4)}else{c=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=c.createElement(r,{is:n.is}):(e=c.createElement(r),"select"===r&&(c=e,n.multiple?c.multiple=!0:n.size&&(c.size=n.size))):e=c.createElementNS(e,r),e[go]=t,e[fo]=n,_s(e,t,!1,!1),t.stateNode=e;e:{switch(c=be(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),o=n;break;case"iframe":case"object":case"embed":Fn("load",e),o=n;break;case"video":case"audio":for(o=0;o<Ln.length;o++)Fn(Ln[o],e);o=n;break;case"source":Fn("error",e),o=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),o=n;break;case"details":Fn("toggle",e),o=n;break;case"input":J(e,n),o=Y(e,n),Fn("invalid",e);break;case"option":default:o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=j({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":oe(e,n),o=ne(e,n),Fn("invalid",e)}for(a in ve(r,o),l=o)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fn("scroll",e):null!=u&&b(e,a,u,c))}switch(r){case"input":V(e),Z(e,n,!1);break;case"textarea":V(e),ae(e);break;case"option":null!=n.value&&e.setAttribute("value",""+K(n.value));break;case"select":e.multiple=!!n.multiple,null!=(a=n.value)?re(e,!!n.multiple,a,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vs(t),null;case 6:if(e&&null!=t.stateNode)Os(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(i(166));if(r=Yi(Qi.current),Yi(Vi.current),hi(t)){if(n=t.stateNode,r=t.memoizedProps,n[go]=t,(a=n.nodeValue!==r)&&null!==(e=ni))switch(e.tag){case 3:Xn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xn(n.nodeValue,r,0!==(1&e.mode))}a&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[go]=t,t.stateNode=n}return Vs(t),null;case 13:if(So(ea),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))gi(),fi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[go]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vs(t),a=!1}else null!==ai&&(al(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Oc&&(Oc=3):pl())),null!==t.updateQueue&&(t.flags|=4),Vs(t),null);case 4:return $i(),Ns(e,t),null===e&&zn(t.stateNode.containerInfo),Vs(t),null;case 10:return Ei(t.type._context),Vs(t),null;case 19:if(So(ea),null===(a=t.memoizedState))return Vs(t),null;if(n=0!==(128&t.flags),null===(c=a.rendering))if(n)Gs(a,!1);else{if(0!==Oc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ta(e))){for(t.flags|=128,Gs(a,!1),null!==(n=c.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(a=r).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return To(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>zc&&(t.flags|=128,n=!0,Gs(a,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ta(c))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!ii)return Vs(t),null}else 2*$e()-a.renderingStartTime>zc&&1073741824!==r&&(t.flags|=128,n=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(r=a.last)?r.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,r=ea.current,To(ea,n?1&r|2:1&r),t):(Vs(t),null);case 22:case 23:return dl(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Nc)&&(Vs(t),6&t.subtreeFlags&&(t.flags|=8192)):Vs(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Qs(e,t){switch(ri(t),t.tag){case 1:return Mo(t.type)&&Oo(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),So(Ro),So(Po),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(So(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return So(ea),null;case 4:return $i(),null;case 10:return Ei(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}_s=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ns=function(){},Ms=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Yi(Vi.current);var i,a=null;switch(r){case"input":o=Y(e,o),n=Y(e,n),a=[];break;case"select":o=j({},o,{value:void 0}),n=j({},n,{value:void 0}),a=[];break;case"textarea":o=ne(e,o),n=ne(e,n),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof n.onClick&&(e.onclick=Zn)}for(u in ve(r,n),r=null,o)if(!n.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var c=o[u];for(i in c)c.hasOwnProperty(i)&&(r||(r={}),r[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(c=null!=o?o[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(r||(r={}),r[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(r||(r={}),r[i]=l[i])}else r||(a||(a=[]),a.push(u,r)),r=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Fn("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Os=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ys=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Al(e,t,n)}else r.current=null}function ec(e,t,r){try{r()}catch(n){Al(e,t,n)}}var tc=!1;function rc(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var o=n=n.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&ec(t,r,i)}o=o.next}while(o!==n)}}function nc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function oc(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[go],delete t[fo],delete t[mo],delete t[yo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Zn));else if(4!==n&&null!==(e=e.child))for(cc(e,t,r),e=e.sibling;null!==e;)cc(e,t,r),e=e.sibling}function lc(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(lc(e,t,r),e=e.sibling;null!==e;)lc(e,t,r),e=e.sibling}var uc=null,dc=!1;function hc(e,t,r){for(r=r.child;null!==r;)gc(e,t,r),r=r.sibling}function gc(e,t,r){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,r)}catch(s){}switch(r.tag){case 5:Js||Zs(r,t);case 6:var n=uc,o=dc;uc=null,hc(e,t,r),dc=o,null!==(uc=n)&&(dc?(e=uc,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):uc.removeChild(r.stateNode));break;case 18:null!==uc&&(dc?(e=uc,r=r.stateNode,8===e.nodeType?co(e.parentNode,r):1===e.nodeType&&co(e,r),zt(e)):co(uc,r.stateNode));break;case 4:n=uc,o=dc,uc=r.stateNode.containerInfo,dc=!0,hc(e,t,r),uc=n,dc=o;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){o=n=n.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ec(r,t,a),o=o.next}while(o!==n)}hc(e,t,r);break;case 1:if(!Js&&(Zs(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Al(r,t,s)}hc(e,t,r);break;case 21:hc(e,t,r);break;case 22:1&r.mode?(Js=(n=Js)||null!==r.memoizedState,hc(e,t,r),Js=n):hc(e,t,r);break;default:hc(e,t,r)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new $s),t.forEach(function(t){var n=El.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))})}}function pc(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var o=r[n];try{var a=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(i(160));gc(a,s,o),uc=null,dc=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(u){Al(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),yc(e),4&n){try{rc(3,e,e.return),nc(3,e)}catch(m){Al(e,e.return,m)}try{rc(5,e,e.return)}catch(m){Al(e,e.return,m)}}break;case 1:pc(t,e),yc(e),512&n&&null!==r&&Zs(r,r.return);break;case 5:if(pc(t,e),yc(e),512&n&&null!==r&&Zs(r,r.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(m){Al(e,e.return,m)}}if(4&n&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&$(o,a),be(c,s);var u=be(c,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):b(o,d,h,u)}switch(c){case"input":X(o,a);break;case"textarea":ie(o,a);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?re(o,!!a.multiple,f,!1):g!==!!a.multiple&&(null!=a.defaultValue?re(o,!!a.multiple,a.defaultValue,!0):re(o,!!a.multiple,a.multiple?[]:"",!1))}o[fo]=a}catch(m){Al(e,e.return,m)}}break;case 6:if(pc(t,e),yc(e),4&n){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){Al(e,e.return,m)}}break;case 3:if(pc(t,e),yc(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Al(e,e.return,m)}break;case 4:default:pc(t,e),yc(e);break;case 13:pc(t,e),yc(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Uc=$e())),4&n&&fc(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Js=(u=Js)||d,pc(t,e),Js=u):pc(t,e),yc(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(h=Xs=d;null!==Xs;){switch(f=(g=Xs).child,g.tag){case 0:case 11:case 14:case 15:rc(4,g,g.return);break;case 1:Zs(g,g.return);var p=g.stateNode;if("function"===typeof p.componentWillUnmount){n=g,r=g.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Al(n,r,m)}}break;case 5:Zs(g,g.return);break;case 22:if(null!==g.memoizedState){kc(h);continue}}null!==f?(f.return=g,Xs=f):kc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=pe("display",s))}catch(m){Al(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Al(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pc(t,e),yc(e),4&n&&fc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(ac(r)){var n=r;break e}r=r.return}throw Error(i(160))}switch(n.tag){case 5:var o=n.stateNode;32&n.flags&&(he(o,""),n.flags&=-33),lc(e,sc(e),o);break;case 3:case 4:var a=n.stateNode.containerInfo;cc(e,sc(e),a);break;default:throw Error(i(161))}}catch(s){Al(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,r){Xs=e,bc(e,t,r)}function bc(e,t,r){for(var n=0!==(1&e.mode);null!==Xs;){var o=Xs,i=o.child;if(22===o.tag&&n){var a=null!==o.memoizedState||Ys;if(!a){var s=o.alternate,c=null!==s&&null!==s.memoizedState||Js;s=Ys;var l=Js;if(Ys=a,(Js=c)&&!l)for(Xs=o;null!==Xs;)c=(a=Xs).child,22===a.tag&&null!==a.memoizedState?Cc(o):null!==c?(c.return=a,Xs=c):Cc(o);for(;null!==i;)Xs=i,bc(i,t,r),i=i.sibling;Xs=o,Ys=s,Js=l}wc(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Xs=i):wc(e)}}function wc(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||nc(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Js)if(null===r)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:rs(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ki(t,a,n);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Ki(t,s,r)}break;case 5:var c=t.stateNode;if(null===r&&4&t.flags){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(i(163))}Js||512&t.flags&&oc(t)}catch(g){Al(t,t.return,g)}}if(t===e){Xs=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xs=r;break}Xs=t.return}}function kc(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xs=r;break}Xs=t.return}}function Cc(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nc(4,t)}catch(c){Al(t,r,c)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var o=t.return;try{n.componentDidMount()}catch(c){Al(t,o,c)}}var i=t.return;try{oc(t)}catch(c){Al(t,i,c)}break;case 5:var a=t.return;try{oc(t)}catch(c){Al(t,a,c)}}}catch(c){Al(t,t.return,c)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Ic,Ac=Math.ceil,xc=w.ReactCurrentDispatcher,Sc=w.ReactCurrentOwner,Tc=w.ReactCurrentBatchConfig,Ec=0,Pc=null,Rc=null,_c=0,Nc=0,Mc=xo(0),Oc=0,Lc=null,qc=0,jc=0,Dc=0,Fc=null,Hc=null,Uc=0,zc=1/0,Bc=null,Kc=!1,Gc=null,Vc=null,Wc=!1,Qc=null,Yc=0,Jc=0,$c=null,Xc=-1,Zc=0;function el(){return 0!==(6&Ec)?$e():-1!==Xc?Xc:Xc=$e()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Ec)&&0!==_c?_c&-_c:null!==mi.transition?(0===Zc&&(Zc=pt()),Zc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function rl(e,t,r,n){if(50<Jc)throw Jc=0,$c=null,Error(i(185));yt(e,r,n),0!==(2&Ec)&&e===Pc||(e===Pc&&(0===(2&Ec)&&(jc|=r),4===Oc&&sl(e,_c)),nl(e,n),1===r&&0===Ec&&0===(1&t.mode)&&(zc=$e()+500,Ho&&Bo()))}function nl(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,c=o[a];-1===c?0!==(s&r)&&0===(s&n)||(o[a]=gt(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var n=ht(e,e===Pc?_c:0);if(0===n)null!==r&&Qe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Qe(r),1===t)0===e.tag?function(e){Ho=!0,zo(e)}(cl.bind(null,e)):zo(cl.bind(null,e)),ao(function(){0===(6&Ec)&&Bo()}),r=null;else{switch(wt(n)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Pl(r,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ol(e,t){if(Xc=-1,Zc=0,0!==(6&Ec))throw Error(i(327));var r=e.callbackNode;if(Cl()&&e.callbackNode!==r)return null;var n=ht(e,e===Pc?_c:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=ml(e,n);else{t=n;var o=Ec;Ec|=2;var a=fl();for(Pc===e&&_c===t||(Bc=null,zc=$e()+500,hl(e,t));;)try{vl();break}catch(c){gl(e,c)}Ti(),xc.current=a,Ec=o,null!==Rc?t=0:(Pc=null,_c=0,t=Oc)}if(0!==t){if(2===t&&(0!==(o=ft(e))&&(n=o,t=il(e,o))),1===t)throw r=Lc,hl(e,0),sl(e,n),nl(e,$e()),r;if(6===t)sl(e,n);else{if(o=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!sn(i(),o))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=ml(e,n))&&(0!==(a=ft(e))&&(n=a,t=il(e,a))),1===t))throw r=Lc,hl(e,0),sl(e,n),nl(e,$e()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(i(345));case 2:case 5:kl(e,Hc,Bc);break;case 3:if(sl(e,n),(130023424&n)===n&&10<(t=Uc+500-$e())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&n)!==n){el(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=no(kl.bind(null,e,Hc,Bc),t);break}kl(e,Hc,Bc);break;case 4:if(sl(e,n),(4194240&n)===n)break;for(t=e.eventTimes,o=-1;0<n;){var s=31-at(n);a=1<<s,(s=t[s])>o&&(o=s),n&=~a}if(n=o,10<(n=(120>(n=$e()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ac(n/1960))-n)){e.timeoutHandle=no(kl.bind(null,e,Hc,Bc),n);break}kl(e,Hc,Bc);break;default:throw Error(i(329))}}}return nl(e,$e()),e.callbackNode===r?ol.bind(null,e):null}function il(e,t){var r=Fc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Hc,Hc=r,null!==t&&al(t)),e}function al(e){null===Hc?Hc=e:Hc.push.apply(Hc,e)}function sl(e,t){for(t&=~Dc,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),n=1<<r;e[r]=-1,t&=~n}}function cl(e){if(0!==(6&Ec))throw Error(i(327));Cl();var t=ht(e,0);if(0===(1&t))return nl(e,$e()),null;var r=ml(e,t);if(0!==e.tag&&2===r){var n=ft(e);0!==n&&(t=n,r=il(e,n))}if(1===r)throw r=Lc,hl(e,0),sl(e,t),nl(e,$e()),r;if(6===r)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kl(e,Hc,Bc),nl(e,$e()),null}function ll(e,t){var r=Ec;Ec|=1;try{return e(t)}finally{0===(Ec=r)&&(zc=$e()+500,Ho&&Bo())}}function ul(e){null!==Qc&&0===Qc.tag&&0===(6&Ec)&&Cl();var t=Ec;Ec|=1;var r=Tc.transition,n=bt;try{if(Tc.transition=null,bt=1,e)return e()}finally{bt=n,Tc.transition=r,0===(6&(Ec=t))&&Bo()}}function dl(){Nc=Mc.current,So(Mc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,oo(r)),null!==Rc)for(r=Rc.return;null!==r;){var n=r;switch(ri(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Oo();break;case 3:$i(),So(Ro),So(Po),na();break;case 5:Zi(n);break;case 4:$i();break;case 13:case 19:So(ea);break;case 10:Ei(n.type._context);break;case 22:case 23:dl()}r=r.return}if(Pc=e,Rc=e=Ml(e.current,null),_c=Nc=t,Oc=0,Lc=null,Dc=jc=qc=0,Hc=Fc=null,null!==Ni){for(t=0;t<Ni.length;t++)if(null!==(n=(r=Ni[t]).interleaved)){r.interleaved=null;var o=n.next,i=r.pending;if(null!==i){var a=i.next;i.next=o,n.next=a}r.pending=n}Ni=null}return e}function gl(e,t){for(;;){var r=Rc;try{if(Ti(),oa.current=Xa,ua){for(var n=sa.memoizedState;null!==n;){var o=n.queue;null!==o&&(o.pending=null),n=n.next}ua=!1}if(aa=0,la=ca=sa=null,da=!1,ha=0,Sc.current=null,null===r||null===r.return){Oc=1,Lc=t,Rc=null;break}e:{var a=e,s=r.return,c=r,l=t;if(t=_c,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ms(s);if(null!==f){f.flags&=-257,ys(f,s,c,0,t),1&f.mode&&ps(a,u,t),l=u;var p=(t=f).updateQueue;if(null===p){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}if(0===(1&t)){ps(a,u,t),pl();break e}l=Error(i(426))}else if(ii&&1&c.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,c,0,t),pi(ls(l,c));break e}}a=l=ls(l,c),4!==Oc&&(Oc=2),null===Fc?Fc=[a]:Fc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,gs(0,l,t));break e;case 1:c=l;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Vc||!Vc.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,fs(a,c,t));break e}}a=a.return}while(null!==a)}wl(r)}catch(w){t=w,Rc===r&&null!==r&&(Rc=r=r.return);continue}break}}function fl(){var e=xc.current;return xc.current=Xa,null===e?Xa:e}function pl(){0!==Oc&&3!==Oc&&2!==Oc||(Oc=4),null===Pc||0===(268435455&qc)&&0===(268435455&jc)||sl(Pc,_c)}function ml(e,t){var r=Ec;Ec|=2;var n=fl();for(Pc===e&&_c===t||(Bc=null,hl(e,t));;)try{yl();break}catch(o){gl(e,o)}if(Ti(),Ec=r,xc.current=n,null!==Rc)throw Error(i(261));return Pc=null,_c=0,Oc}function yl(){for(;null!==Rc;)bl(Rc)}function vl(){for(;null!==Rc&&!Ye();)bl(Rc)}function bl(e){var t=Ic(e.alternate,e,Nc);e.memoizedProps=e.pendingProps,null===t?wl(e):Rc=t,Sc.current=null}function wl(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Ws(r,t,Nc)))return void(Rc=r)}else{if(null!==(r=Qs(r,t)))return r.flags&=32767,void(Rc=r);if(null===e)return Oc=6,void(Rc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rc=t);Rc=t=e}while(null!==t);0===Oc&&(Oc=5)}function kl(e,t,r){var n=bt,o=Tc.transition;try{Tc.transition=null,bt=1,function(e,t,r,n){do{Cl()}while(null!==Qc);if(0!==(6&Ec))throw Error(i(327));r=e.finishedWork;var o=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-at(r),i=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~i}}(e,a),e===Pc&&(Rc=Pc=null,_c=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Wc||(Wc=!0,Pl(tt,function(){return Cl(),null})),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=Tc.transition,Tc.transition=null;var s=bt;bt=1;var c=Ec;Ec|=4,Sc.current=null,function(e,t){if(eo=Kt,gn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var o=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch(k){r=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,g=null;t:for(;;){for(var f;h!==r||0!==o&&3!==h.nodeType||(c=s+o),h!==a||0!==n&&3!==h.nodeType||(l=s+n),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)g=h,h=f;for(;;){if(h===e)break t;if(g===r&&++u===o&&(c=s),g===a&&++d===n&&(l=s),null!==(f=h.nextSibling))break;g=(h=g).parentNode}h=f}r=-1===c||-1===l?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(to={focusedElem:e,selectionRange:r},Kt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:rs(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(k){Al(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}p=tc,tc=!1}(e,r),mc(r,e),fn(to),Kt=!!eo,to=eo=null,e.current=r,vc(r,e,o),Je(),Ec=c,bt=s,Tc.transition=a}else e.current=r;if(Wc&&(Wc=!1,Qc=e,Yc=o),a=e.pendingLanes,0===a&&(Vc=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nl(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Kc)throw Kc=!1,e=Gc,Gc=null,e;0!==(1&Yc)&&0!==e.tag&&Cl(),a=e.pendingLanes,0!==(1&a)?e===$c?Jc++:(Jc=0,$c=e):Jc=0,Bo()}(e,t,r,n)}finally{Tc.transition=o,bt=n}return null}function Cl(){if(null!==Qc){var e=wt(Yc),t=Tc.transition,r=bt;try{if(Tc.transition=null,bt=16>e?16:e,null===Qc)var n=!1;else{if(e=Qc,Qc=null,Yc=0,0!==(6&Ec))throw Error(i(331));var o=Ec;for(Ec|=4,Xs=e.current;null!==Xs;){var a=Xs,s=a.child;if(0!==(16&Xs.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:rc(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xs=h;else for(;null!==Xs;){var g=(d=Xs).sibling,f=d.return;if(ic(d),d===u){Xs=null;break}if(null!==g){g.return=f,Xs=g;break}Xs=f}}}var p=a.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(a=Xs).flags))switch(a.tag){case 0:case 11:case 15:rc(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Xs=v;break e}Xs=a.return}}var b=e.current;for(Xs=b;null!==Xs;){var w=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Xs=w;else e:for(s=b;null!==Xs;){if(0!==(2048&(c=Xs).flags))try{switch(c.tag){case 0:case 11:case 15:nc(9,c)}}catch(C){Al(c,c.return,C)}if(c===s){Xs=null;break e}var k=c.sibling;if(null!==k){k.return=c.return,Xs=k;break e}Xs=c.return}}if(Ec=o,Bo(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(C){}n=!0}return n}finally{bt=r,Tc.transition=t}}return!1}function Il(e,t,r){e=Hi(e,t=gs(0,t=ls(r,t),1),1),t=el(),null!==e&&(yt(e,1,t),nl(e,t))}function Al(e,t,r){if(3===e.tag)Il(e,e,r);else for(;null!==t;){if(3===t.tag){Il(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Vc||!Vc.has(n))){t=Hi(t,e=fs(t,e=ls(r,e),1),1),e=el(),null!==t&&(yt(t,1,e),nl(t,e));break}}t=t.return}}function xl(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&r,Pc===e&&(_c&r)===r&&(4===Oc||3===Oc&&(130023424&_c)===_c&&500>$e()-Uc?hl(e,0):Dc|=r),nl(e,t)}function Sl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=el();null!==(e=Li(e,t))&&(yt(e,t,r),nl(e,r))}function Tl(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Sl(e,r)}function El(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;null!==o&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(i(314))}null!==n&&n.delete(t),Sl(e,r)}function Pl(e,t){return We(e,t)}function Rl(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _l(e,t,r,n){return new Rl(e,t,r,n)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var r=e.alternate;return null===r?((r=_l(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ol(e,t,r,n,o,a){var s=2;if(n=e,"function"===typeof e)Nl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case I:return Ll(r.children,o,a,t);case A:s=8,o|=8;break;case x:return(e=_l(12,r,t,2|o)).elementType=x,e.lanes=a,e;case P:return(e=_l(13,r,t,o)).elementType=P,e.lanes=a,e;case R:return(e=_l(19,r,t,o)).elementType=R,e.lanes=a,e;case M:return ql(r,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case T:s=9;break e;case E:s=11;break e;case _:s=14;break e;case N:s=16,n=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=_l(s,r,t,o)).elementType=e,t.type=n,t.lanes=a,t}function Ll(e,t,r,n){return(e=_l(7,e,n,t)).lanes=r,e}function ql(e,t,r,n){return(e=_l(22,e,n,t)).elementType=M,e.lanes=r,e.stateNode={isHidden:!1},e}function jl(e,t,r){return(e=_l(6,e,null,t)).lanes=r,e}function Dl(e,t,r){return(t=_l(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fl(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Hl(e,t,r,n,o,i,a,s,c){return e=new Fl(e,t,r,s,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=_l(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ji(i),e}function Ul(e){if(!e)return Eo;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var r=e.type;if(Mo(r))return qo(e,r,t)}return t}function zl(e,t,r,n,o,i,a,s,c){return(e=Hl(r,n,!0,e,0,i,0,s,c)).context=Ul(null),r=e.current,(i=Fi(n=el(),o=tl(r))).callback=void 0!==t&&null!==t?t:null,Hi(r,i,o),e.current.lanes=o,yt(e,o,n),nl(e,n),e}function Bl(e,t,r,n){var o=t.current,i=el(),a=tl(o);return r=Ul(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fi(i,a)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Hi(o,t,a))&&(rl(e,o,a,i),Ui(e,o,a)),a}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Vl(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Ic=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ro.current)bs=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bs=!1,function(e,t,r){switch(t.tag){case 3:Ps(t),fi();break;case 5:Xi(t);break;case 1:Mo(t.type)&&jo(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;To(Ii,n._currentValue),n._currentValue=o;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(To(ea,1&ea.current),t.flags|=128,null):0!==(r&t.child.childLanes)?js(e,t,r):(To(ea,1&ea.current),null!==(e=Ks(e,t,r))?e.sibling:null);To(ea,1&ea.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return zs(e,t,r);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),To(ea,ea.current),n)break;return null;case 22:case 23:return t.lanes=0,As(e,t,r)}return Ks(e,t,r)}(e,t,r);bs=0!==(131072&e.flags)}else bs=!1,ii&&0!==(1048576&t.flags)&&ei(t,Wo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Bs(e,t),e=t.pendingProps;var o=No(t,Po.current);Ri(t,r),o=ma(null,t,n,e,o,r);var a=ya();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(n)?(a=!0,jo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,ji(t),o.updater=os,t.stateNode=o,o._reactInternals=t,cs(t,n,e,r),t=Es(null,t,n,!0,a,r)):(t.tag=0,ii&&a&&ti(t),ws(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,n=(o=n._init)(n._payload),t.type=n,o=t.tag=function(e){if("function"===typeof e)return Nl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===_)return 14}return 2}(n),e=rs(n,e),o){case 0:t=Ss(null,t,n,e,r);break e;case 1:t=Ts(null,t,n,e,r);break e;case 11:t=ks(null,t,n,e,r);break e;case 14:t=Cs(null,t,n,rs(n.type,e),r);break e}throw Error(i(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,Ss(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 1:return n=t.type,o=t.pendingProps,Ts(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 3:e:{if(Ps(t),null===e)throw Error(i(387));n=t.pendingProps,o=(a=t.memoizedState).element,Di(e,t),Bi(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated){if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Rs(e,t,n,r,o=ls(Error(i(423)),t));break e}if(n!==o){t=Rs(e,t,n,r,o=ls(Error(i(424)),t));break e}for(oi=lo(t.stateNode.containerInfo.firstChild),ni=t,ii=!0,ai=null,r=Ci(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fi(),n===o){t=Ks(e,t,r);break e}ws(e,t,n,r)}t=t.child}return t;case 5:return Xi(t),null===e&&ui(t),n=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,ro(n,o)?s=null:null!==a&&ro(n,a)&&(t.flags|=32),xs(e,t),ws(e,t,s,r),t.child;case 6:return null===e&&ui(t),null;case 13:return js(e,t,r);case 4:return Ji(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=ki(t,null,n,r):ws(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,ks(e,t,n,o=t.elementType===n?o:rs(n,o),r);case 7:return ws(e,t,t.pendingProps,r),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,To(Ii,n._currentValue),n._currentValue=s,null!==a)if(sn(a.value,s)){if(a.children===o.children&&!Ro.current){t=Ks(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var l=c.firstContext;null!==l;){if(l.context===n){if(1===a.tag){(l=Fi(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),Pi(a.return,r,t),c.lanes|=r;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),Pi(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Ri(t,r),n=n(o=_i(o)),t.flags|=1,ws(e,t,n,r),t.child;case 14:return o=rs(n=t.type,t.pendingProps),Cs(e,t,n,o=rs(n.type,o),r);case 15:return Is(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:rs(n,o),Bs(e,t),t.tag=1,Mo(n)?(e=!0,jo(t)):e=!1,Ri(t,r),as(t,n,o),cs(t,n,o,r),Es(null,t,n,!0,e,r);case 19:return zs(e,t,r);case 22:return As(e,t,r)}throw Error(i(156,t.tag))};var Wl="function"===typeof reportError?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}function Yl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=Kl(a);s.call(e)}}Bl(t,a,e,o)}else a=function(e,t,r,n,o){if(o){if("function"===typeof n){var i=n;n=function(){var e=Kl(a);i.call(e)}}var a=zl(t,n,e,0,null,!1,0,"",Xl);return e._reactRootContainer=a,e[po]=a.current,zn(8===e.nodeType?e.parentNode:e),ul(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof n){var s=n;n=function(){var e=Kl(c);s.call(e)}}var c=Hl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[po]=c.current,zn(8===e.nodeType?e.parentNode:e),ul(function(){Bl(t,c,r,n)}),c}(r,t,e,o,n);return Kl(a)}Yl.prototype.render=Ql.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Bl(e,t,null,null)},Yl.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul(function(){Bl(null,e,null,null)}),t[po]=null}},Yl.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mt.length&&0!==t&&t<Mt[r].priority;r++);Mt.splice(r,0,e),0===r&&jt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(vt(t,1|r),nl(t,$e()),0===(6&Ec)&&(zc=$e()+500,Bo()))}break;case 13:ul(function(){var t=Li(e,1);if(null!==t){var r=el();rl(t,e,1,r)}}),Vl(e,1)}},Ct=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)rl(t,e,134217728,el());Vl(e,134217728)}},It=function(e){if(13===e.tag){var t=tl(e),r=Li(e,t);if(null!==r)rl(r,e,t,el());Vl(e,t)}},At=function(){return bt},xt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},Ce=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=Co(n);if(!o)throw Error(i(90));W(n),X(n,o)}}}break;case"textarea":ie(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=ll,Pe=ul;var eu={usingClientEntryPoint:!1,Events:[wo,ko,Co,Se,Te,ll]},tu={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{ot=nu.inject(ru),it=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(i(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:C,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Jl(e))throw Error(i(299));var r=!1,n="",o=Wl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Hl(e,1,!1,null,0,r,0,n,o),e[po]=t.current,zn(8===e.nodeType?e.parentNode:e),new Ql(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,r){if(!$l(t))throw Error(i(200));return Zl(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Jl(e))throw Error(i(405));var n=null!=r&&r.hydratedSources||null,o=!1,a="",s=Wl;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(o=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=zl(t,null,e,1,null!=r?r:null,o,0,a,s),e[po]=t.current,zn(e),n)for(e=0;e<n.length;e++)o=(o=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Yl(t)},t.render=function(e,t,r){if(!$l(t))throw Error(i(200));return Zl(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!$l(e))throw Error(i(40));return!!e._reactRootContainer&&(ul(function(){Zl(null,null,e,!1,function(){e._reactRootContainer=null,e[po]=null})}),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!$l(r))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zl(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}var n=r(43),o=r(391);const i={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},a=200,s=400,c=400,l=499,u=500,d=599,h=[i.OPENID_SCOPE,i.PROFILE_SCOPE,i.OFFLINE_ACCESS_SCOPE],g=[...h,i.EMAIL_SCOPE],f="Content-Type",p="Content-Length",m="Retry-After",y="X-AnchorMailbox",v="x-ms-request-id",b="x-ms-httpver",w="active-account-filters",k="common",C="organizations",I="consumers",A="access_token",x="xms_cc",S={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},T={PLAIN:"plain",S256:"S256"},E="code",P="id_token token refresh_token",R="query",_="fragment",N="query",M="authorization_code",O="refresh_token",L="MSSTS",q="ADFS",j="Generic",D="-",F=".",H={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},U="appmetadata",z="1",B="authority-metadata",K=86400,G="config",V="cache",W="network",Q="hardcoded_values",Y={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},J={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},$=60,X=3600,Z="throttling",ee="retry-after, h429",te="invalid_grant",re="client_mismatch",ne="1",oe="3",ie="4",ae="2",se="4",ce="5",le="0",ue="1",de="2",he="3",ge="4",fe="pop",pe="unexpected_error",me="post_request_failed",ye={[pe]:"Unexpected error in authentication.",[me]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ve extends Error{constructor(e,t,r){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,ve.prototype),this.errorCode=e||i.EMPTY_STRING,this.errorMessage=t||i.EMPTY_STRING,this.subError=r||i.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function be(e,t){return new ve(e,t?`${ye[e]} ${t}`:ye[e])}const we="storage_not_supported",ke="stubbed_public_client_application_called",Ce="in_mem_redirect_unavailable",Ie={[we]:"Given storage configuration option was not supported.",[ke]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Ce]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Ae extends ve{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Ae.prototype)}}function xe(e){return new Ae(e,Ie[e])}const Se={initialize:()=>Promise.reject(xe(ke)),acquireTokenPopup:()=>Promise.reject(xe(ke)),acquireTokenRedirect:()=>Promise.reject(xe(ke)),acquireTokenSilent:()=>Promise.reject(xe(ke)),acquireTokenByCode:()=>Promise.reject(xe(ke)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(xe(ke)),loginPopup:()=>Promise.reject(xe(ke)),loginRedirect:()=>Promise.reject(xe(ke)),logout:()=>Promise.reject(xe(ke)),logoutRedirect:()=>Promise.reject(xe(ke)),logoutPopup:()=>Promise.reject(xe(ke)),ssoSilent:()=>Promise.reject(xe(ke)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw xe(ke)},getLogger:()=>{throw xe(ke)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw xe(ke)},hydrateCache:()=>Promise.reject(xe(ke)),clearCache:()=>Promise.reject(xe(ke))},Te="invalid_grant",Ee=483,Pe=600,Re="msal",_e=30,Ne="msal.js.browser",Me="53ee284d-920a-4b59-9d30-a60315b26836",Oe="ppnbnpeolgkicgegkbkbjmhlideopiji",Le="MATS",qe="MicrosoftEntra",je="DOM API",De="get-token-and-sign-out",Fe="PlatformAuthDOMHandler",He="PlatformAuthExtensionHandler",Ue="Handshake",ze="HandshakeResponse",Be="GetToken",Ke="Response",Ge="localStorage",Ve="sessionStorage",We="memoryStorage",Qe="GET",Ye="POST",Je="signin",$e="signout",Xe="request.origin",Ze="urlHash",et="request.params",tt="code.verifier",rt="interaction.status",nt="request.native",ot="msal.account.keys",it="msal.token.keys",at="msal.version",st="wrapper.sku",ct="wrapper.version",lt=861,ut=862,dt=863,ht=865,gt=866,ft=61,pt=961,mt=962;var yt;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(yt||(yt={}));const vt="startup",bt="login",wt="logout",kt="acquireToken",Ct="ssoSilent",It="handleRedirect",At="none",xt={scopes:h},St="@azure/msal-react",Tt="msal.db",Et=`${Tt}.keys`,Pt=0,Rt=1,_t=2,Nt=3,Mt=4,Ot=5,Lt=[Pt,Ot,Mt],qt="msal.browser.platform.auth.dom";var jt;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(jt||(jt={}));class Dt{constructor(e,t,r){this.level=jt.Info;const n=e||Dt.createDefaultLoggerOptions();this.localCallback=n.loggerCallback||(()=>{}),this.piiLoggingEnabled=n.piiLoggingEnabled||!1,this.level="number"===typeof n.logLevel?n.logLevel:jt.Info,this.correlationId=n.correlationId||i.EMPTY_STRING,this.packageName=t||i.EMPTY_STRING,this.packageVersion=r||i.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:jt.Info}}clone(e,t,r){return new Dt({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const r=`${`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${jt[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:jt.Error,containsPii:!1,correlationId:t||i.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:jt.Error,containsPii:!0,correlationId:t||i.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:jt.Warning,containsPii:!1,correlationId:t||i.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:jt.Warning,containsPii:!0,correlationId:t||i.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:jt.Info,containsPii:!1,correlationId:t||i.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:jt.Info,containsPii:!0,correlationId:t||i.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:jt.Verbose,containsPii:!1,correlationId:t||i.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:jt.Verbose,containsPii:!0,correlationId:t||i.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:jt.Trace,containsPii:!1,correlationId:t||i.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:jt.Trace,containsPii:!0,correlationId:t||i.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Ft={instance:Se,inProgress:At,accounts:[],logger:new Dt({})},Ht=n.createContext(Ft),Ut=(Ht.Consumer,"msal:initializeStart"),zt="msal:initializeEnd",Bt="msal:accountAdded",Kt="msal:accountRemoved",Gt="msal:activeAccountChanged",Vt="msal:loginStart",Wt="msal:loginSuccess",Qt="msal:loginFailure",Yt="msal:acquireTokenStart",Jt="msal:acquireTokenSuccess",$t="msal:acquireTokenFailure",Xt="msal:acquireTokenFromNetworkStart",Zt="msal:ssoSilentStart",er="msal:ssoSilentSuccess",tr="msal:ssoSilentFailure",rr="msal:acquireTokenByCodeStart",nr="msal:acquireTokenByCodeSuccess",or="msal:acquireTokenByCodeFailure",ir="msal:handleRedirectStart",ar="msal:handleRedirectEnd",sr="msal:popupOpened",cr="msal:logoutStart",lr="msal:logoutSuccess",ur="msal:logoutFailure",dr="msal:logoutEnd",hr="msal:restoreFromBFCache";class gr{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Vt:return bt;case Zt:return Ct;case Yt:if(e.interactionType===yt.Redirect||e.interactionType===yt.Popup)return kt;break;case ir:return It;case cr:return wt;case er:case tr:if(t&&t!==Ct)break;return At;case dr:if(t&&t!==wt)break;return At;case ar:if(t&&t!==It)break;return At;case Wt:case Qt:case Jt:case $t:case hr:if(e.interactionType===yt.Redirect||e.interactionType===yt.Popup){if(t&&t!==bt&&t!==kt)break;return At}}return null}}function fr(e,t){if(e.length!==t.length)return!1;const r=[...t];return e.every(e=>{const t=r.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)})}const pr="3.0.14",mr="UNBLOCK_INPROGRESS",yr="EVENT",vr=(e,t)=>{const{type:r,payload:n}=t;let o=e.inProgress;switch(r){case mr:e.inProgress===vt&&(o=At,n.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case yr:const t=n.message,i=gr.getInteractionStatusFromEvent(t,e.inProgress);i&&(n.logger.info(`MsalProvider - ${t.eventType} results in setting inProgress from ${e.inProgress} to ${i}`),o=i);break;default:throw new Error(`Unknown action type: ${r}`)}if(o===vt)return e;const i=n.instance.getAllAccounts();return o===e.inProgress||fr(i,e.accounts)?o!==e.inProgress?{...e,inProgress:o}:fr(i,e.accounts)?e:{...e,accounts:i}:{...e,inProgress:o,accounts:i}};function br(e){let{instance:t,children:r}=e;(0,n.useEffect)(()=>{t.initializeWrapperLibrary(St,pr)},[t]);const o=(0,n.useMemo)(()=>t.getLogger().clone("@azure/msal-react",pr),[t]),[i,a]=(0,n.useReducer)(vr,void 0,()=>({inProgress:vt,accounts:[]}));(0,n.useEffect)(()=>{const e=t.addEventCallback(e=>{a({payload:{instance:t,logger:o,message:e},type:yr})});return o.verbose(`MsalProvider - Registered event callback with id: ${e}`),t.initialize().then(()=>{t.handleRedirectPromise().catch(()=>{}).finally(()=>{a({payload:{instance:t,logger:o},type:mr})})}).catch(()=>{}),()=>{e&&(o.verbose(`MsalProvider - Removing event callback ${e}`),t.removeEventCallback(e))}},[t,o]);const s={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:o};return n.createElement(Ht.Provider,{value:s},r)}const wr=()=>(0,n.useContext)(Ht);function kr(e){const{accounts:t,inProgress:r}=wr(),o=(0,n.useMemo)(()=>r!==vt&&function(e,t){return t&&(t.username||t.homeAccountId||t.localAccountId)?!!function(e,t){return e.length>0&&(t.homeAccountId||t.localAccountId||t.username)&&e.filter(e=>(!t.username||t.username.toLowerCase()===e.username.toLowerCase())&&(!t.homeAccountId||t.homeAccountId.toLowerCase()===e.homeAccountId.toLowerCase())&&(!t.localAccountId||t.localAccountId.toLowerCase()===e.localAccountId.toLowerCase()))[0]||null}(e,t):e.length>0}(t,e),[t,r,e]);return o}const Cr={scopes:["User.Read","Sites.ReadWrite.All"]},Ir="e1e2139a-92c5-4119-b205-873bc5ebc9c1,ab64cec6-6c9e-44c2-bf5a-503f7f0ce6f4",Ar="b!mhPi4cWSGUGyBYc7xevJwcbOZKuebMJEv1pQP38M5vSVB9dbz2pZTbiXu-pO9yIL",xr="incomingInvoices",Sr="approvedInvoices",Tr="publishedDocuments",Er="sentDocuments",Pr={[xr]:{id:"01AJ4QDMIA3UEMOMDQBNFIFZBQX34SSP76",title:"To Be Approved",path:"incomingInvoices"},[Sr]:{id:"01AJ4QDMPGS2XBZW7VSBEIMU3OZCYRPGMG",title:"Approved Invoices",path:"approvedInvoices"},[Tr]:{id:"01AJ4QDMODNOIT64NWNBEJIS47WI6WFHFU",title:"Raised in QuickBooks",path:"publishedDocuments"},[Er]:{id:"01AJ4QDMIKKKEGFE6KMVDLCHQO3WKJF7DC",title:"Sent Invoices",path:"sentDocuments"}},Rr="no_tokens_found",_r="native_account_unavailable",Nr="refresh_token_expired",Mr="ux_not_allowed",Or="bad_token",Lr=["interaction_required","consent_required","login_required",Or,Mr],qr=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],jr={[Rr]:"No refresh token found in the cache. Please sign-in.",[_r]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Nr]:"Refresh token has expired.",[Or]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[Mr]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class Dr extends ve{constructor(e,t,r,n,o,a,s,c){super(e,t,r),Object.setPrototypeOf(this,Dr.prototype),this.timestamp=n||i.EMPTY_STRING,this.traceId=o||i.EMPTY_STRING,this.correlationId=a||i.EMPTY_STRING,this.claims=s||i.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function Fr(e,t,r){const n=!!e&&Lr.indexOf(e)>-1,o=!!r&&qr.indexOf(r)>-1,i=!!t&&Lr.some(e=>t.indexOf(e)>-1);return n||i||o}function Hr(e){return new Dr(e,jr[e])}const Ur=async(e,t)=>{if(!e||!t||0===t.length)throw new Error("MSAL instance or accounts not available.");const r={...Cr,account:t[0]};try{return(await e.acquireTokenSilent(r)).accessToken}catch(n){if(n instanceof Dr){return(await e.acquireTokenPopup(r)).accessToken}throw n}},zr={[xr]:[],[Sr]:[],[Tr]:[],[Er]:[]},Br=(e,t)=>{const[r,o]=(0,n.useState)(zr),[i,a]=(0,n.useState)(!1),[s,c]=(0,n.useState)(null);return{folders:r,isLoading:i,error:s,fetchSharePointData:(0,n.useCallback)(async()=>{a(!0),c(null);try{const r=await Ur(e,t),n=Object.entries(Pr).map(async e=>{let[t,n]=e;const o=await(async(e,t)=>{const r=`https://graph.microsoft.com/v1.0/sites/${Ir}/drives/${Ar}/items/${t}/children`,n=await fetch(r,{headers:{Authorization:`Bearer ${e}`}});if(!n.ok)throw new Error(`Failed to fetch files from folder ${t}`);return(await n.json()).value.filter(e=>e.file).map(e=>({id:e.id,name:e.name,webUrl:e.webUrl,downloadUrl:e["@microsoft.graph.downloadUrl"],createdDateTime:e.createdDateTime,type:e.name.toLowerCase().endsWith(".xlsx")?"xlsx":"pdf"}))})(r,n.id);return{[n.path]:o}}),i=(await Promise.all(n)).reduce((e,t)=>({...e,...t}),{});o(i)}catch(r){console.error("Failed to fetch SharePoint data:",r),c("Could not load files from SharePoint. Please refresh.")}finally{a(!1)}},[e,t]),moveSharePointFile:(0,n.useCallback)(async(r,n,o)=>{a(!0);try{const n=await Ur(e,t);await(async(e,t,r)=>{const n=`https://graph.microsoft.com/v1.0/sites/${Ir}/drives/${Ar}/items/${t}`,o={parentReference:{id:r}};if(!(await fetch(n,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(o)})).ok)throw new Error("Failed to move file.")})(n,r,o)}catch(i){throw console.error("Failed to move file:",i),new Error("Failed to move the file.")}finally{a(!1)}},[e,t]),downloadFileFromSharePoint:(0,n.useCallback)(async r=>{a(!0);try{const n=await Ur(e,t);return await(async(e,t)=>{if(!t.downloadUrl)throw new Error("File has no download URL.");const r=await fetch(t.downloadUrl,{headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error("Failed to download file content.");if("pdf"===t.type){const e=await r.blob();return URL.createObjectURL(e)}return await r.text()})(n,r)}catch(n){throw console.error("Failed to download file content:",n),new Error("Could not download file content.")}finally{a(!1)}},[e,t])}},Kr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>Boolean(e)&&r.indexOf(e)===t).join(" ")};var Gr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Vr=(0,n.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:s="",children:c,iconNode:l,...u}=e;return(0,n.createElement)("svg",{ref:t,...Gr,width:o,height:o,stroke:r,strokeWidth:a?24*Number(i)/Number(o):i,className:Kr("lucide",s),...u},[...l.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),Wr=(e,t)=>{const r=(0,n.forwardRef)((r,o)=>{let{className:i,...a}=r;return(0,n.createElement)(Vr,{ref:o,iconNode:t,className:Kr(`lucide-${s=e,s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,i),...a});var s});return r.displayName=`${e}`,r},Qr=Wr("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);var Yr=r(579);const Jr=e=>{let{onLogin:t}=e;return(0,Yr.jsxs)("div",{className:"relative flex flex-col items-center justify-center min-h-screen p-4  bg-gradient-to-br from-light-bg-canvas to-blue-50  dark:from-dark-bg-canvas-start dark:via-dark-bg-canvas-via dark:to-dark-bg-canvas-end",children:[(0,Yr.jsx)("img",{className:"absolute top-[10%] left-1/2 -translate-x-1/2 translate-x-[-95px] w-auto h-auto max-w-full max-h-full object-contain  scale-125 opacity-100 pointer-events-none z-0 block dark:hidden",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATgAAACuCAYAAACiNxGAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF6mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4wLWMwMDAgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgTWFjaW50b3NoIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0wOS0xN1QxNjo0MTo1NyswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMDktMTdUMTY6NTE6MjcrMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjEtMDktMTdUMTY6NTE6MjcrMDE6MDAiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NzgyMDc3NjUtOTM3Ny00Y2Q2LWI1YmEtNzFiYjg5MTc3YjA0IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjBDQ0M2MTIxMzA3MDExRUE5OEUyRUZBQ0YyNzFCRjg4IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MENDQzYxMjEzMDcwMTFFQTk4RTJFRkFDRjI3MUJGODgiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNjE2OTE3OTMwNkIxMUVBOThFMkVGQUNGMjcxQkY4OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNjE2OTE3QTMwNkIxMUVBOThFMkVGQUNGMjcxQkY4OCIvPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3ODIwNzc2NS05Mzc3LTRjZDYtYjViYS03MWJiODkxNzdiMDQiIHN0RXZ0OndoZW49IjIwMjEtMDktMTdUMTY6NTE6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi41IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pglqi6kAABXzSURBVHic7Z19cGdXWce/2W7bbR2gaZEi0IXu8qxiZRCyAiLKtGSVAVqmhUSFlr4tSWtRpjg2wXHojkMlKSCoYEmclm2xFhJKUUdBsioM7mhnNsgMiIOPm3GsgK+bFnkRWhr/OOcmNze/+3buuW/n9/3MZHaT3z0v95x7v79znnPO84xsbGyAEEJCZFfbFSCEkLqgwBFCgoUCRwgJFgocISRYKHCEkGChwBFCgoUCRwgJFgocISRYKHCEkGChwBFCgoUCRwgJFgocISRYKHCEkGChwBFCgoUCRwgJFgocISRYKHCEkGChwBFCgoUCRwgJFgocISRYKHCEkGChwBFCgoUCRwgJFgocISRYKHCEkGChwBFCgoUCRwgJFgocISRYKHCEkGChwBFCgoUCRwgJlt1lExw4cOAIgFv9V8Ub3wPwFFV9pI3CReQ5AL5cIslNqvr7ddWnDCJyBG59e1hV7/RcndoQkV0AjgN4cdm0qjqysbHhv1KkFkIcwa20JW6W60teP1VLLZrld0Rkf9uVKMEvw0HcSP8IUeAeaKtgETkdwBtLJnueiLykjvo0yA8A+LCInNZ2RfIQkWcBuK3tepBmCE3gHgfwxy2WfxmAH3RIF8Io7icBzLZdiQIswggyGQJCE7jPqOp/t1j+dY7pJkXkXK81aYcjIjLWdiXSEJFrABxqux6kOUITuE+0VbCIPAPAKxyTn4XyU9sushvAvSJyVtsVSSIiTwXwnrbrQZolNIG7v8Wyr0W19gxhmgoAPwzg9rYrMYDfAxDCKJmUICSBe1BVv9ZGwXbbwbUVs3mOiLzMR306wJtF5OfarkSEiFwO4HVt14M0T0gC1+bo7WIAF3rIZ9pDHl3hLhE5r+1KiMg5ADqxz5A0T0gC9/EWyy679y2N14rIkz3l1TZPA/DBtisBY3d7atuVIO0QisB9UVVPtlGwXf28wlN2Z6D6VLdLvE5ErmqrcBF5OdxXtkkAhCJwH2ux7DcAONNjftMiMuIxv7Z5v4g8s+lCReRsAH/QdLmkW5Q+i1qR0Zry/VZN+RbB1/Q0Yj+ASwD8ped82+KJAO4RkYtV9fEGy30H/NhFSY9pVOBU9eEmy6sbu6n1eTVk/UsIR+AA4GcA/CqAdzVRmIi8EMBbmiiLdJtQpqhtcbimfC+zG1ND4h0iUseXwTbseeC7wGebgA+BM9bG8/qast+N8IzjZ8AcyPdprxzErwO4qOYySE+gwLnzWhj7Ul1M2w3EIfFcAL9VV+YichGMwBECgAJXhbqmpxF74X62tcvcLCIX+87UfhncCTNSJAQABc4JEREYw3ndhHI+Nc4IgLvtCQOf/AqAF3nOk/QcCpwbLvax7zikuVRELnBI13UuAPABX5mJyIUw20II2QYFriQishvANQ5J73JIswv+99l1hdeLyM9XzcRuil4AnViSAVDgyvNKlD/b+BiA9zqWd9iKaojcISJPr5jH1aATS5ICBa48LiOq4/as7Bcc0j4dwKsd0vWBUQBHXY+m2b2Cv+23SiQkKHAlsC/UqxyS/rn995OORYe42BAxDhPlyoX3o77jfyQAKHDluAaAS+So+xP/luUV1pDeZf60QtrbReRHyyQQkStg9iK68GnHdKRnUOAKYqdRLtPTB2OunD4P4CGHPEYAvMkhXZPMAnjUMe2ZAP7QHrPKpaITy4fQrnNU0iAUuOL8NIBnO6Rbjv6jqhtwf7muKyoALfE1AO+rkP75AH6z4LXvAXC+Yzmz8OveinQYClxxXE4ubCAmcBZXz8PnA7jcMW1T3ArgnyukvyUvLoWIXAL3c7qfA3AfuKVkaKDAFUBEngS3oCWfU9V/TfztOICvO1al0zEbVPU7AK4C8H3HLHbB+I47Z9CHIrIHJnCzC98DcKMdRe9xzIP0jEb3V4nIRk1Z36yq76spbwD4RZjYpWW5O/kHVX1cRJZhjhaV5RIRebaqVhkl1cUuAFDVvxORtwO4zTGfvTBT0EH2zltgHIK68E5V/QfHtKSncARXDJfp6bexc3oacV+FutxYIW2dxD2rzAP4bIW8rhORbZt3RWQvjP3MhS8DeGeF+pCeQoHLwTppHHNIer+q/m/KZw8CWHOs0tUN+FSrhKp+H8CVAB6ukM0ddkoacRvcRtEbAA6r6ncr1IX0FApcPq5nQXdMTyOsHegjjvmeB/f9X42hqv8G4IYKWeyHmZJCRJ4PE9zHhd9V1b+tUA/SYyhwGdiR0pUOSR8C8Nc514Q4Td2Gqn4UwIcrZPE2u8H5Vpi9gGX5FwC/UaF80nMocNlcAbejQPfkRZBS1S8B+JJTrYCXlt353yJvhhEaF/bAhIR8jWP6KVX9pmNaEgAUuGxcvfamTk8T/JFj/kDHt4xEqOo3YEbBriEDX+CY7qiqrjimJYFAgUvBTo1cXGsfV1UteO1HHfKPuNoGvuk8qnocwFyDRf4HgJsbLI90FApcOtfBze5TdPQGVV2DWVF14UkAJh3TtsERACcaKuvG0GLwEjcocAMQkdPg5rX3/wAslUxzr0M5EVVWKRtFVR+FWQn9ds1FfUxVH6i5DNITKHCD+VkAz3BI94CqPlIyzTLc7VMvEpEfd0zbOKr6TwDeWmMRp+DuW44ECAVuMK6LC0fLJlDVf0f+lpIseuUMU1UXUM13XBZvte1JCICGz6KqqpNr6iYRkacAuNQh6VcBHHMs9j4AL3dMe6WIzGScmugi1wP4ItxdHg3iL1S1sP2TDAehBjOpwlUAXPyunQtgzYRMLU2VYMVPgHEG4Oplo3FU9b9E5FpsuXKvyjfRs5EsaQYK3E5cp6dnAXimz4qUYBo9EjgAUNVPisgHANzkIbvZAW6pCKENLo6IvATAj7RdDwdeICIvbLsSDvwagH+smMffALjDQ11IgFDgttPnIMu9ONkQxzrIfAOMM0oXvgvjKcR1FZoEDgXOIiJPAFA50nqL/IKIPDH/sm6hqn8P4O2OyY+o6ld81oeEBQVui0n021f/2TBR3vvIu1DeQebnAby7hrqQgKDAbeG6uNAlermSaKeYVwEoukn6MQDXq+pj9dWKhAAFDoCIXATgxW3XwwM/JiI/1XYlXFDVh1D86NntqvqFGqtDAoECZ3ANQ9dFenM+NYmqfgT5Z3O/guLxU8mQM/T74ETkDABvbLseHpkQkbeo6qm2K+LITTBORtPsoW9jfAVSlKEXOACXAXhy25XwyJkwiw3vbbsiLlhnBa9qux4kDDhFDWNxIckNItL5c7+E1M1Qj+BE5AIY10guvFpV/8xnfeKIyC0w8UVdOADgZQA+461ChPSQYR/BXQs3r71fB/Apz3VJchTAoxXS93axgRBfDK3AicguuK+e3mODG9eGqv4ngE9UyOIK6/qJkKFlaAUOwCVw9/5xl8+KZLBQIe3pcHO7TkgwNGqDE5FzGirqERs9PgvXxYXj1vV2E/wVgJMwUd5duEFE3s3D6GRYaXqRYb2hckYBPJz2oYicB+Byx7ybGr1BVTdEZBHuiw0XAhgH8Gl/tSKkPwzrFPVKuHnR/RZMkJgmOYpqiw29c6NEiC+GVeBc/b4tNR37wMNiw2tE5GmeqkNIrxg6gRORnwDwXMfkH/JZlxJUWWw4Df125EmIM0MncHBfXFAY99htEC02uHLYboshZKgYqodeRM6GiUDlwocKrMzWgi23SlCZveD5TjKEDJXAAZiACbNXlscB3OO5LmU5imqLDb10hklIFYZN4Fynp59S1a96rUlJ7GLDxytk8UoR2eurPoT0gaEROBE5AOCljsnbWlxI8sEKaXcBeJOvihDSB4ZG4OC+kvg/AP7EZ0Uq8FkAVU5RXC8iQ+1BhgwXQyFwInI63CNO3auqrnE7veJhseGHAFzqqTqEdJ6hEDiYFcTzHdPe6bMiHrgb7oGSAeBGXxUhpOuMbGyU2/kwMtI/R7EisgfAHpe0qvqw39pUxwapPs0x+YZ1Cz4oX+d2AvCNvhzqr/o8lH1nSHsMhcAR4hMKXH8YlikqIWQIocARQoKFAkcICRYKHCEkWChwhJBgocARQoKFAkcICRYKHCEkWEofvBaRgbscVbXWHcAiMgoTIWos9jMau2QdwCqANfvvsqo6R/FKu08As6rqGuUqM++sNsyoTxqrMG2yZn+OqepqyTxKMex9RLpH6ZMMBw4caLTjRWQcxlGli8PGZQCLqnrModyshjlYRSwaErhBrGGrTdY85Adg+PqIJxn6Q2enqCIyKiJLAFbg7o12AsCKiKyIyD5/tcOSHa30jX0AZgCcFJGFqvfAPiJdp5MCZ0cEJ2Eefh+MAzghIr7cdu9DtUhXXWAKRuic2ph9RPpA5wTOPuAr2G678cEogAWPL9CEiMx4yqstRmFGOqXahH1E+kKnBM6OJvK+dRcBTALYr6oj0Q+AgzBR3PNsOT5foDkRGfOUlxPxNoi1xbkADsG0xzKMcT+Lwm3CPiJ9ojOLDNb+cgLpo4JlmNWxXOO4nT7NwazipZFphC5h1F+zeRVeDfS5yFCk3a0tagrG/pY16sprE/YRFxl6RZdGcAtIf3FmVXWy6MqfXZE7hGz33nMl65dG5209qrput00cgtmekUbefbCPSK/ohMDZac94ysdOe5rsS501HRq3owgf9MLWY0dDWSI3ljY1ZB+RPtIJgUP6FoPVqhs2YWxBaVMTFztPmjjM9MHWY6dp0xmXpLUJ+4j0jtYFzj5wqSODqvnbFzrtBZxw2CuVJg7RCmDn917ZkVxa244l96Oxj0hfaV3gkP7irLrsbk8hy85Tah9XnjjAn92obpYzPku2CfuI9JIuC1zWC1gKO0JIexFL7563U7K0/KY8bnGoDbsYULRN2Eekl3RZ4HwfDE972F1tMtNItxv1Ze9VVYFjH5FO06rA5dhCvB0Gt6Q96E7nH+0IqO+2nrQ23nzx2Uekz7Q9gkv9BvXp7cKSlp/zAW9VXUa6cbwPtp40QYm/9Owj0lvaFrjeo6qzSJ+q0dbTAdhHwwsFzg9Z+7jmPLsBIm6wj4aQtgUu9WxgDbaRtAe48jSrgK1nqWoZNZHWJvHRDvuI9JZWBS7H46rvFa60l9GLHSnP1iMiXbT1pAnKpqixj0ifaXsEBxRYyfNEE1sd5jPym3F1LlkjaW2S3K7BPiK9pAsCl7b3yduDFguGMghvL0/snGfatK4z2xKszSlNoJJtwj4ivaTLAjfm0ZNE2irZup22eCPnmNAourMtIc2zxvqA41fsI9JLWhc4+/CmfZtWdm9jv43T8vH64kSo6iLSz1ZOId/Dbq1YUUoTlB02KvYR6SutC5wlzfA77sGHV5aTxqpufrLI2nvV2hTIikma88d1pL/07CPSO7oicIvI3qPktBFTRBaQbifyGhs0SQFbT+PYs5cnkL56Op/h1pt9RHpHJwSugBPGBRGZK2r8FZF9IpIVq3MNHvyY5ZFj62kMG790BtnidizLcSX7iPSRTggckLtHCdgKWDw3yLBtX+IJOyI4ifQVuXUAk2UCkFQhx9ZTGyIyLiJTtj1OIdtwvgqz0z8T9hHpG96iapUk1Ye/ffjrOhu4DuBQzubVqB7eoofZUU3W6Ck37xIRpMqyCtMmZSJODXUfMapWf+jMCC7CBiGpw7C8hoIvjm+seOSOkFpgGSXFDWAfkf7QOYEDNr0/HII/f2OLyImxWTcds/VEQuI8DWQfkT7QSYEDTNxMVd0PY9h2fegXYaKrTzdlz8nCTstr2ddVkGUY29Z+H7EU2Eek6+xuuwJ5RAbgWGSnMZg9SkkD9TrMS7YKM6pY7sILM4BpmHuo0z1P1BabbeIxOMwO2Eekq5Q2mI6MlLbfEhIUXGToD52dohJCSFUocISQYKHAEUKChQJHCAkWChwhJFgocISQYKHAEUKChQJHCAkWChwhJFicj2pZB4oT2IrMtApgWlVXrRubNXtOMZ5mx9+t08MxmPOI67G/n8TWUZl1mMAn06q6bkO7pQXqXcbgYzb7VXUt4WJn3V4/a/M9WTBddL/LMF5ntx03sm2T5n9t3h5UH3jv1jPuAswxpk3vFiJyInbtwAPuaW2ZqNfAPivyeeyaKZh2WrNtMB+rf27fx9p5MhlQJroO5oyqUxvavxcpYxYZz5GqTlo3Skswx86i4NG1HXsjfnEawdmHag7mvOGy/RlFyTiZNnTduE2b6rYa5sGKi1r0AsTdaC/GfpD423xCFKLYA2swL2vyRcpLtwzz8swBWBngxXY1UZf12O/LWfduz3UeAzARxei0AYnHYIQ4Tdwy2zKvz4r0aeya6H7WYZxcDmqDIixlROVybsMSZRR5jiJxiwLv+I4FS2qk9AjOfoOPIzHCsJ+VfcjjD+UMBnhVtb7HICKnbLmRW5vo7+MARqPr7N+2pR3AeizfDSQOhRdJZ9Mu2XuYQczNjj3YfsxeM5VMZ8m692kYj7dz9l5mYA7MZ/lgS80vr8+K9GnsmsVEG0TOL7e1QQmWRORgUrg9tGGRMjKfI0v0zNFXXA9xGcFFnlx3PMyJadGoiCzEf1LyiqY5+9K+aa2XilGUdMkTK3vgVCcWxXw18ffMdDGiNnAJgJx67/ZFnIUZJUaj1rwXLKst8/qsSJ9G1yRFNvrdpQ3mYfrVdQRY5PmpWkYksit2xEh6hIvA7QM2X8IsRmEewPjPJvZh3Adrx7J/3uEG246wTqBg3IAEUbnJl2+fzXcJ1rZXMN02Ym1Q6sEveO/bptpZ7V0gv7w+K9KnA69xbQObdhZb0/00W9hAij4/VcqwTMI8e+MATtgvW9ITXARuDdgcVWVep6oj8Z/E59HDOBb7/8SAb9lohDCKkuHdYmXvT3wUj/85mjTIZ6TbRqwNynq1LXLv0Yh33X6WJSB5+eX1WZE+ja7ZVo/Y706efe3U7xhMfNUyAlT0+alSBlR1XVUPwjwvWTFlSQdxEbhoRWrb9K3M8N9eG42OxrF9pLTtW9h+A89jy6jvg8ieswxgTNwDF0f1KRyRqci9W5vThK3fNDJerIJtmddnRfo0uibZVtHvURuswYyQ44sTeV8Ek9haSMqlzPPjWkairLhdliO4HuEicPMwD8q4iJwSkSX7rXgyZtPKI3oIp2Oju/2JzzaxIrcGYKrMFCFhAxw0AoqC/s7EP89IF9kVl2KLHpnxRAeQee+2vDnYLQl2i0M0+hj08hZpy7w+K9Kn87YeUyJywrbDCVtGvA0ioVuJ5bMSy2MHdgR9CMVH6KWeH8cyInE7ae1v0T3QnXmPKC1w9kE5CPOwrmNr39Qyii8CTGFrD1qU7xrMC5RmLI6+QcuM4uL2vx0CZ+9lFmaENFcgXWRX3NwTpaqHStQnyjv13mFWT0dt3tHLGAnxoMDKuW2Z12dF+lS3ok5FRvsp++9svA2s0EVfSBO2raLQhKn7x2ydJ1FMgFyen7JlRCzCtEW0VSQr+DXpGIzxSAgJFh7VIoQECwWOEBIsFDhCSLBQ4AghwUKBI4QECwWOEBIsFDhCSLBQ4AghwfL/F3qwMWcb+I8AAAAASUVORK5CYII=",alt:"Company Logo Background Light"}),(0,Yr.jsx)("img",{className:"absolute top-[10%] left-1/2 -translate-x-1/2 translate-x-[-95px] w-auto h-auto max-w-full max-h-full object-contain  scale-125 opacity-100 pointer-events-none z-0 hidden dark:block",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATgAAACuCAYAAACiNxGAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDcuMC1jMDAwIDc5LmRhYmFjYmIsIDIwMjEvMDQvMTQtMDA6Mzk6NDQgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjJDRDE2NEY0MEZGNDExRUM4NzA4RDkyM0UwNzkxRkM1IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjJDRDE2NEYzMEZGNDExRUM4NzA4RDkyM0UwNzkxRkM1IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgTWFjaW50b3NoIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MENDQzYxMjgzMDcwMTFFQTk4RTJFRkFDRjI3MUJGODgiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MENDQzYxMjkzMDcwMTFFQTk4RTJFRkFDRjI3MUJGODgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7VDEGEAAAUSUlEQVR42uydC2wlVRnHp7iICioXAwqixC6iRkGlmiigIJYEdVVEiuIiVHZp1xeKr7soCL6wayAKRpMWkGWBIF1AfKCSVkENGE2bKBpjNK34xKhpRcS3XL/PnuuOw52ZM+fM3DuP3y85ubC9c+Y8vvO/33kPdTqdAACgjuxGEQAAAgcAgMABACBwAAAIHAAAAgcAgMABAAIHAIDAAQAgcAAACBwAAAIHAIDAAQACBwCAwAEAIHAAAAgcAAACBwCAwAEAAgcAgMABACBwAAAIHABAUayz+dLQ0FDQ6XT2rlC+7pM0/5vqhUHCncODZ8imEozAVaW2/iFhP0nzvQM27o/Kx9YMj3xe0nxCSRuqa91fIXnaXFFxOko+vqnm7/D4iyTftyNwdFGL4LYSiJt6xuMZH9sgzx1Ys7rYJHl6eQXFbQ/5uNxR3ACBK5QbS5CGl0p4XMZnHiJhcw3r4woRjH0rlubzJDwFeUDgysYD2tUrQTpchWqT8f7qxL7GG6qK93aYfLSRBgSujNwh3dPfDbiB7G88OBe0i7qhhnb2CimXMyogbupFXxFYTr4BAtdvbihBGsZNd9OViZra2iUiIE8qeRrfJuE5yAICV1ZuHrAHoIPSmzyjOV7iGa6hre0lYYfxksrovan4fhhJQODKyoJ0T38x4DQcLWG9Zxwqkptram+69OJdJRQ3LfPLJDwcSUDgykoZZk835RWPNLqH1tTmPih5e1bJ0qTDCi9GDhA4uqfxXoDu9Dgpp+j2k3BCTW1Ohftqs9asDN6bLue5GClA4MrMj6R7+uMBp2GjhIflGN9kje3uGRI+UpK0XCqhhRQgcGXmphp1T7scK95FnRebvkPyd8yAvbdXyscYMlBf+rXe5+cS7i4w/tkBN5TD5ePZBUStS0beWVPb04H9q6TsDhXv+08DqLNHy8enkQAELg+2ixFfUONy3FRQvOPSEN8nZfe3mpbbEyV8UsLpA3j3xyQcgATQRYVkT0CXFmwsKPp9GtCFOk3K8MQ+19nRQX0XVAMClys6c/roAuOfbEAZzpjZzH6Im04EXYbZInAw2O5plyN1nKrmZfiYYO3UkX4cT3S+hCdjtggcpHsDBwdruxeKpgndqZcWnU+pL50IejeWi8CBHf06IeN0aZx7NqA8L5Z8FuJdmWOo9Nimh2C2CBzYNZjxPr3ukRJe24BiVREvakP+OyQcjuUicGDHSyTs7/Cc65qvNzakXJ8n4ZwChhIuwGQROLDH9cQP18WlI9JQRxpStufnlVdOCkHgIHuj0SUNL3N4VC/DmfF49WRDili7/9eYJR2+6Cz3MVgtAgf2jAdug9XzQ0NDP5NP14MBNkqjf1RDyvipErZ5/hDpEMJFmCsCB9m6PK5r375kPm9xfP4REk5tUHGfJeU96vH8p4JiF2EDAlc7XijhYIfn/inhC+a/fc6u21Kx8vqZ5/PbzVl7WX+IdPvXqxzfqXt//4CpI3BNxHVy4Vbpnq6Y/75Twj2O8RwqjfeICpXXlIT7PZ5/fJBxYsYI4qc83nkVAofANbF7qg3n1Y6PX9/9DxE6vb/V54j1Kk026DWOH/OM4xQp+yzrAPWEXte9req9XRisXZIDCFyjeF3gttzgbz26pT7d1NdIg9+nImW2e7A2WeB74vKnJc8HWvwIHRP47TDZZi4veiTmjsA1DdfJhS9Ko/lz5N9ul/B7x/j0PoPTKlJme0re/27K7gGPePRYcT0gc7cEcfM9KeTuYNfM7aMw9+rTrwMvxws+nvrt0oi+V3D3VDdqu2712R79B0nvvyVOvajadYfCG+X5SySeThUMTdJ5p6RX72E4zyOaYyWcJeETMX9/b+A2AdRli6Tzr90kIw8InC0HmVAUe/chD67e228l3Brzt2s9BO6QYO0kk9srZG8flKDLPp7vEceFIpS3iBD9NPIDpBc3v8cj3mskzluRBLqojcN0fVzXn+1Qby3mbzqb+nOPpFVqf6qUw79MOd7nEY2Ogc70ODvuYtN1d0FnTM/G0hG4puJzau+VCQ1eu5ef9UjXq6Sh71cxkVuWj7d4RqPDHa8L/QAdGbiveVPOlnSxLASBayyu3dPvWNzXeq1HunSG8oyqFaaUyY7A/ya0i0Lb1nyWoXxV0nMNJo7ANbV7enDgvll7u0Vj/4F8/NAjiRNJM4slRrvXv/F4Xte5XSB5P14+XRc+68z2JFaOwDUZVw9J175dZ/ldHy9OB9dHq1aoZleH73WBOqN6icfz55g1b4DANdJ70xNDxh0f/5w0nnstv3udZ1LfVMXylfKZD+KXfNig9XOI47N3BFz8jMA1HL0IZX/HZ7dnaOg6k3qnRzo3iBhX9RLjczy76C78Q8Jms2UOELjG4jq58EsJ8xmf8emmqidzZkW9OO3Kn2pEp198yGLyBxC4WndPXU/tVXY4eAc7JfzLI8mbC7qspR8i9335OLdPr7sr8DxIExC4OqAD4K47Pa5yaOS/d/D6whzoIchlQBfq3l7wO3TB9SYp639i3ghck703n1N774huI+pTN1XZUtUyNx6vHiBwb4Gv+bi8ZwELR+Dy5gNDxZL3L/8LJLheQPwZj/fqEUp/9Xj+eBHng6pqjFKPOnZZ1PazJQnn0+SbxTqKoCebPZ79sIjM+wdUJ+p56sLV91ZY5K6T8ntFkP9F12dK3H/BtBG4pndPdc/pSR5R7D/gLJwheTi/4uNM6sXp/tIn5BTf5VIet2HddFHB/dTesvBYCSdUuQJEjP4YrI3H5XHWnW4HezdmjcCBf/e0LGypegbMuOrFOUT1ZiOYgMA1vnv6rMD91N4ycazk5ck1yIeujbvL4/kbRNxuxrIROFhjU43yUgcvTu9y2Cjh7w6P62b+t2LSCBwE3qf2lpHTJU97VD0TInK6T3Wrw6PvlGd/i2UjcLCG3ne6d43y8xgJYzXJix6J9LUM358TcduOSQMCV8/uaZdaHOZojnbXrXOrFl+/X8IE5gwI3K7u6Xr5eFENs3aU5O3pNRG5X1sK9rny3buxalBY6LvGGTXOm0421GKwXYRrpwj2h+Q/D4v5ih5YcCnmDAjcLu9Njxh6Q42z+HrJY7su25QkH++n2QICZ89LAvftVXphzE19SKPOIrrOiOrWs1MkXEFVAwLXPHwmFy4yV+AV7WUeYkTKlUkEDppIoycZzKm9Gxwf1yvnbuxTUi/3fP65ktfDMXdA4JrFaR5e7E7x3u7vUzr1JIwlzzi2YO6AwDXHe/M5tVfZ0a+0mnVgn/GM5pTQTfAACFzNOSpwv1Pzbgnf6HN6rwzW7hRwZa+gXlvRAFLp1yTDuHgPx/QxXxvE6/lzynd8jkW6ynhVfUPed4+U4ZflP1/uEY2u8OeyY0DgcuYgE0qRL9NV89mnuWNA9XWZp8A9U/J+hIjlnZg+0EWtLz6n9n5LBGJ5QOn+ioR7PONgnyYgcDXHp3u6fVCJFmHVi6Gv9IzmZPHi9sH0AYGrIdK4nykfI46P65V+OwecBd8Fu+q5nobpAwKH9xblJvGi7htk4k33+Ou+3VSzTAYAgauR96an9m6sYvc0Zy/uaRKOxvwBgasXJ0poOT77qxw8p7zQLWKrnnEw2QAIXM3w2blwtXQPHyhDJsxlLFd7RnOSeLT70QQAgatH93RYPo6tQfe0i+8G/N0ljNMEAIGrBz6n9n5bvKaflCkzkh49i+67ntFMivBzbD0gcBX33nxP7d1R0qxd5vm8erWjNANA4KrN8RIOcHxWx7s+W9J8XR+s3SLlA8coQW0ZEu/GpjtESQFk7zlQCHhwAAAIHAAAAgcAgMABAAIHAIDAAQAgcAAACBwAAAIHABDF+latTqejexbnev1tqA9bHcxpIJoGPW582HyGz3ZbNmHRhHlJ1qrnO2PzLGyV+LflkK+45e7HSfzzDumKQ8tkNVROWj6L/TAy6g4GhtZRWugaTCeGgtOn753tuDFrDN3n3UmM5tFIssZtkS5bliRMGQGi7nKuO5u2RSg27FZi4R2RMGd+hV3vMNXn5jQeja+AZGojbFX4902FrS1BhW46L6Gj7oAxuOQGoo1uIcjvKB+NZ8HEmyfaQKZrYgsTeZQRdQcIXHIDUaObKij6KRN/nowV0PgGRcunjKg7KBvrypQYY8Bpl6HoYPTOYNfAdJcRE9K6RHplnk6MTObc+Po2aJ/CcTHC1R3cHw3SL97JXEbUHZSSskwy6C9pyqDwgs3AsI6rWMSlTFjENZpxwL7lkO9cJxks3zlqxrbSaFN37nXHIP/gQykETge3JawkGMy0Q5wjxnDjWEkbVHeYrZytgsCF4plIKfdO2gA/dYfAMYuaznRCt2nGpUtiuhzPiXSFot22vMdfKjWmI2U0Y7q0SWvOpqg7qCoDFzjzaxfnrcz7jLeYxaInp4zp5L0GrF3QsoaiRG4xpYxG47xJ6g4QOItfzoS/TebUgGeSGopj1FsTvIvpKq2xMqvuZxzqiLoDBC5pUDnBSLV7s5zTq7Y5CmxS49M442beRoLilksURaYyou4AgUsnaWZtZ44eynJCfMMeXZ3JlC7URFUMIaWMWj26btQdIHApxI13rBawWXnRUWjTulBbE74yVbExnSxlRN0BAucocIt9brzOYy6muzOfEG+VtgMtUneVrTsoocANl6SR+M7G6Wxf3FILXdNViTGdFM9rhLoDBC4fgVstoPGuFtVILJY06PKDsYrbSou6AwSuoRjvJ2lMZ7pT0LlrQN0BAtePhpI2pjNLKVF30ByBW7XsDnmTsngzz3GjyaCiYzoZy4i6AwQuhaTFlnkz4iC0Lp7AcpC8xqqdx3HZBZGljKg7QOAcPbh+N5LlPF8kDUUXpiatwC/rcdkjOXhw1B0gcCleQKuARZZJ8eV+A5I0lK1J+QvKucZqLCE/89RdqesOSihwSVt6ctsqY2bA4hrvou8VdQkkrbEaK9PyAyNKIxnqiboDBC7ll3I54Zcyz+NwxhxFNo/8JY3plGnQeiqLl0TdsSEfgbNjpkgjMp5JXDyrKe/Po6EkjemUYm2V2VgeN3i+bA7GpO5KWHdQfoHbmdIVaHs0kLTxkm0FdnHCDSVpTKcMXdMkMdpG3QVcSIPAORuQGmnaqQ5thwaiv7B68XDcuNJy0R5AhKQ1VoMSt+4dpnGzgvMJ3ht1BwicpcjNBMnjKVPmFqjRjA03afbt5H54AKE8ph3P009hGzM3zyd5bml7NKk7KD3rcmowWRc/9pr9mgx23d3Zi/+e/y/vWjQNarHHmEj3bs20dUqTg7gHU8XAdAkLO0wxpi6696IOm3JMGz/Sujkug4hQd1BO8rg20IG4S0xa5g7NIpnIIhZ5X5WYIY9O1wbmwIrLOjbqjmsDuTbQbjxOr7GbLyD6rlcyU4I8lnVMR72r9S4eEnUHjMFZGpGE48yYR16GNGMa7nxJ8li2MZ1l0/XzGtui7gCBszckXZ6w3hiTy37D1VDjmOznoLTtmE5Q4ELVDB6bitr6PL0j6g7KwroyJ84YtjaWbWZcSMc29LMVPHhh6rIJiybMl61h9GDS5KfoRaOrpky6n4tFe0TUHZRCQ2zGXMXYKCmAjHjMZ0Ddu6gAAAgcAAACBwAIHAAAAgcAgMABACBwAAAIHAAAAgcACFwGuoclmmN1VszxMWPmbz2Po0n493bc0UA9jvCZ7t5Had4fx1KP57uMJcWb9FzM3xaSTqy1SWdSOejxQN33xJTbdEpdtVOOpxoN1WXP/CTVd+Q9S6EynYreHWpjG9HyTvieV7nm+S5zhNJ0pAy5cass2J4HZ747GzLiWROWug3NQeC6jWI2wQDDDbD7nu4psXOR7811G2iPf58zxhgbb9JzPf62EPn/Vo88pKbTohwWwmeh6XHeoTpopdRtUrxTkTRNm3fN2dZ3j+/Mhd455yFwK9FbuSLfy6Ncc3lXKP8LPdoDYcAhy4GXE6GKjP46D2cVuB4HErYSjOx/jTqDeNo0qAfFm3QoYvRvkQMQp1LEJi49aeUwEha0UEMbS3lfbLyhvy31aNzDGep7IkbM5qJlklHgHvReh3q2si/fd8X82zACVz2BW7I4aTaLYUyHfg07PbpGUTFxFrIs8WYRuEhDWnEUuMRyiHynp3cU877YeEP/NmHh/Y1adMFH40TZUeAWop6XQz1b2Zfvu0LlNN1DRAlVELhw186mEUe6d3MxhrFijGMkOnbSw/An0roaNmmxiTfuOct3tRwELrEcQp7iSlyXKuZ9sfGG0jsc82ym+k6xhZaDwA2H8jvhKHBW9uX7rsi47kr4RwOBqY7ADWcUuMSz8ENGMRX5FRxJiCtunCtNdDoJ3aAHxZuS7lwFzqYcIl1p27G3xHgtBG54kALXo4s54ig6qfbl+66Qxxoek20jcNXroq6kjf1k6BbGzUz1Guyf6jWT6NtFjYvXo4u6lFUMbMohMtGwEOfJZok3FE87xQNMq++FGEH26qL2mAVdyihw1vbl+66YWeuO8YIRmQoJ3FSvgWlTkcMZjHg4FM90KPyfdxJ5ZjpuIN9zkmHadjDcYpKhnUXgMpRDO+xppo2N2cQb6pqv9BKnDPXdTplkaMfNBkd+HBZsxSrHcvV+V3hCoZfnisBUS+BaEQNYCBntXAZRaccM+s7FjYNExqBGXMfgwuMlcfHGPRfzt46NR5XiMcSWQ2RJyLCNx5ihfGcjddldNrNkW9+ReLuCErdMZCImrk7SOsqIqHfyKNcc39WKyfssXdSKCVyoQqOLOmdD90DaCNxSzLT9aJJYhsRpIaPAhWmnxRv3XMJCX6u7Onu8N7Uc4paEhMRpKmH2M7F8Q2KwEFnHNmpb3zHxLMV5s0bkousHRy3HuFYsRcfJvhzf1TKebjjvUyEvkTDgYHUnAwBAFWEvKgAgcAAACBwAAAIHAIDAAQAgcAAACBwAIHAAAFXmPwIMABeZJMdvnGehAAAAAElFTkSuQmCC",alt:"Company Logo Background Dark"}),(0,Yr.jsxs)("div",{className:"bg-light-bg-card p-8 rounded-xl shadow-2xl text-center max-w-md w-full  border-t-4 border-brand-orange-light  dark:bg-dark-bg-card dark:border-brand-orange-dark  dark:shadow-xl z-10",children:[(0,Yr.jsx)("h2",{className:"text-3xl font-bold text-text-primary-light mb-6 dark:text-text-primary-dark",children:"Welcome to Invoice System"}),(0,Yr.jsx)("p",{className:"text-text-secondary-light mb-8 dark:text-text-secondary-dark",children:"Please log in with your Microsoft account to continue."}),(0,Yr.jsxs)("button",{onClick:t,className:"bg-brand-orange-light text-white font-bold py-3 px-6 rounded-lg shadow-lg  hover:bg-brand-orange-dark transition-all duration-300 transform hover:scale-105  flex items-center justify-center mx-auto dark:bg-brand-orange-dark dark:hover:bg-brand-orange-light","aria-label":"Login with Microsoft",children:[(0,Yr.jsx)(Qr,{className:"w-5 h-5 mr-3"}),"Login with Microsoft"]})]})]})},$r=Wr("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Xr=Wr("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),Zr=Wr("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),en=Wr("FileBarChart",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]]),tn=Wr("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),rn=e=>{let{title:t,icon:r,count:n,onClick:o}=e;return(0,Yr.jsxs)("div",{onClick:o,className:"bg-light-bg-card p-6 rounded-2xl shadow-lg hover:shadow-xl flex flex-col items-center justify-center  cursor-pointer transition-transform transform hover:-translate-y-1 hover:scale-105 duration-300  border border-border-subtle-light hover:border-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:hover:border-brand-orange-dark",role:"button",children:[(0,Yr.jsx)("div",{className:"mb-4",children:r}),(0,Yr.jsx)("h3",{className:"text-lg font-semibold text-text-primary-light text-center dark:text-text-primary-dark",children:t}),(0,Yr.jsxs)("p",{className:"text-sm text-text-secondary-light mt-2 dark:text-text-secondary-dark",children:[n," ",1===n?"file":"files"]})]})},nn=e=>{let{userProfile:t,folders:r,setCurrentPage:n}=e;const o=e=>{var t,n;return null!==(t=null===(n=r[e])||void 0===n?void 0:n.length)&&void 0!==t?t:0};return(0,Yr.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,Yr.jsxs)("div",{className:"text-center mb-10",children:[(0,Yr.jsx)($r,{className:"w-12 h-12 text-brand-orange-light dark:text-brand-orange-dark mx-auto mb-4"}),(0,Yr.jsx)("h1",{className:"text-4xl font-bold text-text-primary-light dark:text-text-primary-dark",children:"Dashboard"}),t&&(0,Yr.jsxs)("p",{className:"text-text-secondary-light mt-2 text-lg dark:text-text-secondary-dark",children:["Welcome back, ",(0,Yr.jsx)("span",{className:"font-semibold text-ui-blue-light dark:text-ui-blue-dark",children:t.displayName})]})]}),(0,Yr.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Yr.jsx)(rn,{title:"To be Approved",icon:(0,Yr.jsx)(Xr,{size:40,className:"text-status-attention-light dark:text-status-attention-dark"}),count:o(xr),onClick:()=>n(Pr.incomingInvoices.path)}),(0,Yr.jsx)(rn,{title:"Approved Invoices",icon:(0,Yr.jsx)(Zr,{size:40,className:"text-status-approved-light dark:text-status-approved-dark"}),count:o(Sr),onClick:()=>n(Pr.approvedInvoices.path)}),(0,Yr.jsx)(rn,{title:"Raised in QuickBooks",icon:(0,Yr.jsx)(en,{size:40,className:"text-status-raised-light dark:text-status-raised-dark"}),count:o(Tr),onClick:()=>n(Pr.publishedDocuments.path)}),(0,Yr.jsx)(rn,{title:"Sent Invoices",icon:(0,Yr.jsx)(tn,{size:40,className:"text-status-pending-light dark:text-status-pending-dark"}),count:o(Er),onClick:()=>n(Pr.sentDocuments.path)})]})]})},on=Wr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),an=Wr("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),sn=Wr("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),cn=Wr("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ln=Wr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),un=Wr("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),dn=e=>{let{files:t=[],setCurrentPage:r,onEdit:o,onApprove:i,onView:a}=e;const[s,c]=(0,n.useState)(""),[l,u]=(0,n.useState)("newest"),d=(0,n.useMemo)(()=>{let e=[...t];if(s){const t=s.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.type.toLowerCase().includes(t))}return e.sort((e,t)=>{switch(l){case"oldest":return e.id.localeCompare(t.id);case"name-asc":return e.name.localeCompare(t.name);case"name-desc":return t.name.localeCompare(e.name);default:return t.id.localeCompare(e.id)}}),e},[t,s,l]),h=e=>{let{file:t,onEdit:r,onApprove:n,onView:o}=e;return(0,Yr.jsxs)("div",{className:"bg-light-bg-card bg-opacity-70 backdrop-blur-sm rounded-xl shadow-lg hover:shadow-xl  p-6 flex flex-col items-center text-center transition-transform hover:scale-105 duration-200  h-full justify-between border border-white/30  dark:bg-dark-bg-card dark:bg-opacity-60 dark:border-gray-300/10 dark:text-text-primary-dark",children:[(0,Yr.jsxs)("div",{children:["pdf"===t.type?(0,Yr.jsx)(on,{className:"w-16 h-16 text-brand-orange-light mb-3 dark:text-brand-orange-dark"}):(0,Yr.jsx)(an,{className:"w-16 h-16 text-brand-orange-light mb-3 dark:text-brand-orange-dark"}),(0,Yr.jsx)("h3",{className:"text-lg font-semibold text-text-primary-light mb-2 break-words w-full h-12 overflow-hidden text-ellipsis line-clamp-2 dark:text-text-primary-dark",children:t.name}),(0,Yr.jsxs)("p",{className:"text-sm text-brand-orange-light mb-4 dark:text-brand-orange-dark",children:[t.type.toUpperCase()," File"]})]}),(0,Yr.jsxs)("div",{className:"flex flex-wrap justify-center gap-3 w-full min-h-[48px]",children:["xlsx"===t.type?(0,Yr.jsxs)("button",{onClick:()=>o(t),className:"flex items-center px-4 py-2 bg-brand-orange-light/10 text-brand-orange-light rounded-lg  hover:bg-brand-orange-light/20 transition-colors text-sm font-medium  dark:bg-brand-orange-dark/10 dark:text-brand-orange-dark dark:hover:bg-brand-orange-dark/20","aria-label":`View or edit ${t.name}`,children:[(0,Yr.jsx)(sn,{size:16,className:"mr-1"})," View/Edit"]}):(0,Yr.jsxs)("button",{onClick:()=>o(t),className:"flex items-center px-4 py-2 bg-brand-orange-light/10 text-brand-orange-light rounded-lg  hover:bg-brand-orange-light/20 transition-colors text-sm font-medium  dark:bg-brand-orange-dark/10 dark:text-brand-orange-dark dark:hover:bg-brand-orange-dark/20","aria-label":`View ${t.name}`,children:[(0,Yr.jsx)(cn,{size:16,className:"mr-1"})," View"]}),(0,Yr.jsxs)("button",{onClick:()=>n(t.id),className:"flex items-center px-4 py-2 bg-status-approved-light/10 text-status-approved-light rounded-lg  hover:bg-status-approved-light/20 transition-colors text-sm font-medium  dark:bg-status-approved-dark/10 dark:text-status-approved-dark dark:hover:bg-status-approved-dark/20","aria-label":`Approve ${t.name}`,children:[(0,Yr.jsx)(Zr,{size:16,className:"mr-1"})," Approve"]})]})]})};return(0,Yr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-light-bg-canvas to-blue-50 p-8  dark:from-dark-bg-canvas-start dark:via-dark-bg-canvas-via dark:to-dark-bg-canvas-end",children:[(0,Yr.jsxs)("header",{className:"flex justify-between items-center mb-10 pb-4  border-b border-border-subtle-light dark:border-border-subtle-dark",children:[(0,Yr.jsx)("h1",{className:"text-4xl font-bold text-brand-orange-light dark:text-brand-orange-dark",children:"To Be Approved"}),(0,Yr.jsxs)("button",{onClick:()=>r("dashboard"),className:"px-6 py-2 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md  hover:bg-ui-blue-light/20 transition-colors duration-300 flex items-center  dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20","aria-label":"Back to Dashboard",children:[(0,Yr.jsx)($r,{className:"inline-block mr-2",size:18}),"Back to Dashboard"]})]}),(0,Yr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[(0,Yr.jsxs)("div",{className:"relative w-full sm:w-1/2 md:w-1/3",children:[(0,Yr.jsx)(ln,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark"}),(0,Yr.jsx)("input",{type:"text",placeholder:"Search files...",value:s,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark"})]}),(0,Yr.jsxs)("div",{className:"relative w-full sm:w-1/2 md:w-1/4",children:[(0,Yr.jsx)(un,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark"}),(0,Yr.jsxs)("select",{value:l,onChange:e=>u(e.target.value),className:"appearance-none w-full pl-10 pr-4 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark",children:[(0,Yr.jsx)("option",{value:"newest",children:"Sort by: Newest"}),(0,Yr.jsx)("option",{value:"oldest",children:"Sort by: Oldest"}),(0,Yr.jsx)("option",{value:"name-asc",children:"Sort by: Name (A-Z)"}),(0,Yr.jsx)("option",{value:"name-desc",children:"Sort by: Name (Z-A)"})]}),(0,Yr.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-text-secondary-light dark:text-text-secondary-dark",children:(0,Yr.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Yr.jsx)("path",{d:"M9.293 12.95l-.707.707L13.5 18l4.207-4.207-.707-.707L13.5 16.5l-4.207-4.207zM10.707 7.05l.707-.707L6.5 2 2.293 6.207l.707.707L6.5 3.5l4.207 4.207z"})})})]})]}),0===d.length?(0,Yr.jsxs)("div",{className:"text-center p-10 bg-light-bg-card bg-opacity-70 backdrop-blur-sm rounded-xl shadow-lg border border-white/30 dark:bg-dark-bg-card dark:bg-opacity-60 dark:border-gray-300/10",children:[(0,Yr.jsx)(on,{size:64,className:"mx-auto mb-4 text-text-secondary-light dark:text-text-secondary-dark opacity-50"}),(0,Yr.jsx)("p",{className:"text-text-primary-light text-xl font-semibold dark:text-text-primary-dark mb-2",children:"No Invoices to Approve!"}),(0,Yr.jsx)("p",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:"Looks like your incoming inbox is clear. Great job!"})]}):(0,Yr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 items-stretch",children:d.map(e=>(0,Yr.jsx)(h,{file:e,onEdit:o,onApprove:i,onView:a},e.id))})]})},hn=e=>{let{files:t=[],setCurrentPage:r,onView:o}=e;const[i,a]=(0,n.useState)(""),[s,c]=(0,n.useState)("newest"),l=(0,n.useMemo)(()=>{let e=[...t];if(i){const t=i.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.type.toLowerCase().includes(t))}return e.sort((e,t)=>{switch(s){case"oldest":return e.id.localeCompare(t.id);case"name-asc":return e.name.localeCompare(t.name);case"name-desc":return t.name.localeCompare(e.name);default:return t.id.localeCompare(e.id)}}),e},[t,i,s]),u=e=>{let{file:t,onView:r}=e;return(0,Yr.jsxs)("div",{className:"bg-light-bg-card bg-opacity-70 backdrop-blur-sm rounded-xl shadow-lg hover:shadow-xl  p-6 flex flex-col items-center text-center transition-transform hover:scale-105 duration-200  h-full justify-between border border-white/30  dark:bg-dark-bg-card dark:bg-opacity-60 dark:border-gray-300/10 dark:text-text-primary-dark",children:[(0,Yr.jsxs)("div",{children:["pdf"===t.type?(0,Yr.jsx)(on,{className:"w-16 h-16 text-brand-orange-light mb-3 dark:text-brand-orange-dark"}):(0,Yr.jsx)(an,{className:"w-16 h-16 text-brand-orange-light mb-3 dark:text-brand-orange-dark"}),(0,Yr.jsx)("h3",{className:"text-lg font-semibold text-text-primary-light mb-2 break-words w-full h-12 overflow-hidden text-ellipsis line-clamp-2 dark:text-text-primary-dark",children:t.name}),(0,Yr.jsxs)("p",{className:"text-sm text-brand-orange-light mb-4 dark:text-brand-orange-dark",children:[t.type.toUpperCase()," File"]})]}),(0,Yr.jsx)("div",{className:"flex flex-wrap justify-center gap-3 w-full min-h-[48px]",children:(0,Yr.jsxs)("button",{onClick:()=>r(t),className:"flex items-center px-4 py-2 bg-brand-orange-light/10 text-brand-orange-light rounded-lg  hover:bg-brand-orange-light/20 transition-colors text-sm font-medium  dark:bg-brand-orange-dark/10 dark:text-brand-orange-dark dark:hover:bg-brand-orange-dark/20","aria-label":`View ${t.name}`,children:[(0,Yr.jsx)(cn,{size:16,className:"mr-1"})," View ","xlsx"===t.type?"/Edit":""]})})]})};return(0,Yr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-light-bg-canvas to-blue-50 p-8  dark:from-dark-bg-canvas-start dark:via-dark-bg-canvas-via dark:to-dark-bg-canvas-end",children:[(0,Yr.jsxs)("header",{className:"flex justify-between items-center mb-10 pb-4  border-b border-border-subtle-light dark:border-border-subtle-dark",children:[(0,Yr.jsx)("h1",{className:"text-4xl font-bold text-brand-orange-light dark:text-brand-orange-dark",children:"Approved Invoices"}),(0,Yr.jsxs)("button",{onClick:()=>r("dashboard"),className:"px-6 py-2 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md  hover:bg-ui-blue-light/20 transition-colors duration-300 flex items-center  dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20","aria-label":"Back to Dashboard",children:[(0,Yr.jsx)($r,{className:"inline-block mr-2",size:18}),"Back to Dashboard"]})]}),(0,Yr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[(0,Yr.jsxs)("div",{className:"relative w-full sm:w-1/2 md:w-1/3",children:[(0,Yr.jsx)(ln,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark"}),(0,Yr.jsx)("input",{type:"text",placeholder:"Search files...",value:i,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark"})]}),(0,Yr.jsxs)("div",{className:"relative w-full sm:w-1/2 md:w-1/4",children:[(0,Yr.jsx)(un,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark"}),(0,Yr.jsxs)("select",{value:s,onChange:e=>c(e.target.value),className:"appearance-none w-full pl-10 pr-4 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark",children:[(0,Yr.jsx)("option",{value:"newest",children:"Sort by: Newest"}),(0,Yr.jsx)("option",{value:"oldest",children:"Sort by: Oldest"}),(0,Yr.jsx)("option",{value:"name-asc",children:"Sort by: Name (A-Z)"}),(0,Yr.jsx)("option",{value:"name-desc",children:"Sort by: Name (Z-A)"})]}),(0,Yr.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-text-secondary-light dark:text-text-secondary-dark",children:(0,Yr.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Yr.jsx)("path",{d:"M9.293 12.95l-.707.707L13.5 18l4.207-4.207-.707-.707L13.5 16.5l-4.207-4.207zM10.707 7.05l.707-.707L6.5 2 2.293 6.207l.707.707L6.5 3.5l4.207 4.207z"})})})]})]}),0===l.length?(0,Yr.jsxs)("div",{className:"text-center p-10 bg-light-bg-card bg-opacity-70 backdrop-blur-sm rounded-xl shadow-lg border border-white/30 dark:bg-dark-bg-card dark:bg-opacity-60 dark:border-gray-300/10",children:[(0,Yr.jsx)(on,{size:64,className:"mx-auto mb-4 text-text-secondary-light dark:text-text-secondary-dark opacity-50"}),(0,Yr.jsx)("p",{className:"text-text-primary-light text-xl font-semibold dark:text-text-primary-dark mb-2",children:"No Approved Invoices Yet!"}),(0,Yr.jsx)("p",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:"Once invoices are approved, they will appear here."})]}):(0,Yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-6 items-stretch",children:l.map(e=>(0,Yr.jsx)(u,{file:e,onView:o},e.id))})]})},gn=e=>{let{onClick:t,icon:r,text:n,colorClass:o}=e;return(0,Yr.jsxs)("button",{onClick:t,className:`flex items-center justify-center px-3 py-2 text-sm font-medium rounded-lg transition-colors duration-200 w-full ${o}`,children:[r,n]})},fn=e=>{let{file:t,onFileAction:r,pageType:n}=e;const o="xlsx"===t.type?an:on;return(0,Yr.jsxs)("div",{className:"bg-light-bg-card dark:bg-dark-bg-card rounded-xl shadow-lg hover:shadow-xl p-4 flex flex-col transition-all duration-200 border border-border-subtle-light/50 dark:border-border-subtle-dark/50",children:[(0,Yr.jsxs)("div",{className:"flex-grow flex flex-col items-center text-center mb-4",children:[(0,Yr.jsx)(o,{className:"w-16 h-16 mb-3 text-brand-orange-light dark:text-brand-orange-dark"}),(0,Yr.jsx)("h3",{className:"text-base font-semibold text-text-primary-light dark:text-text-primary-dark w-full h-12 overflow-hidden text-ellipsis break-words line-clamp-2",children:t.name}),(0,Yr.jsx)("p",{className:"text-xs text-text-secondary-light dark:text-text-secondary-dark mt-1",children:t.type.toUpperCase()})]}),(0,Yr.jsx)("div",{className:"flex flex-col sm:flex-row justify-center gap-2 w-full",children:(()=>{switch(n){case xr:return(0,Yr.jsxs)(Yr.Fragment,{children:[(0,Yr.jsx)(gn,{onClick:()=>r("view",t),icon:(0,Yr.jsx)(cn,{size:16,className:"mr-1.5"}),text:"xlsx"===t.type?"View/Edit":"View",colorClass:"bg-brand-orange-light/10 text-brand-orange-light hover:bg-brand-orange-light/20"}),(0,Yr.jsx)(gn,{onClick:()=>r("approve",t),icon:(0,Yr.jsx)(Zr,{size:16,className:"mr-1.5"}),text:"Approve",colorClass:"bg-status-approved-light/10 text-status-approved-light hover:bg-status-approved-light/20 dark:bg-status-approved-dark/10 dark:text-status-approved-dark dark:hover:bg-status-approved-dark/20"})]});case Tr:return(0,Yr.jsxs)(Yr.Fragment,{children:[(0,Yr.jsx)(gn,{onClick:()=>r("view",t),icon:(0,Yr.jsx)(cn,{size:16,className:"mr-1.5"}),text:"View",colorClass:"bg-ui-blue-light/10 text-ui-blue-light hover:bg-ui-blue-light/20 dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20"}),(0,Yr.jsx)(gn,{onClick:()=>r("sent",t),icon:(0,Yr.jsx)(tn,{size:16,className:"mr-1.5"}),text:"Mark Sent",colorClass:"bg-status-pending-light/10 text-status-pending-light hover:bg-status-pending-light/20 dark:bg-status-pending-dark/10 dark:text-status-pending-dark dark:hover:bg-status-pending-dark/20"})]});default:return(0,Yr.jsx)(gn,{onClick:()=>r("view",t),icon:(0,Yr.jsx)(cn,{size:16,className:"mr-1.5"}),text:"xlsx"===t.type?"View/Edit":"View",colorClass:"bg-ui-blue-light/10 text-ui-blue-light hover:bg-ui-blue-light/20 dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20"})}})()})]})},pn=e=>{let{searchTerm:t,setSearchTerm:r,sortCriteria:n,setSortCriteria:o}=e;return(0,Yr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4",children:[(0,Yr.jsxs)("div",{className:"relative w-full sm:max-w-xs",children:[(0,Yr.jsx)(ln,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark"}),(0,Yr.jsx)("input",{type:"text",placeholder:"Search files by name...",value:t,onChange:e=>r(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark"})]}),(0,Yr.jsxs)("div",{className:"relative w-full sm:w-auto",children:[(0,Yr.jsx)(un,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark pointer-events-none"}),(0,Yr.jsxs)("select",{value:n,onChange:e=>o(e.target.value),className:"appearance-none w-full sm:w-52 pl-10 pr-8 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark",children:[(0,Yr.jsx)("option",{value:"newest",children:"Sort by: Newest"}),(0,Yr.jsx)("option",{value:"oldest",children:"Sort by: Oldest"}),(0,Yr.jsx)("option",{value:"name-asc",children:"Sort by: Name (A-Z)"}),(0,Yr.jsx)("option",{value:"name-desc",children:"Sort by: Name (Z-A)"})]})]})]})},mn=e=>{let{files:t=[],setCurrentPage:r,onView:o,onSent:i}=e;const[a,s]=(0,n.useState)(""),[c,l]=(0,n.useState)("newest"),u=(0,n.useMemo)(()=>t.filter(e=>e.name.toLowerCase().includes(a.toLowerCase())).sort((e,t)=>{switch(c){case"oldest":return new Date(e.createdDateTime)-new Date(t.createdDateTime);case"name-asc":return e.name.localeCompare(t.name);case"name-desc":return t.name.localeCompare(e.name);default:return new Date(t.createdDateTime)-new Date(e.createdDateTime)}}),[t,a,c]),d=u.filter(e=>"pdf"===e.type),h=u.filter(e=>"xlsx"===e.type),g=(e,t,r)=>(0,Yr.jsxs)("div",{className:"flex-1",children:[(0,Yr.jsxs)("div",{className:"flex items-center mb-4",children:[r,(0,Yr.jsx)("h2",{className:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark ml-2",children:t})]}),e.length>0?(0,Yr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-2 gap-4",children:e.map(e=>(0,Yr.jsx)(fn,{file:e,onFileAction:(e,t)=>{"view"===e&&o(t),"sent"===e&&i(t.id)},pageType:"publishedDocuments"},e.id))}):(0,Yr.jsx)("div",{className:"text-center p-10 bg-light-bg-card/50 dark:bg-dark-bg-card/50 rounded-xl shadow-inner h-full flex items-center justify-center",children:(0,Yr.jsxs)("p",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:["No ",t," found."]})})]});return(0,Yr.jsxs)("div",{className:"min-h-screen bg-light-bg-canvas dark:bg-dark-bg-card text-text-primary-light dark:text-text-primary-dark p-8",children:[(0,Yr.jsxs)("header",{className:"flex justify-between items-center mb-10 pb-4 border-b border-border-subtle-light dark:border-border-subtle-dark",children:[(0,Yr.jsx)("h1",{className:"text-4xl font-bold text-brand-orange-light dark:text-brand-orange-dark",children:"Raised in QuickBooks"}),(0,Yr.jsxs)("button",{onClick:()=>r("dashboard"),className:"px-6 py-2 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md hover:bg-ui-blue-light/20 transition-colors duration-300 flex items-center dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20","aria-label":"Back to Dashboard",children:[(0,Yr.jsx)($r,{className:"inline-block mr-2",size:18}),"Back to Dashboard"]})]}),(0,Yr.jsx)(pn,{searchTerm:a,setSearchTerm:s,sortCriteria:c,setSortCriteria:l}),(0,Yr.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 mt-6",children:[g(d,"PDF Invoices",(0,Yr.jsx)(on,{size:28,className:"text-brand-orange-light dark:text-brand-orange-dark"})),(0,Yr.jsx)("div",{className:"border-b lg:border-l border-border-subtle-light dark:border-border-subtle-dark"}),g(h,"Excel Invoices",(0,Yr.jsx)(an,{size:28,className:"text-brand-orange-light dark:text-brand-orange-dark"}))]})]})},yn=e=>{let{files:t,onView:r,onEdit:n,onApprove:o,onSent:i,showApprove:a,showSent:s,isViewAndEdit:c}=e;return(0,Yr.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-6 items-stretch",children:t.map(e=>(0,Yr.jsx)(fn,{file:e,onView:r,onEdit:n,onApprove:o,onSent:i,showApprove:a,showSent:s,isViewAndEdit:c},e.id))})},vn=e=>{let{files:t=[],setCurrentPage:r,onView:o}=e;const[i,a]=(0,n.useState)(""),[s,c]=(0,n.useState)("newest"),l=(0,n.useMemo)(()=>{let e=[...t];if(i){const t=i.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t)||e.type.toLowerCase().includes(t))}return e.sort((e,t)=>{switch(s){case"oldest":return e.id.localeCompare(t.id);case"name-asc":return e.name.localeCompare(t.name);case"name-desc":return t.name.localeCompare(e.name);default:return t.id.localeCompare(e.id)}}),e},[t,i,s]);return(0,Yr.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-light-bg-canvas to-blue-50 p-8  dark:from-dark-bg-canvas-start dark:via-dark-bg-canvas-via dark:to-dark-bg-canvas-end",children:[(0,Yr.jsxs)("header",{className:"flex justify-between items-center mb-10 pb-4  border-b border-border-subtle-light dark:border-border-subtle-dark",children:[(0,Yr.jsx)("h1",{className:"text-4xl font-bold text-brand-orange-light dark:text-brand-orange-dark",children:"Sent Invoices"}),(0,Yr.jsxs)("button",{onClick:()=>r("dashboard"),className:"px-6 py-2 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md  hover:bg-ui-blue-light/20 transition-colors duration-300 flex items-center  dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20","aria-label":"Back to Dashboard",children:[(0,Yr.jsx)($r,{className:"inline-block mr-2",size:18}),"Back to Dashboard"]})]}),(0,Yr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-8 gap-4",children:[(0,Yr.jsxs)("div",{className:"relative w-full sm:w-1/2 md:w-1/3",children:[(0,Yr.jsx)(ln,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark"}),(0,Yr.jsx)("input",{type:"text",placeholder:"Search files...",value:i,onChange:e=>a(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark"})]}),(0,Yr.jsxs)("div",{className:"relative w-full sm:w-1/2 md:w-1/4",children:[(0,Yr.jsx)(un,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary-light dark:text-text-secondary-dark"}),(0,Yr.jsxs)("select",{value:s,onChange:e=>c(e.target.value),className:"appearance-none w-full pl-10 pr-4 py-2 rounded-lg bg-light-bg-card border border-border-subtle-light  text-text-primary-light focus:outline-none focus:ring-2 focus:ring-brand-orange-light  dark:bg-dark-bg-card dark:border-border-subtle-dark dark:text-text-primary-dark dark:focus:ring-brand-orange-dark",children:[(0,Yr.jsx)("option",{value:"newest",children:"Sort by: Newest"}),(0,Yr.jsx)("option",{value:"oldest",children:"Sort by: Oldest"}),(0,Yr.jsx)("option",{value:"name-asc",children:"Sort by: Name (A-Z)"}),(0,Yr.jsx)("option",{value:"name-desc",children:"Sort by: Name (Z-A)"})]}),(0,Yr.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-text-secondary-light dark:text-text-secondary-dark",children:(0,Yr.jsx)("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:(0,Yr.jsx)("path",{d:"M9.293 12.95l-.707.707L13.5 18l4.207-4.207-.707-.707L13.5 16.5l-4.207-4.207zM10.707 7.05l.707-.707L6.5 2 2.293 6.207l.707.707L6.5 3.5l4.207 4.207z"})})})]})]}),0===l.length?(0,Yr.jsxs)("div",{className:"text-center p-10 bg-light-bg-card bg-opacity-70 backdrop-blur-sm rounded-xl shadow-lg border border-white/30 dark:bg-dark-bg-card dark:bg-opacity-60 dark:border-gray-300/10",children:[(0,Yr.jsx)(on,{size:64,className:"mx-auto mb-4 text-text-secondary-light dark:text-text-secondary-dark opacity-50"}),(0,Yr.jsx)("p",{className:"text-text-primary-light text-xl font-semibold dark:text-text-primary-dark mb-2",children:"No Sent Invoices Yet!"}),(0,Yr.jsx)("p",{className:"text-text-secondary-light dark:text-text-secondary-dark",children:"Documents marked as sent will appear here."})]}):(0,Yr.jsx)(yn,{files:l,onView:o})]})},bn=()=>(0,Yr.jsx)("div",{className:"fixed inset-0 bg-dark-bg-canvas-start bg-opacity-70 flex items-center justify-center z-[9999]",children:(0,Yr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Yr.jsxs)("div",{className:"flex space-x-2",children:[(0,Yr.jsx)("div",{className:"w-4 h-4 bg-brand-orange-light rounded-full animate-bounce-dot",style:{animationDelay:"0s"}}),(0,Yr.jsx)("div",{className:"w-4 h-4 bg-brand-orange-light rounded-full animate-bounce-dot",style:{animationDelay:"0.2s"}}),(0,Yr.jsx)("div",{className:"w-4 h-4 bg-brand-orange-light rounded-full animate-bounce-dot",style:{animationDelay:"0.4s"}})]}),(0,Yr.jsx)("p",{className:"text-text-primary-dark text-lg mt-4",children:"Loading..."})]})}),wn=e=>{let{message:t,onClearMessage:r}=e;return(0,n.useEffect)(()=>{if(t.text){const e=setTimeout(()=>{r()},5e3);return()=>clearTimeout(e)}},[t,r]),t.text?(0,Yr.jsx)("div",{className:"fixed top-4 left-4 p-3 rounded-lg shadow-lg z-50 "+("success"===t.type?"bg-green-500 text-white":"bg-red-500 text-white"),children:t.text}):null},kn=Wr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Cn=Wr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),In=Wr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),An=e=>{let{onLogout:t,onRefresh:r,onSettingsClick:n,setCurrentPage:o,currentPage:i}=e;return(0,Yr.jsx)("header",{className:"bg-light-bg-card dark:bg-dark-bg-card shadow-md sticky top-0 z-40 p-3 sm:p-4",children:(0,Yr.jsxs)("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[(0,Yr.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-brand-orange-light dark:text-brand-orange-dark cursor-pointer",onClick:()=>{o("dashboard")},children:"Invoice Processing"}),(0,Yr.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,Yr.jsx)("button",{onClick:r,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Refresh Files",children:(0,Yr.jsx)(kn,{size:20})}),(0,Yr.jsx)("button",{onClick:n,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Settings",children:(0,Yr.jsx)(Cn,{size:20})}),(0,Yr.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors","aria-label":"Logout",children:(0,Yr.jsx)(In,{size:20})})]})]})})},xn=Wr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sn=e=>{let{isOpen:t,onClose:r,onConfirm:n,message:o}=e;return t?(0,Yr.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,Yr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center dark:bg-gray-800 dark:text-white",children:[(0,Yr.jsx)("div",{className:"flex justify-end mb-2",children:(0,Yr.jsx)("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 rounded-full p-1 transition-colors dark:text-gray-400 dark:hover:text-gray-200","aria-label":"Close modal",children:(0,Yr.jsx)(xn,{className:"w-6 h-6"})})}),(0,Yr.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-6 dark:text-white",children:o||"Are you sure?"}),(0,Yr.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Yr.jsx)("button",{onClick:r,className:"px-6 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors shadow-md font-medium dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600",children:"Cancel"}),(0,Yr.jsx)("button",{onClick:n,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors shadow-md font-medium",children:"Confirm"})]})]})}):null},Tn=e=>{let{isOpen:t,onClose:r,file:n,content:o}=e;if(!t||!n)return null;return(0,Yr.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50",children:(0,Yr.jsxs)("div",{className:"bg-dark-bg-card rounded-xl shadow-2xl w-full max-w-4xl h-[90vh] flex flex-col p-4 sm:p-6",children:[(0,Yr.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,Yr.jsxs)("h2",{className:"text-xl font-bold text-text-primary-dark truncate pr-4",children:["Viewing: ",n.name]}),(0,Yr.jsx)("button",{onClick:r,className:"p-2 rounded-full text-text-secondary-dark hover:bg-white/10 hover:text-text-primary-dark transition-colors","aria-label":"Close modal",children:(0,Yr.jsx)(xn,{size:24})})]}),(0,Yr.jsx)("div",{className:"flex-grow bg-black/30 rounded-lg overflow-hidden flex items-center justify-center",children:o?"pdf"===n.type?(0,Yr.jsx)("iframe",{src:o,title:n.name,className:"w-full h-full border-none","aria-label":`PDF viewer for ${n.name}`}):(0,Yr.jsxs)("div",{className:"text-center p-4",children:[(0,Yr.jsx)("p",{className:"font-semibold text-text-primary-dark",children:"Preview not available."}),(0,Yr.jsxs)("p",{className:"text-text-secondary-dark mt-1",children:["This file type (",n.type,") cannot be viewed directly in the app."]})]}):(0,Yr.jsx)("p",{className:"text-text-secondary-dark",children:"No content to display."})})]})})},En=Wr("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Pn=Wr("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]),Rn=e=>{let{isOpen:t,onClose:r,fileName:n,onOpenWeb:o,onOpenDesktop:i}=e;return t?(0,Yr.jsx)("div",{className:"fixed inset-0 bg-dark-bg-canvas-start bg-opacity-70 flex items-center justify-center z-[9999]",children:(0,Yr.jsxs)("div",{className:"bg-light-bg-card p-8 rounded-xl shadow-2xl text-center max-w-md w-full  border-t-4 border-brand-orange-light  dark:bg-dark-bg-card dark:border-brand-orange-dark  dark:shadow-xl",children:[" ",(0,Yr.jsx)("div",{className:"flex justify-end",children:(0,Yr.jsx)("button",{onClick:r,className:"text-text-secondary-light hover:text-text-primary-light dark:text-text-secondary-dark dark:hover:text-text-primary-dark transition-colors","aria-label":"Close modal",children:(0,Yr.jsx)(xn,{size:24})})}),(0,Yr.jsxs)("h2",{className:"text-2xl font-bold text-text-primary-light mb-4 dark:text-text-primary-dark",children:['Open "',n,'"']}),(0,Yr.jsx)("p",{className:"text-text-secondary-light mb-8 dark:text-text-secondary-dark",children:"How would you like to open this Excel file?"}),(0,Yr.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,Yr.jsxs)("button",{onClick:o,className:"flex items-center justify-center px-6 py-3 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md  hover:bg-ui-blue-light/20 transition-colors duration-300 font-medium  dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20","aria-label":"Open in Excel Online",children:[(0,Yr.jsx)(En,{size:20,className:"mr-2"})," Open in Excel Online"]}),(0,Yr.jsxs)("button",{onClick:i,className:"flex items-center justify-center px-6 py-3 bg-brand-orange-light/10 text-brand-orange-light rounded-lg shadow-md  hover:bg-brand-orange-light/20 transition-colors duration-300 font-medium  dark:bg-brand-orange-dark/10 dark:text-brand-orange-dark dark:hover:bg-brand-orange-dark/20","aria-label":"Open in Excel App",children:[(0,Yr.jsx)(Pn,{size:20,className:"mr-2"})," Open in Excel App"]})]})]})}):null},_n=Wr("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Nn=Wr("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Mn=e=>{let{isOpen:t,onClose:r,currentExcelPreference:n,onPreferenceChange:o,isDarkMode:i,toggleDarkMode:a}=e;if(!t)return null;const s=e=>{o(e.target.value)};return(0,Yr.jsx)("div",{className:"fixed inset-0 bg-dark-bg-canvas-start bg-opacity-70 flex items-center justify-center z-[9999] p-4",children:(0,Yr.jsxs)("div",{className:"bg-light-bg-card p-8 rounded-xl shadow-2xl text-center max-w-md w-full  border-t-4 border-brand-orange-light  dark:bg-dark-bg-card dark:border-brand-orange-dark  dark:shadow-xl  transform scale-100 opacity-100 transition-all duration-300 ease-out",children:[(0,Yr.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Yr.jsxs)("h2",{className:"text-2xl font-bold text-text-primary-light dark:text-text-primary-dark flex items-center",children:[(0,Yr.jsx)(Cn,{size:24,className:"mr-3 text-ui-blue-light dark:text-ui-blue-dark"}),"Settings"]}),(0,Yr.jsx)("button",{onClick:r,className:"text-text-secondary-light hover:text-text-primary-light dark:text-text-secondary-dark dark:hover:text-text-primary-dark transition-colors","aria-label":"Close settings",children:(0,Yr.jsx)(xn,{size:24})})]}),(0,Yr.jsxs)("div",{className:"text-left bg-border-subtle-light/30 dark:bg-border-subtle-dark/30 p-5 rounded-lg mb-6 shadow-inner",children:[(0,Yr.jsx)("h3",{className:"text-lg font-semibold text-text-primary-light mb-4 dark:text-text-primary-dark",children:"How to open Excel files:"}),(0,Yr.jsx)("div",{className:"flex flex-col space-y-3",children:["ask","web","desktop"].map(e=>(0,Yr.jsxs)("label",{className:"inline-flex items-center text-text-secondary-light dark:text-text-secondary-dark  cursor-pointer p-2 rounded-md hover:bg-ui-blue-light/10 dark:hover:bg-ui-blue-dark/10 transition-colors",children:[(0,Yr.jsx)("input",{type:"radio",className:"hidden peer",name:"excelOpeningPreference",value:e,checked:n===e,onChange:s}),(0,Yr.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-text-secondary-light  peer-checked:border-brand-orange-light dark:border-text-secondary-dark  dark:peer-checked:border-brand-orange-dark flex items-center justify-center  transition-all duration-200 flex-shrink-0",children:(0,Yr.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-brand-orange-light opacity-0  peer-checked:opacity-100 dark:bg-brand-orange-dark transition-opacity duration-200"})}),(0,Yr.jsxs)("span",{className:"ml-3 font-medium",children:["ask"===e&&"Always ask me (default)","web"===e&&"Always open in Excel Online","desktop"===e&&"Always open in Excel App (if installed)"]})]},e))})]}),(0,Yr.jsxs)("div",{className:"text-left bg-border-subtle-light/30 dark:bg-border-subtle-dark/30 p-5 rounded-lg mb-6 shadow-inner",children:[(0,Yr.jsx)("h3",{className:"text-lg font-semibold text-text-primary-light mb-4 dark:text-text-primary-dark",children:"App Theme:"}),(0,Yr.jsxs)("label",{className:"flex items-center cursor-pointer justify-between",children:[(0,Yr.jsxs)("span",{className:"text-text-secondary-light font-medium dark:text-text-secondary-dark flex items-center",children:[i?(0,Yr.jsx)(_n,{size:20,className:"mr-2 text-ui-blue-dark"}):(0,Yr.jsx)(Nn,{size:20,className:"mr-2 text-ui-blue-light"}),i?"Dark Mode":"Light Mode"]}),(0,Yr.jsxs)("div",{className:"relative w-12 h-6 rounded-full transition-all duration-300 bg-text-secondary-light peer-checked:bg-status-approved-light dark:bg-text-secondary-dark dark:peer-checked:bg-status-approved-dark",onClick:e=>{e.stopPropagation(),e.preventDefault(),console.log("Theme Toggle Clicked! Current mode:",i),a()},"aria-label":i?"Switch to light mode":"Switch to dark mode",role:"switch","aria-checked":i,children:[(0,Yr.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:i,onChange:()=>{}}),(0,Yr.jsx)("div",{className:"absolute left-1 top-1 w-4 h-4 rounded-full transition-all duration-300 bg-brand-orange-light transform peer-checked:translate-x-6 dark:bg-brand-orange-dark"})]})]})]}),(0,Yr.jsx)("button",{onClick:r,className:"px-6 py-2 bg-ui-blue-light/10 text-ui-blue-light rounded-lg shadow-md  hover:bg-ui-blue-light/20 transition-colors duration-300 font-medium  dark:bg-ui-blue-dark/10 dark:text-ui-blue-dark dark:hover:bg-ui-blue-dark/20","aria-label":"Close settings",children:"Close"})]})})};const On=function(){const{instance:e,accounts:t}=wr(),r=kr(),{folders:o,isLoading:i,error:a,fetchSharePointData:s,moveSharePointFile:c,downloadFileFromSharePoint:l}=Br(e,t),[u,d]=(0,n.useState)(null),[h,g]=(0,n.useState)({text:"",type:""}),[f,p]=(0,n.useState)(()=>"dark"===localStorage.getItem("theme")),[m,y]=(0,n.useState)("login"),[v,b]=(0,n.useState)(null),[w,k]=(0,n.useState)(null),[C,I]=(0,n.useState)(null),[A,x]=(0,n.useState)(()=>localStorage.getItem("excelOpeningPreference")||"ask"),S=(0,n.useCallback)(function(e){g({text:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"})},[]);(0,n.useEffect)(()=>{if(r&&t.length>0){(async()=>{try{const r=await e.acquireTokenSilent({...Cr,account:t[0]}),n=await fetch("https://graph.microsoft.com/v1.0/me",{headers:{Authorization:`Bearer ${r.accessToken}`}}),o=await n.json();d(o),y("dashboard"),s()}catch(r){console.error(r),S("Could not fetch user profile.","error")}})()}else y("login")},[r,t,e,s,S]),(0,n.useEffect)(()=>{a&&S(a,"error")},[a,S]),(0,n.useEffect)(()=>{localStorage.setItem("theme",f?"dark":"light"),document.documentElement.classList.toggle("dark",f)},[f]),(0,n.useEffect)(()=>{localStorage.setItem("excelOpeningPreference",A)},[A]);const T=()=>e.loginPopup(Cr).catch(e=>console.error(e)),E=(0,n.useCallback)(e=>{"ask"===A?b("excelChoice"):"web"===A?window.open(e.webUrl,"_blank"):window.location.href=`ms-excel:ofe|u|${encodeURIComponent(e.webUrl)}`},[A]),P=(0,n.useCallback)(async e=>{if(k(e),"xlsx"===e.type)E(e);else try{const t=await l(e);I(t),b("viewFile")}catch(t){S(t.message,"error")}},[l,E,S]),R=(0,n.useCallback)(e=>{var t;const r=null===(t=o[xr])||void 0===t?void 0:t.find(t=>t.id===e);r&&(k(r),b("confirmApproval"))},[o]),_=(0,n.useCallback)(e=>{var t;const r=null===(t=o[Tr])||void 0===t?void 0:t.find(t=>t.id===e);r&&(k(r),b("confirmSent"))},[o]),N=(0,n.useCallback)(async()=>{if(!w||!v)return;const e=v,t=w;b(null);try{let r="";if("confirmApproval"===e){const e=Pr.incomingInvoices.id,n=Pr.approvedInvoices.id;await c(t.id,e,n),r="File approved successfully."}else if("confirmSent"===e){const e=Pr.publishedDocuments.id,n=Pr.sentDocuments.id;await c(t.id,e,n),r="File marked as sent."}S(r,"success"),s()}catch(r){S(r.message,"error")}},[w,v,c,S,s]),M=()=>{b(null),k(null),C&&C.startsWith("blob:")&&URL.revokeObjectURL(C),I(null)};return r?(0,Yr.jsxs)("div",{className:"min-h-screen bg-light-bg-canvas dark:bg-dark-bg-card text-text-primary-light dark:text-text-primary-dark",children:[i&&(0,Yr.jsx)(bn,{}),(0,Yr.jsx)(wn,{message:h,onClearMessage:()=>g({text:"",type:""})}),(0,Yr.jsx)(An,{onLogout:()=>{t.length>0&&e.logoutPopup({account:t[0]}).catch(e=>{console.error(e)})},onRefresh:s,onSettingsClick:()=>b("settings"),setCurrentPage:y,currentPage:m}),(0,Yr.jsx)("main",{className:"p-4 sm:p-6 md:p-8 max-w-7xl mx-auto w-full",children:(()=>{switch(m){case"dashboard":return(0,Yr.jsx)(nn,{userProfile:u,folders:o,setCurrentPage:y});case"incomingInvoices":return(0,Yr.jsx)(dn,{files:o[xr]||[],setCurrentPage:y,onView:P,onApprove:R});case"approvedInvoices":return(0,Yr.jsx)(hn,{files:o[Sr]||[],setCurrentPage:y,onView:P});case"publishedDocuments":return(0,Yr.jsx)(mn,{files:o[Tr]||[],setCurrentPage:y,onView:P,onSent:_});case"sentDocuments":return(0,Yr.jsx)(vn,{files:o[Er]||[],setCurrentPage:y,onView:P});default:return(0,Yr.jsx)(Jr,{onLogin:T})}})()}),(0,Yr.jsx)(Sn,{isOpen:"confirmApproval"===v||"confirmSent"===v,onClose:M,onConfirm:N,title:"confirmApproval"===v?"Confirm Approval":"Confirm Sent",message:`Are you sure you want to proceed with this action for "${null===w||void 0===w?void 0:w.name}"?`}),(0,Yr.jsx)(Tn,{isOpen:"viewFile"===v,onClose:M,file:w,content:C}),(0,Yr.jsx)(Rn,{isOpen:"excelChoice"===v,onClose:M,fileName:(null===w||void 0===w?void 0:w.name)||"",onOpenWeb:()=>{window.open(null===w||void 0===w?void 0:w.webUrl,"_blank"),M()},onOpenDesktop:()=>{window.location.href=`ms-excel:ofe|u|${encodeURIComponent(null===w||void 0===w?void 0:w.webUrl)}`,M()}}),(0,Yr.jsx)(Mn,{isOpen:"settings"===v,onClose:M,isDarkMode:f,toggleDarkMode:()=>p(e=>!e),currentExcelPreference:A,onPreferenceChange:x})]}):(0,Yr.jsx)(Jr,{onLogin:T})},Ln="AAD",qn="OIDC",jn="EAR",Dn="none",Fn="client_info_decoding_error",Hn="client_info_empty_error",Un="token_parsing_error",zn="null_or_empty_token",Bn="endpoints_resolution_error",Kn="network_error",Gn="openid_config_error",Vn="hash_not_deserialized",Wn="invalid_state",Qn="state_mismatch",Yn="state_not_found",Jn="nonce_mismatch",$n="auth_time_not_found",Xn="max_age_transpired",Zn="multiple_matching_tokens",eo="multiple_matching_accounts",to="multiple_matching_appMetadata",ro="request_cannot_be_made",no="cannot_remove_empty_scope",oo="cannot_append_scopeset",io="empty_input_scopeset",ao="device_code_polling_cancelled",so="device_code_expired",co="device_code_unknown_error",lo="no_account_in_silent_request",uo="invalid_cache_record",ho="invalid_cache_environment",go="no_account_found",fo="no_crypto_object",po="unexpected_credential_type",mo="invalid_assertion",yo="invalid_client_credential",vo="token_refresh_required",bo="user_timeout_reached",wo="token_claims_cnf_required_for_signedjwt",ko="authorization_code_missing_from_server_response",Co="binding_key_not_removed",Io="end_session_endpoint_not_supported",Ao="key_id_missing",xo="no_network_connectivity",So="user_canceled",To="missing_tenant_id_error",Eo="method_not_implemented",Po="nested_app_auth_bridge_disabled",Ro={[Fn]:"The client info could not be parsed/decoded correctly",[Hn]:"The client info was empty",[Un]:"Token cannot be parsed",[zn]:"The token is null or empty",[Bn]:"Endpoints cannot be resolved",[Kn]:"Network request failed",[Gn]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Vn]:"The hash parameters could not be deserialized",[Wn]:"State was not the expected format",[Qn]:"State mismatch error",[Yn]:"State not found",[Jn]:"Nonce mismatch error",[$n]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Xn]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Zn]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[eo]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[to]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ro]:"Token request cannot be made without authorization code or refresh token.",[no]:"Cannot remove null or empty scope from ScopeSet",[oo]:"Cannot append ScopeSet",[io]:"Empty input ScopeSet cannot be processed",[ao]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[so]:"Device code is expired.",[co]:"Device code stopped polling for unknown reasons.",[lo]:"Please pass an account object, silent flow is not supported without account information",[uo]:"Cache record object was null or undefined.",[ho]:"Invalid environment when attempting to create cache entry",[go]:"No account found in cache for given key.",[fo]:"No crypto object detected.",[po]:"Unexpected credential type.",[mo]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[yo]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[vo]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[bo]:"User defined timeout for device code polling reached",[wo]:"Cannot generate a POP jwt if the token_claims are not populated",[ko]:"Server response does not contain an authorization code to proceed",[Co]:"Could not remove the credential's binding key from storage.",[Io]:"The provided authority does not support logout",[Ao]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[xo]:"No network connectivity. Check your internet connection.",[So]:"User cancelled the flow.",[To]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Eo]:"This method has not been implemented",[Po]:"The nested app auth bridge is disabled"};class _o extends ve{constructor(e,t){super(e,t?`${Ro[e]}: ${t}`:Ro[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,_o.prototype)}}function No(e,t){return new _o(e,t)}const Mo={createNewGuid:()=>{throw No(Eo)},base64Decode:()=>{throw No(Eo)},base64Encode:()=>{throw No(Eo)},base64UrlEncode:()=>{throw No(Eo)},encodeKid:()=>{throw No(Eo)},async getPublicKeyThumbprint(){throw No(Eo)},async removeTokenBindingKey(){throw No(Eo)},async clearKeystore(){throw No(Eo)},async signJwt(){throw No(Eo)},async hashString(){throw No(Eo)}},Oo="@azure/msal-common",Lo="15.8.0";function qo(e,t){const r=function(e){if(!e)throw No(zn);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw No(Un);return t[2]}(e);try{const e=t(r);return JSON.parse(e)}catch(n){throw No(Un)}}function jo(e,t){if(0===t||Date.now()-3e5>e+t)throw No(Xn)}function Do(){return Math.round((new Date).getTime()/1e3)}function Fo(e){return e.getTime()/1e3}function Ho(e){return e?new Date(1e3*Number(e)):new Date}function Uo(e,t){const r=Number(e)||0;return Do()+t>r}function zo(e){return[Wo(e),Qo(e),Yo(e),Jo(e),$o(e)].join(D).toLowerCase()}function Bo(e,t,r,n,o){return{credentialType:H.ID_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r,realm:o}}function Ko(e,t,r,n,o,i,a,s,c,l,u,d,h,g,f){const p={homeAccountId:e,credentialType:H.ACCESS_TOKEN,secret:r,cachedAt:Do().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:n,realm:o,target:i,tokenType:u||J.BEARER};if(d&&(p.userAssertionHash=d),l&&(p.refreshOn=l.toString()),g&&(p.requestedClaims=g,p.requestedClaimsHash=f),p.tokenType?.toLowerCase()!==J.BEARER.toLowerCase())switch(p.credentialType=H.ACCESS_TOKEN_WITH_AUTH_SCHEME,p.tokenType){case J.POP:const e=qo(r,c);if(!e?.cnf?.kid)throw No(wo);p.keyId=e.cnf.kid;break;case J.SSH:p.keyId=h}return p}function Go(e,t,r,n,o,i,a){const s={credentialType:H.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:n,secret:r};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function Vo(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function Wo(e){return[e.homeAccountId,e.environment].join(D).toLowerCase()}function Qo(e){const t=e.credentialType===H.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(D).toLowerCase()}function Yo(e){return(e.target||"").toLowerCase()}function Jo(e){return(e.requestedClaimsHash||"").toLowerCase()}function $o(e){return e.tokenType&&e.tokenType.toLowerCase()!==J.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function Xo(){return Do()+K}function Zo(e,t,r){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=r,e.jwks_uri=t.jwks_uri}function ei(e,t,r){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=r}function ti(e){return e.expiresAt<=Do()}const ri="redirect_uri_empty",ni="claims_request_parsing_error",oi="authority_uri_insecure",ii="url_parse_error",ai="empty_url_error",si="empty_input_scopes_error",ci="invalid_prompt_value",li="invalid_claims",ui="token_request_empty",di="logout_request_empty",hi="invalid_code_challenge_method",gi="pkce_params_missing",fi="invalid_cloud_discovery_metadata",pi="invalid_authority_metadata",mi="untrusted_authority",yi="missing_ssh_jwk",vi="missing_ssh_kid",bi="missing_nonce_authentication_header",wi="invalid_authentication_header",ki="cannot_set_OIDCOptions",Ci="cannot_allow_platform_broker",Ii="authority_mismatch",Ai={[ri]:"A redirect URI is required for all calls, and none has been set.",[ni]:"Could not parse the given claims request object.",[oi]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[ii]:"URL could not be parsed into appropriate segments.",[ai]:"URL was empty or null.",[si]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[ci]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[li]:"Given claims parameter must be a stringified JSON object.",[ui]:"Token request was empty and not found in cache.",[di]:"The logout request was null or undefined.",[hi]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[gi]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[fi]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[pi]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[mi]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[yi]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[vi]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[bi]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[wi]:"Invalid authentication header provided",[ki]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ci]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Ii]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class xi extends ve{constructor(e){super(e,Ai[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,xi.prototype)}}function Si(e){return new xi(e)}class Ti{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(t){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),n=e=>decodeURIComponent(e.replace(/\+/g," "));return r.forEach(e=>{if(e.trim()){const[r,o]=e.split(/=(.+)/g,2);r&&o&&(t[n(r)]=n(o))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(t){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class Ei{constructor(e){const t=e?Ti.trimArrayEntries([...e]):[],r=t?Ti.removeEmptyStringsFromArray(t):[];if(!r||!r.length)throw Si(si);this.scopes=new Set,r.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||i.EMPTY_STRING).split(" ");return new Ei(t)}static createSearchScopes(e){const t=new Ei(e);return t.containsOnlyOIDCScopes()?t.removeScope(i.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new Ei(t);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e)))}containsOnlyOIDCScopes(){let e=0;return g.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(t){throw No(oo)}}removeScope(e){if(!e)throw No(no);this.scopes.delete(e.trim())}removeOIDCScopes(){g.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw No(io);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw No(io);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),n=this.getScopeCount();return t.size<n+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return i.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Pi(e,t){if(!e)throw No(Hn);try{const r=t(e);return JSON.parse(r)}catch(r){throw No(Fn)}}function Ri(e){if(!e)throw No(Fn);const t=e.split(F,2);return{uid:t[0],utid:t.length<2?i.EMPTY_STRING:t[1]}}function _i(e,t){return!!e&&!!t&&e===t.split(".")[1]}function Ni(e,t,r,n){if(n){const{oid:t,sub:r,tid:o,name:i,tfp:a,acr:s}=n,c=o||a||s||"";return{tenantId:c,localAccountId:t||r||"",name:i,isHomeTenant:_i(c,e)}}return{tenantId:r,localAccountId:t,isHomeTenant:_i(r,e)}}function Mi(e,t,r,n){let o=e;if(t){const{isHomeTenant:r,...n}=t;o={...e,...n}}if(r){const{isHomeTenant:t,...i}=Ni(e.homeAccountId,e.localAccountId,e.tenantId,r);return o={...o,...i,idTokenClaims:r,idToken:n},o}return o}const Oi=0,Li=1,qi=2,ji=3;function Di(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class Fi{generateAccountId(){return[this.homeAccountId,this.environment].join(D).toLowerCase()}generateAccountKey(){return Fi.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(D).toLowerCase()}static createAccount(e,t,r){const n=new Fi;let o;t.authorityType===Li?n.authorityType=q:t.protocolMode===qn?n.authorityType=j:n.authorityType=L,e.clientInfo&&r&&(o=Pi(e.clientInfo,r)),n.clientInfo=e.clientInfo,n.homeAccountId=e.homeAccountId,n.nativeAccountId=e.nativeAccountId;const i=e.environment||t&&t.getPreferredCache();if(!i)throw No(ho);n.environment=i,n.realm=o?.utid||Di(e.idTokenClaims)||"",n.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(n.username=a||s||"",n.name=e.idTokenClaims?.name||"",n.cloudGraphHostName=e.cloudGraphHostName,n.msGraphHost=e.msGraphHost,e.tenantProfiles)n.tenantProfiles=e.tenantProfiles;else{const t=Ni(e.homeAccountId,n.localAccountId,n.realm,e.idTokenClaims);n.tenantProfiles=[t]}return n}static createFromAccountInfo(e,t,r){const n=new Fi;return n.authorityType=e.authorityType||j,n.homeAccountId=e.homeAccountId,n.localAccountId=e.localAccountId,n.nativeAccountId=e.nativeAccountId,n.realm=e.tenantId,n.environment=e.environment,n.username=e.username,n.name=e.name,n.cloudGraphHostName=t,n.msGraphHost=r,n.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),n}static generateHomeAccountId(e,t,r,n,o){if(t!==Li&&t!==qi){if(e)try{const t=Pi(e,n.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(i){}r.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let n=!0;if(r){const r=e.idTokenClaims||{},o=t.idTokenClaims||{};n=r.iat===o.iat&&r.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&n}}function Hi(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function Ui(e){if(!e||e.indexOf("=")<0)return null;try{const t=Hi(e),r=Object.fromEntries(new URLSearchParams(t));if(r.code||r.ear_jwe||r.error||r.error_description||r.state)return r}catch(t){throw No(Vn)}return null}function zi(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0;const n=new Array;return e.forEach((e,o)=>{!t&&r&&o in r?n.push(`${o}=${e}`):n.push(`${o}=${encodeURIComponent(e)}`)}),n.join("&")}class Bi{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Si(ai);e.includes("#")||(this._urlString=Bi.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Ti.endsWith(t,"?")?t=t.slice(0,-1):Ti.endsWith(t,"?/")&&(t=t.slice(0,-2)),Ti.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(t){throw Si(ii)}if(!e.HostNameAndPort||!e.PathSegments)throw Si(ii);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Si(oi)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return Bi.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return!e||0===r.length||r[0]!==k&&r[0]!==C||(r[0]=e),Bi.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Si(ii);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let n=r.AbsolutePath.split("/");return n=n.filter(e=>e&&e.length>0),r.PathSegments=n,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Si(ii);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===i.FORWARD_SLASH){const r=new Bi(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Bi(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Ui(e)}}const Ki={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Gi={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Vi=new Set;function Wi(e,t,r,n){if(n?.trace(`getAliasesFromMetadata called with source: ${r}`),e&&t){const o=Qi(t,e);if(o)return n?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${r}, returning aliases`),o.aliases;n?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${r}`)}return null}function Qi(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n.aliases.includes(t))return n}return null}Gi.metadata.forEach(e=>{e.aliases.forEach(e=>{Vi.add(e)})});const Yi="cache_quota_exceeded",Ji="cache_error_unknown",$i={[Yi]:"Exceeded cache storage capacity.",[Ji]:"Unexpected error occurred when using cache storage."};class Xi extends ve{constructor(e,t){const r=t||($i[e]?$i[e]:$i[Ji]);super(`${e}: ${r}`),Object.setPrototypeOf(this,Xi.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function Zi(e){return e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new Xi(Yi):new Xi(e.name,e.message):new Xi(Ji)}class ea{constructor(e,t,r,n,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(Oo,Lo),this.staticAuthorityOptions=o,this.performanceClient=n}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){const r=this.getAllAccounts(e,t);if(r.length>1){return r.sort(e=>e.idTokenClaims?-1:1)[0]}return 1===r.length?r[0]:null}getBaseAccountInfo(e,t){const r=this.getAccountsFilteredBy(e,t);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,t,r){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,t,r,n,o){let i,a=null;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const s=this.getIdToken(e,n,t,r.tenantId);return s&&(i=qo(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(i,o))?null:(a=Mi(e,r,i,s?.secret),a)}getTenantProfilesFromAccountEntity(e,t,r,n){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const e=i.get(r);if(!e)return[];i=new Map([[r,e]])}const s=[];return i.forEach(e=>{const r=this.getTenantedAccountInfoByFilter(o,a,e,t,n);r&&s.push(r)}),s}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,r){if(!e)throw No(uo);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==r?.idToken&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==r?.accessToken&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==r?.refreshToken&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(n){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),n instanceof ve?n:Zi(n)}}async saveAccessToken(e,t){const r={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},n=this.getTokenKeys(),o=Ei.fromString(e.target);n.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,r,!1))return;const n=this.getAccessTokenCredential(e,t);if(n&&this.credentialMatchesFilter(n,r)){Ei.fromString(n.target).intersectingScopeSets(o)&&this.removeAccessToken(e,t)}}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e,t){const r=this.getAccountKeys(),n=[];return r.forEach(r=>{if(!this.isAccountKey(r,e.homeAccountId))return;const o=this.getAccount(r,t);if(!o)return;if(e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId))return;if(e.username&&!this.matchUsername(o.username,e.username))return;if(e.environment&&!this.matchEnvironment(o,e.environment))return;if(e.realm&&!this.matchRealm(o,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;const i={localAccountId:e?.localAccountId,name:e?.name},a=o.tenantProfiles?.filter(e=>this.tenantProfileMatchesFilter(e,i));a&&0===a.length||n.push(o)}),n}isAccountKey(e,t,r){return!(e.split(D).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(r&&!e.toLowerCase().includes(r.toLowerCase())))}isCredentialKey(e){if(e.split(D).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(H.ID_TOKEN.toLowerCase())&&-1===t.indexOf(H.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(H.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(H.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(H.REFRESH_TOKEN.toLowerCase())>-1){const e=`${H.REFRESH_TOKEN}${D}${this.clientId}${D}`,r=`${H.REFRESH_TOKEN}${D}${z}${D}`;if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(r.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===H.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===J.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const n=this.getAppMetadata(t);n&&(e.environment&&!this.matchEnvironment(n,e.environment)||e.clientId&&!this.matchClientId(n,e.clientId)||(r[t]=n))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const n=this.getAuthorityMetadata(t);n&&-1!==n.aliases.indexOf(e)&&(r=n)}),r}removeAllAccounts(e){this.getAccountKeys().forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){const r=this.getAccount(e,t);r&&(this.removeAccountContext(r,t),this.removeItem(e,t))}removeAccountContext(e,t){const r=this.getTokenKeys(),n=e.generateAccountId();r.idToken.forEach(e=>{0===e.indexOf(n)&&this.removeIdToken(e,t)}),r.accessToken.forEach(e=>{0===e.indexOf(n)&&this.removeAccessToken(e,t)}),r.refreshToken.forEach(e=>{0===e.indexOf(n)&&this.removeRefreshToken(e,t)})}removeAccessToken(e,t){const r=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!r||r.credentialType.toLowerCase()!==H.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==J.POP)return;const n=r.keyId;n&&this.cryptoImpl.removeTokenBindingKey(n).catch(()=>{this.commonLogger.error(`Failed to remove token binding key ${n}`,t),this.performanceClient?.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}readAccountFromCache(e,t){const r=Fi.generateAccountCacheKey(e);return this.getAccount(r,t)}getIdToken(e,t,r,n,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:H.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t,r),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let r=a;if(!n){const t=new Map;a.forEach((r,n)=>{r.realm===e.tenantId&&t.set(n,r)});const n=t.size;if(n<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===n)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;r=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),r.forEach((e,r)=>{this.removeIdToken(r,t)}),o&&t&&o.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,r){const n=r&&r.idToken||this.getTokenKeys().idToken,o=new Map;return n.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,{clientId:this.clientId,...e}))return;const n=this.getIdTokenCredential(r,t);n&&this.credentialMatchesFilter(n,e)&&o.set(r,n)}),o}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return(!t.clientId||-1!==r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,r,n){const o=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);const i=Ei.createSearchScopes(t.scopes),a=t.authenticationScheme||J.BEARER,s=a&&a.toLowerCase()!==J.BEARER.toLowerCase()?H.ACCESS_TOKEN_WITH_AUTH_SCHEME:H.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:n||e.tenantId,target:i,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},l=r&&r.accessToken||this.getTokenKeys().accessToken,u=[];l.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){const t=this.getAccessTokenCredential(e,o);t&&this.credentialMatchesFilter(t,c)&&u.push(t)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),u.forEach(e=>{this.removeAccessToken(zo(e),o)}),this.performanceClient.addFields({multiMatchedAT:u.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),u[0])}accessTokenKeyMatchesFilter(e,t,r){const n=e.toLowerCase();if(t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===n.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===n.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===n.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(r&&!n.includes(e[t].toLowerCase()))return!1;if(!r&&n.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const r=this.getTokenKeys(),n=[];return r.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;const o=this.getAccessTokenCredential(r,t);o&&this.credentialMatchesFilter(o,e)&&n.push(o)}),n}getRefreshToken(e,t,r,n,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?z:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:H.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e,r);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}});const l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&o&&r&&o.addFields({multiMatchedRT:l},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return(!t.familyId||-1!==r.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==r.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),n=Object.keys(r).map(e=>r[e]),o=n.length;if(o<1)return null;if(o>1)throw No(to);return n[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==z)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!==typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const r=function(e,t){let r;const n=e.canonicalAuthority;if(n){const o=new Bi(n).getUrlComponents().HostNameAndPort;r=Wi(o,e.cloudDiscoveryMetadata?.metadata,G,t)||Wi(o,Gi.metadata,Q,t)||e.knownAuthorities}return r||[]}(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==H.ACCESS_TOKEN&&e.credentialType!==H.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return Ei.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(U)}isAuthorityMetadata(e){return-1!==e.indexOf(B)}generateAuthorityMetadataCacheKey(e){return`${B}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class ta extends ea{async setAccount(){throw No(Eo)}getAccount(){throw No(Eo)}async setIdTokenCredential(){throw No(Eo)}getIdTokenCredential(){throw No(Eo)}async setAccessTokenCredential(){throw No(Eo)}getAccessTokenCredential(){throw No(Eo)}async setRefreshTokenCredential(){throw No(Eo)}getRefreshTokenCredential(){throw No(Eo)}setAppMetadata(){throw No(Eo)}getAppMetadata(){throw No(Eo)}setServerTelemetry(){throw No(Eo)}getServerTelemetry(){throw No(Eo)}setAuthorityMetadata(){throw No(Eo)}getAuthorityMetadata(){throw No(Eo)}getAuthorityMetadataKeys(){throw No(Eo)}setThrottlingCache(){throw No(Eo)}getThrottlingCache(){throw No(Eo)}removeItem(){throw No(Eo)}getKeys(){throw No(Eo)}getAccountKeys(){throw No(Eo)}getTokenKeys(){throw No(Eo)}}const ra="acquireTokenByCode",na="acquireTokenByRefreshToken",oa="acquireTokenSilent",ia="acquireTokenSilentAsync",aa="acquireTokenPopup",sa="acquireTokenPreRedirect",ca="acquireTokenRedirect",la="cryptoOptsGetPublicKeyThumbprint",ua="cryptoOptsSignJwt",da="silentCacheClientAcquireToken",ha="silentIframeClientAcquireToken",ga="awaitConcurrentIframe",fa="silentRefreshClientAcquireToken",pa="ssoSilent",ma="standardInteractionClientGetDiscoveredAuthority",ya="nativeInteractionClientAcquireToken",va="networkClientSendPostRequestAsync",ba="refreshTokenClientExecutePostToTokenEndpoint",wa="authorizationCodeClientExecutePostToTokenEndpoint",ka="refreshTokenClientExecuteTokenRequest",Ca="refreshTokenClientAcquireToken",Ia="refreshTokenClientAcquireTokenWithCachedRefreshToken",Aa="refreshTokenClientAcquireTokenByRefreshToken",xa="refreshTokenClientCreateTokenRequestBody",Sa="acquireTokenFromCache",Ta="silentFlowClientAcquireCachedToken",Ea="silentFlowClientGenerateResultFromCacheRecord",Pa="acquireTokenBySilentIframe",Ra="initializeBaseRequest",_a="initializeSilentRequest",Na="initializeClientApplication",Ma="initializeCache",Oa="silentIframeClientTokenHelper",La="silentHandlerInitiateAuthRequest",qa="silentHandlerMonitorIframeForHash",ja="silentHandlerLoadFrame",Da="silentHandlerLoadFrameSync",Fa="standardInteractionClientCreateAuthCodeClient",Ha="standardInteractionClientGetClientConfiguration",Ua="standardInteractionClientInitializeAuthorizationRequest",za="getAuthCodeUrl",Ba="getStandardParams",Ka="handleCodeResponseFromServer",Ga="handleCodeResponse",Va="handleResponseEar",Wa="handleResponsePlatformBroker",Qa="handleResponseCode",Ya="updateTokenEndpointAuthority",Ja="authClientAcquireToken",$a="authClientExecuteTokenRequest",Xa="authClientCreateTokenRequestBody",Za="popTokenGenerateCnf",es="popTokenGenerateKid",ts="handleServerTokenResponse",rs="deserializeResponse",ns="authorityFactoryCreateDiscoveredInstance",os="authorityResolveEndpointsAsync",is="authorityGetCloudDiscoveryMetadataFromNetwork",as="authorityUpdateCloudDiscoveryMetadata",ss="authorityGetEndpointMetadataFromNetwork",cs="authorityUpdateEndpointMetadata",ls="authorityUpdateMetadataWithRegionalInformation",us="regionDiscoveryDetectRegion",ds="regionDiscoveryGetRegionFromIMDS",hs="regionDiscoveryGetCurrentVersion",gs="acquireTokenByCodeAsync",fs="handleRedirectPromise",ps="handleNativeRedirectPromise",ms="nativeMessageHandlerHandshake",ys="removeHiddenIframe",vs="clearTokensAndKeysWithClaims",bs="cacheManagerGetRefreshToken",ws="importExistingCache",ks="setUserData",Cs="localStorageUpdated",Is="generatePkceCodes",As="generateCodeVerifier",xs="generateCodeChallengeFromVerifier",Ss="sha256Digest",Ts="getRandomValues",Es="generateHKDF",Ps="generateBaseKey",Rs="base64Decode",_s="urlEncodeArr",Ns="encrypt",Ms="decrypt",Os="generateEarKey",Ls="decryptEarResponse",qs=(new Map([[ra,"ATByCode"],[na,"ATByRT"],[oa,"ATS"],[ia,"ATSAsync"],[aa,"ATPopup"],[ca,"ATRedirect"],[la,"CryptoGetPKThumb"],[ua,"CryptoSignJwt"],[da,"SltCacheClientAT"],[ha,"SltIframeClientAT"],[fa,"SltRClientAT"],[pa,"SsoSlt"],[ma,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[ya,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[va,"NetClientSendPost"],[ba,"RTClientExecPost"],[wa,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[ka,"RTClientExecTReq"],[Ca,"RTClientAT"],[Ia,"RTClientATWithCachedRT"],[Aa,"RTClientATByRT"],[xa,"RTClientCreateTReqBody"],[Sa,"ATFromCache"],[Ta,"SltFlowClientATCached"],[Ea,"SltFlowClientGenResFromCache"],[Pa,"ATBySltIframe"],[Ra,"InitBaseReq"],[_a,"InitSltReq"],[Na,"InitClientApplication"],[Ma,"InitCache"],[ws,"importCache"],[ks,"setUserData"],[Cs,"localStorageUpdated"],[Oa,"SIClientTHelper"],[La,"SHandlerInitAuthReq"],[qa,"SltHandlerMonitorIframeForHash"],[ja,"SHandlerLoadFrame"],[Da,"SHandlerLoadFrameSync"],[Fa,"StdIntClientCreateAuthCodeClient"],[Ha,"StdIntClientGetClientConf"],[Ua,"StdIntClientInitAuthReq"],[za,"GetAuthCodeUrl"],[Ka,"HandleCodeResFromServer"],[Ga,"HandleCodeResp"],[Va,"HandleRespEar"],[Qa,"HandleRespCode"],[Wa,"HandleRespPlatBroker"],[Ya,"UpdTEndpointAuth"],[Ja,"AuthClientAT"],[$a,"AuthClientExecTReq"],[Xa,"AuthClientCreateTReqBody"],[Za,"PopTGenCnf"],[es,"PopTGenKid"],[ts,"HandleServerTRes"],[rs,"DeserializeRes"],[ns,"AuthFactCreateDiscInst"],[os,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[is,"AuthGetCDMetaFromNet"],[as,"AuthUpdCDMeta"],[ss,"AuthUpdCDMetaFromNet"],[cs,"AuthUpdEndpointMeta"],[ls,"AuthUpdMetaWithRegInfo"],[us,"RegDiscDetectReg"],[ds,"RegDiscGetRegFromIMDS"],[hs,"RegDiscGetCurrentVer"],[gs,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[fs,"HandleRedirectPromise"],[ps,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[ms,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[ys,"RemoveHiddenIframe"],[vs,"ClearTAndKeysWithClaims"],[bs,"CacheManagerGetRT"],[Is,"GenPkceCodes"],[As,"GenCodeVerifier"],[xs,"GenCodeChallengeFromVerifier"],[Ss,"Sha256Digest"],[Ts,"GetRandomValues"],[Es,"genHKDF"],[Ps,"genBaseKey"],[Rs,"b64Decode"],[_s,"urlEncArr"],[Ns,"encrypt"],[Ms,"decrypt"],[Os,"genEarKey"],[Ls,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount"]);class js{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Ds{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:qs,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new js}}startPerformanceMeasurement(){return new js}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Fs={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Hs={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:jt.Info,correlationId:i.EMPTY_STRING},Us={claimsBasedCachingEnabled:!1},zs={async sendGetRequestAsync(){throw No(Eo)},async sendPostRequestAsync(){throw No(Eo)}},Bs={sku:i.SKU,version:Lo,cpu:i.EMPTY_STRING,os:i.EMPTY_STRING},Ks={clientSecret:i.EMPTY_STRING,clientAssertion:void 0},Gs={azureCloudInstance:Dn,tenant:`${i.DEFAULT_COMMON_TENANT}`},Vs={application:{appName:"",appVersion:""}};function Ws(e){return e.authOptions.authority.options.protocolMode===qn}const Qs={sendGetRequestAsync:()=>Promise.reject(No(Eo)),sendPostRequestAsync:()=>Promise.reject(No(Eo))},Ys="pkce_not_created",Js="ear_jwk_empty",$s="ear_jwe_empty",Xs="crypto_nonexistent",Zs="empty_navigate_uri",ec="hash_empty_error",tc="no_state_in_hash",rc="hash_does_not_contain_known_properties",nc="unable_to_parse_state",oc="state_interaction_type_mismatch",ic="interaction_in_progress",ac="popup_window_error",sc="empty_window_error",cc="user_cancelled",lc="monitor_popup_timeout",uc="monitor_window_timeout",dc="redirect_in_iframe",hc="block_iframe_reload",gc="block_nested_popups",fc="iframe_closed_prematurely",pc="silent_logout_unsupported",mc="no_account_error",yc="silent_prompt_value_error",vc="no_token_request_cache_error",bc="unable_to_parse_token_request_cache_error",wc="auth_request_not_set_error",kc="invalid_cache_type",Cc="non_browser_environment",Ic="database_not_open",Ac="no_network_connectivity",xc="post_request_failed",Sc="get_request_failed",Tc="failed_to_parse_response",Ec="unable_to_load_token",Pc="crypto_key_not_found",Rc="auth_code_required",_c="auth_code_or_nativeAccountId_required",Nc="spa_code_and_nativeAccountId_present",Mc="database_unavailable",Oc="unable_to_acquire_token_from_native_platform",Lc="native_handshake_timeout",qc="native_extension_not_installed",jc="native_connection_not_established",Dc="uninitialized_public_client_application",Fc="native_prompt_not_supported",Hc="invalid_base64_string",Uc="invalid_pop_token_request",zc="failed_to_build_headers",Bc="failed_to_parse_headers",Kc="failed_to_decrypt_ear_response",Gc="timed_out",Vc="For more visit: aka.ms/msaljs/browser-errors",Wc={[Ys]:"The PKCE code challenge and verifier could not be generated.",[Js]:"No EAR encryption key provided. This is unexpected.",[$s]:"Server response does not contain ear_jwe property. This is unexpected.",[Xs]:"The crypto object or function is not available.",[Zs]:"Navigation URI is empty. Please check stack trace for more info.",[ec]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Vc}`,[tc]:"Hash does not contain state. Please verify that the request originated from msal.",[rc]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Vc}`,[nc]:"Unable to parse state. Please verify that the request originated from msal.",[oc]:"Hash contains state but the interaction type does not match the caller.",[ic]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Vc}`,[ac]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[sc]:"window.open returned null or undefined window object.",[cc]:"User cancelled the flow.",[lc]:`Token acquisition in popup failed due to timeout.  ${Vc}`,[uc]:`Token acquisition in iframe failed due to timeout.  ${Vc}`,[dc]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[hc]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Vc}`,[gc]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[fc]:"The iframe being monitored was closed prematurely.",[pc]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[mc]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[yc]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[vc]:"No token request found in cache.",[bc]:"The cached token request could not be parsed.",[wc]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[kc]:"Invalid cache type",[Cc]:"Login and token requests are not supported in non-browser environments.",[Ic]:"Database is not open!",[Ac]:"No network connectivity. Check your internet connection.",[xc]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Sc]:"Network request failed. Please check the network trace to determine root cause.",[Tc]:"Failed to parse network response. Check network trace.",[Ec]:"Error loading token to cache.",[Pc]:"Cryptographic Key or Keypair not found in browser storage.",[Rc]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[_c]:"An authorization code or nativeAccountId must be provided to this flow.",[Nc]:"Request cannot contain both spa code and native account id.",[Mc]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Oc]:`Unable to acquire token from native platform.  ${Vc}`,[Lc]:"Timed out while attempting to establish connection to browser extension",[qc]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[jc]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Vc}`,[Dc]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Vc}`,[Fc]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Hc]:"Invalid base64 encoded string.",[Uc]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[zc]:"Failed to build request headers object.",[Bc]:"Failed to parse response headers",[Kc]:"Failed to decrypt ear response",[Gc]:"The request timed out."};class Qc extends ve{constructor(e,t){super(e,Wc[e],t),Object.setPrototypeOf(this,Qc.prototype),this.name="BrowserAuthError"}}function Yc(e,t){return new Qc(e,t)}class Jc{navigateInternal(e,t){return Jc.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Jc.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e,r)=>{setTimeout(()=>{r(Yc(Gc,"failed_to_redirect"))},t.timeout)})}}class $c extends ve{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,$c.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function Xc(e,t,r,n){return e.errorMessage=`${e.errorMessage}, additionalErrorInfo: error.name:${n?.name}, error.message:${n?.message}`,new $c(e,t,r)}class Zc{async sendGetRequestAsync(e,t){let r,n={},o=0;const i=el(t);try{r=await fetch(e,{method:Qe,headers:i})}catch(a){throw Xc(Yc(window.navigator.onLine?Sc:Ac),void 0,void 0,a)}n=tl(r.headers);try{return o=r.status,{headers:n,body:await r.json(),status:o}}catch(a){throw Xc(Yc(Tc),o,n,a)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",n=el(t);let o,i=0,a={};try{o=await fetch(e,{method:Ye,headers:n,body:r})}catch(s){throw Xc(Yc(window.navigator.onLine?xc:Ac),void 0,void 0,s)}a=tl(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(s){throw Xc(Yc(Tc),i,a,s)}}}function el(e){try{const t=new Headers;if(!e||!e.headers)return t;const r=e.headers;return Object.entries(r).forEach(e=>{let[r,n]=e;t.append(r,n)}),t}catch(t){throw Xc(Yc(zc),void 0,void 0,t)}}function tl(e){try{const t={};return e.forEach((e,r)=>{t[r]=e}),t}catch(t){throw Yc(Bc)}}function rl(e){return encodeURIComponent(ol(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function nl(e){return il(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ol(e){return il((new TextEncoder).encode(e))}function il(e){const t=Array.from(e,e=>String.fromCodePoint(e)).join("");return btoa(t)}function al(e){return(new TextDecoder).decode(sl(e))}function sl(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Yc(Hc)}const r=atob(t);return Uint8Array.from(r,e=>e.codePointAt(0)||0)}const cl="AES-GCM",ll="HKDF",ul="SHA-256",dl=new Uint8Array([1,0,1]),hl="0123456789abcdef",gl=new Uint32Array(1),fl="raw",pl="encrypt",ml="decrypt",yl={name:"RSASSA-PKCS1-v1_5",hash:ul,modulusLength:2048,publicExponent:dl};async function vl(e,t,r){t?.addQueueMeasurement(Ss,r);const n=(new TextEncoder).encode(e);return window.crypto.subtle.digest(ul,n)}function bl(e){return window.crypto.getRandomValues(e)}function wl(){return window.crypto.getRandomValues(gl),gl[0]}function kl(){const e=Date.now(),t=1024*wl()+(1023&wl()),r=new Uint8Array(16),n=Math.trunc(t/2**30),o=t&2**30-1,i=wl();r[0]=e/2**40,r[1]=e/2**32,r[2]=e/2**24,r[3]=e/65536,r[4]=e/256,r[5]=e,r[6]=112|n>>>8,r[7]=n,r[8]=128|o>>>24,r[9]=o>>>16,r[10]=o>>>8,r[11]=o,r[12]=i>>>24,r[13]=i>>>16,r[14]=i>>>8,r[15]=i;let a="";for(let s=0;s<r.length;s++)a+=hl.charAt(r[s]>>>4),a+=hl.charAt(15&r[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function Cl(e){return window.crypto.subtle.exportKey("jwk",e)}async function Il(){const e=await xl(),t={alg:"dir",kty:"oct",k:nl(new Uint8Array(e))};return ol(JSON.stringify(t))}async function Al(e,t){const r=t.split(".");if(5!==r.length)throw Yc(Kc,"jwe_length");const n=await async function(e){const t=al(e),r=sl(JSON.parse(t).k);return window.crypto.subtle.importKey(fl,r,cl,!1,[ml])}(e).catch(()=>{throw Yc(Kc,"import_key")});try{const e=(new TextEncoder).encode(r[0]),t=sl(r[2]),o=sl(r[3]),i=sl(r[4]),a=8*i.byteLength,s=new Uint8Array(o.length+i.length);s.set(o),s.set(i,o.length);const c=await window.crypto.subtle.decrypt({name:cl,iv:t,tagLength:a,additionalData:e},n,s);return(new TextDecoder).decode(c)}catch(o){throw Yc(Kc,"decrypt")}}async function xl(){const e=await window.crypto.subtle.generateKey({name:cl,length:256},!0,[pl,ml]);return window.crypto.subtle.exportKey(fl,e)}async function Sl(e){return window.crypto.subtle.importKey(fl,e,ll,!1,["deriveKey"])}async function Tl(e,t,r){return window.crypto.subtle.deriveKey({name:ll,salt:t,hash:ul,info:(new TextEncoder).encode(r)},e,{name:cl,length:256},!1,[pl,ml])}async function El(e,t,r){const n=(new TextEncoder).encode(t),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await Tl(e,o,r),a=await window.crypto.subtle.encrypt({name:cl,iv:new Uint8Array(12)},i,n);return{data:nl(new Uint8Array(a)),nonce:nl(o)}}async function Pl(e,t,r,n){const o=sl(n),i=await Tl(e,sl(t),r),a=await window.crypto.subtle.decrypt({name:cl,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(a)}async function Rl(e){const t=await vl(e);return nl(new Uint8Array(t))}function _l(e){e.location.hash="","function"===typeof e.history.replaceState&&e.history.replaceState(null,"",`${e.location.origin}${e.location.pathname}${e.location.search}`)}function Nl(){return window.parent!==window}function Ml(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Ol(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf(`${Re}.`))throw Yc(gc)}function Ll(){if("undefined"===typeof window)throw Yc(Cc)}function ql(e){if(!e)throw Yc(Dc)}function jl(e){Ll(),function(){if(Bi.hashContainsKnownProperties(window.location.hash)&&Nl())throw Yc(hc)}(),Ol(),ql(e)}function Dl(e,t){if(jl(e),function(e){if(Nl()&&!e)throw Yc(dc)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===We&&!t.cache.storeAuthStateInCookie)throw xe(Ce)}function Fl(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch{}},1e4)}const Hl=1e4;const Ul="4.14.0";class zl{static loggerCallback(e,t){switch(e){case jt.Error:return void console.error(t);case jt.Info:return void console.info(t);case jt.Verbose:return void console.debug(t);case jt.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:r,cache:n,system:o,telemetry:a}=e;const s={clientId:i.EMPTY_STRING,authority:`${i.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:i.EMPTY_STRING,authorityMetadata:i.EMPTY_STRING,redirectUri:"undefined"!==typeof window?Ml():"",postLogoutRedirectUri:i.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Ln,OIDCOptions:{serverResponseType:_,defaultScopes:[i.OPENID_SCOPE,i.PROFILE_SCOPE,i.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Dn,tenant:i.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},c={cacheLocation:Ve,temporaryCacheLocation:Ve,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!n||n.cacheLocation!==Ge),claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:jt.Info,piiLoggingEnabled:!1},u={...{...Fs,loggerOptions:l,networkClient:t?new Zc:Qs,navigationClient:new Jc,loadFrameTimeout:0,windowHashTimeout:o?.loadFrameTimeout||6e4,iframeHashTimeout:o?.loadFrameTimeout||Hl,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:o?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:_e},...o,loggerOptions:o?.loggerOptions||l},d={application:{appName:i.EMPTY_STRING,appVersion:i.EMPTY_STRING},client:new Ds};r?.protocolMode!==qn&&r?.OIDCOptions&&new Dt(u.loggerOptions).warning(JSON.stringify(Si(ki)));if(r?.protocolMode&&r.protocolMode===qn&&u?.allowPlatformBroker)throw Si(Ci);return{auth:{...s,...r,OIDCOptions:{...s.OIDCOptions,...r?.OIDCOptions}},cache:{...c,...n},system:u,telemetry:{...d,...a}}}(e,this.browserEnvironment);try{t=window[Ve]}catch(c){}const r=t?.getItem("msal.browser.log.level"),n=t?.getItem("msal.browser.log.pii")?.toLowerCase(),o="true"===n||"false"!==n&&void 0,a={...this.config.system.loggerOptions},s=r&&Object.keys(jt).includes(r)?jt[r]:void 0;s&&(a.loggerCallback=zl.loggerCallback,a.logLevel=s),void 0!==o&&(a.piiLoggingEnabled=o),this.logger=new Dt(a,"@azure/msal-browser",Ul),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class Bl extends zl{getModuleName(){return Bl.MODULE_NAME}getId(){return Bl.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}Bl.MODULE_NAME="",Bl.ID="StandardOperatingContext";const Kl="missing_kid_error",Gl="missing_alg_error",Vl={[Kl]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Gl]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Wl extends ve{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Wl.prototype)}}function Ql(e){return new Wl(e,Vl[e])}class Yl{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Ql(Kl);if(!e.alg)throw Ql(Gl);const t=new Yl({typ:e.typ||fe,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class Jl{constructor(){this.dbName=Tt,this.version=1,this.tableName=Et,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",e=>{e.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",t=>{const r=t;this.db=r.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(Yc(Mc)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Yc(Ic));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);n.addEventListener("success",e=>{const r=e;this.closeConnection(),t(r.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,n)=>{if(!this.db)return n(Yc(Ic));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",()=>{this.closeConnection(),r()}),o.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Yc(Ic));const n=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);n.addEventListener("success",()=>{this.closeConnection(),t()}),n.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(Yc(Ic));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();r.addEventListener("success",t=>{const r=t;this.closeConnection(),e(r.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),t(e)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(Yc(Ic));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);n.addEventListener("success",e=>{const r=e;this.closeConnection(),t(1===r.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(Tt),n=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(n),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(n),e(!0))),r.addEventListener("error",()=>(clearTimeout(n),t(!1)))})}}class $l{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class Xl{constructor(e){this.inMemoryCache=new $l,this.indexedDBCache=new Jl,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Qc&&e.errorCode===Mc))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class Zl{constructor(e,t,r){this.logger=e,function(e){if(!window)throw Yc(Cc);if(!window.crypto)throw Yc(Xs);if(!e&&!window.crypto.subtle)throw Yc(Xs,"crypto_subtle_undefined")}(r??!1),this.cache=new Xl(this.logger),this.performanceClient=t}createNewGuid(){return kl()}base64Encode(e){return ol(e)}base64Decode(e){return al(e)}base64UrlEncode(e){return rl(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){const t=this.performanceClient?.startMeasurement(la,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(yl,e,t)}(Zl.EXTRACTABLE,Zl.POP_KEY_USAGES),n=await Cl(r.publicKey),o=eu({e:n.e,kty:n.kty,n:n.n}),i=await this.hashString(o),a=await Cl(r.privateKey),s=await async function(e,t,r){return window.crypto.subtle.importKey("jwk",e,yl,t,r)}(a,!1,["sign"]);return await this.cache.setItem(i,{privateKey:s,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),i}async removeTokenBindingKey(e){await this.cache.removeItem(e);if(await this.cache.containsKey(e))throw No(Co)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,n){const o=this.performanceClient?.startMeasurement(ua,n),i=await this.cache.getItem(t);if(!i)throw Yc(Pc);const a=await Cl(i.publicKey),s=eu(a),c=rl(JSON.stringify({kid:t})),l=rl(Yl.getShrHeaderString({...r?.header,alg:a.alg,kid:c}));e.cnf={jwk:JSON.parse(s)};const u=`${l}.${rl(JSON.stringify(e))}`,d=(new TextEncoder).encode(u),h=await async function(e,t){return window.crypto.subtle.sign(yl,e,t)}(i.privateKey,d),g=`${u}.${nl(new Uint8Array(h))}`;return o&&o.end({success:!0}),g}async hashString(e){return Rl(e)}}function eu(e){return JSON.stringify(e,Object.keys(e).sort())}Zl.POP_KEY_USAGES=["sign","verify"],Zl.EXTRACTABLE=!0;const tu=(e,t,r,n,o)=>function(){r.trace(`Executing function ${t}`);const i=n?.startMeasurement(t,o);if(o){const e=t+"CallCount";n?.incrementFields({[e]:1},o)}try{const n=e(...arguments);return i?.end({success:!0}),r.trace(`Returning result from ${t}`),n}catch(a){r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(a))}catch(a){r.trace("Unable to print error message.")}throw i?.end({success:!1},a),a}},ru=(e,t,r,n,o)=>function(){r.trace(`Executing function ${t}`);const i=n?.startMeasurement(t,o);if(o){const e=t+"CallCount";n?.incrementFields({[e]:1},o)}return n?.setPreQueueTime(t,o),e(...arguments).then(e=>(r.trace(`Returning result from ${t}`),i?.end({success:!0}),e)).catch(e=>{r.trace(`Error occurred in ${t}`);try{r.trace(JSON.stringify(e))}catch(e){r.trace("Unable to print error message.")}throw i?.end({success:!1},e),e})};class nu{constructor(e,t,r,n){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=n}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(us,this.correlationId);let r=e;if(r)t.region_source=oe;else{const e=nu.IMDS_OPTIONS;try{const n=await ru(this.getRegionFromIMDS.bind(this),ds,this.logger,this.performanceClient,this.correlationId)(i.IMDS_VERSION,e);if(n.status===a&&(r=n.body,t.region_source=ie),n.status===c){const n=await ru(this.getCurrentVersion.bind(this),hs,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=ne,null;const o=await ru(this.getRegionFromIMDS.bind(this),ds,this.logger,this.performanceClient,this.correlationId)(n,e);o.status===a&&(r=o.body,t.region_source=ie)}}catch(n){return t.region_source=ne,null}}return r||(t.region_source=ne),r||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(ds,this.correlationId),this.networkInterface.sendGetRequestAsync(`${i.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,i.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(hs,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${i.IMDS_ENDPOINT}?format=json`,e);return t.status===c&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(t){return null}}}nu.IMDS_OPTIONS={headers:{Metadata:"true"}};class ou{constructor(e,t,r,n,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=n,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new nu(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(i.CIAM_AUTH_URL))return ji;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case i.ADFS:return Li;case i.DSTS:return qi}return Oi}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Bi(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw No(Bn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw No(Bn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw No(Bn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw No(Io);return this.replacePath(this.metadata.end_session_endpoint)}throw No(Bn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw No(Bn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw No(Bn)}canReplaceTenant(e){return 1===e.PathSegments.length&&!ou.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Oi&&this.protocolMode!==qn}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const r=new Bi(this.metadata.canonical_authority).getUrlComponents(),n=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,o)=>{let i=n[o];if(0===o&&this.canReplaceTenant(r)){const e=new Bi(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose(`Replacing tenant domain name ${i} with id ${e}`),i=e)}e!==i&&(t=t.replace(`/${i}/`,`/${e}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Li||this.protocolMode===qn&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(os,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await ru(this.updateCloudDiscoveryMetadata.bind(this),as,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await ru(this.updateEndpointMetadata.bind(this),cs,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Xo(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==V&&r?.source!==V&&(e.expiresAt=Xo(),e.canonical_authority=this.canonicalAuthority);const n=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(n,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(cs,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Q&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){Zo(e,await ru(this.updateMetadataWithRegionalInformation.bind(this),ls,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await ru(this.getEndpointMetadataFromNetwork.bind(this),ss,this.logger,this.performanceClient,this.correlationId)();if(r)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(r=await ru(this.updateMetadataWithRegionalInformation.bind(this),ls,this.logger,this.performanceClient,this.correlationId)(r)),Zo(e,r,!0),W;throw No(Gn,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Zo(e,t,!1),{source:G};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return Zo(e,t,!1),{source:Q,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=ti(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:V}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Bi(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Si(pi)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(ss,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const r=await this.networkInterface.sendGetRequestAsync(t,e),n=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(r.body);return n?r.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${r}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Ki?Ki[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(ls,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==i.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ae,this.regionDiscoveryMetadata.region_used=t,ou.replaceWithRegionalInformation(e,t);const r=await ru(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),us,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(r)return this.regionDiscoveryMetadata.region_outcome=se,this.regionDiscoveryMetadata.region_used=r,ou.replaceWithRegionalInformation(e,r);this.regionDiscoveryMetadata.region_outcome=ce}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(as,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await ru(this.getCloudDiscoveryMetadataFromNetwork.bind(this),is,this.logger,this.performanceClient,this.correlationId)();if(r)return ei(e,r,!0),W;throw Si(mi)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||i.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||i.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||i.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),ei(e,t,!1),G;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(r=this.hostnameAndPort,Qi(Gi.metadata,r));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),ei(e,t,!1),Q;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var r;const n=ti(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!n?(this.logger.verbose("Found cloud discovery metadata in the cache."),V):(n&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ji)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),ou.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Qi(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Si(fi)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),ou.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(is,this.correlationId);const e=`${i.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const n=await this.networkInterface.sendGetRequestAsync(e,t);let o,a;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(n.body))o=n.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(n.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${n.status}`),o=n.body,o.error===i.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Qi(a,this.hostnameAndPort)}catch(n){if(n instanceof ve)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${n.errorCode}\nError Description: ${n.errorMessage}`);else{const e=n;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${e.name}\nError Description: ${e.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=ou.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&Bi.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==Dn){const e=t.tenant?t.tenant:i.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${e}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return i.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw No(Bn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Vi.has(e)}static isPublicCloudAuthority(e){return i.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const n=new Bi(e);n.validateAsUri();const o=n.getUrlComponents();let a=`${t}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${t}.${i.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const s=Bi.constructAuthorityUriFromObject({...n.getUrlComponents(),HostNameAndPort:a}).urlString;return r?`${s}?${r}`:s}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=ou.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=ou.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=ou.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const r=new Bi(e).getUrlComponents();if(0===r.PathSegments.length&&r.HostNameAndPort.endsWith(i.CIAM_AUTH_URL)){t=`${t}${r.HostNameAndPort.split(".")[0]}${i.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}function iu(e){return e.endsWith(i.FORWARD_SLASH)?e:`${e}${i.FORWARD_SLASH}`}function au(e,t,r){return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:r,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||t.tokenBodyParameters?.clientId}}ou.reservedTenantDomains=new Set(["{tenant}","{tenantid}",k,I,C]);const su=864e5,cu="Lax",lu="None";class uu{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let n=0;n<r.length;n++){const e=r[n],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}getUserData(){throw No(Eo)}setItem(e,t,r){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:cu,i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${o};`;if(r){const e=function(e){const t=new Date,r=new Date(t.getTime()+e*su);return r.toUTCString()}(r);i+=`expires=${e};`}(n||o===lu)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(No(Eo))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(e=>{const r=decodeURIComponent(e).trim().split("=");t.push(r[0])}),t}containsKey(e){return this.getKeys().includes(e)}}function du(e){const t=e.getItem(ot);return t?JSON.parse(t):[]}function hu(e,t){const r=t.getItem(`${it}.${e}`);if(r){const e=JSON.parse(r);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const gu="msal.cache.encryption";class fu{constructor(e,t,r){if(!window.localStorage)throw xe(we);this.memoryStorage=new $l,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=r,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new uu,r=t.getItem(gu);let n={key:"",id:""};if(r)try{n=JSON.parse(r)}catch(o){}if(n.key&&n.id){const t=tu(sl,Rs,this.logger,this.performanceClient,e)(n.key);this.encryptionCookie={id:n.id,key:await ru(Sl,Es,this.logger,this.performanceClient,e)(t)},await ru(this.importExistingCache.bind(this),ws,this.logger,this.performanceClient,e)(e)}else{this.clear();const r=kl(),n=await ru(xl,Ps,this.logger,this.performanceClient,e)(),o=tu(nl,_s,this.logger,this.performanceClient,e)(new Uint8Array(n));this.encryptionCookie={id:r,key:await ru(Sl,Es,this.logger,this.performanceClient,e)(n)};const i={id:r,key:o};t.setItem(gu,JSON.stringify(i),0,!0,lu)}this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Yc(Dc);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,r,n){if(!this.initialized||!this.encryptionCookie)throw Yc(Dc);const{data:o,nonce:i}=await ru(El,Ns,this.logger,this.performanceClient,r)(this.encryptionCookie.key,t,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:i,data:o,lastUpdatedAt:n};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();du(this).forEach(e=>this.removeItem(e));const e=hu(this.clientId,this);e.idToken.forEach(e=>this.removeItem(e)),e.accessToken.forEach(e=>this.removeItem(e)),e.refreshToken.forEach(e=>this.removeItem(e)),this.getKeys().forEach(e=>{(e.startsWith(i.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=du(this);t=await this.importArray(t,e),this.setItem(ot,JSON.stringify(t));const r=hu(this.clientId,this);r.idToken=await this.importArray(r.idToken,e),r.accessToken=await this.importArray(r.accessToken,e),r.refreshToken=await this.importArray(r.refreshToken,e),this.setItem(`${it}.${this.clientId}`,JSON.stringify(r))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const r=this.getItem(e);if(!r)return null;let n;try{n=JSON.parse(r)}catch(o){return null}return n.id&&n.nonce&&n.data?n.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):ru(Pl,Ms,this.logger,this.performanceClient,t)(this.encryptionCookie.key,n.nonce,this.getContext(e),n.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){const r=[],n=[];return e.forEach(e=>{const o=this.getItemFromEncryptedCache(e,t).then(t=>{t?(this.memoryStorage.setItem(e,t),r.push(e)):this.removeItem(e)});n.push(o)}),await Promise.all(n),r}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(Cs);t.add({isBackground:!0});const{key:r,value:n,context:o}=e.data;return r?o&&o!==this.clientId?(this.logger.trace(`Ignoring broadcast event from clientId: ${o}`),void t.end({success:!1,errorCode:"contextMismatch"})):(n?(this.memoryStorage.setItem(r,n),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(r),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class pu{constructor(){if(!window.sessionStorage)throw xe(we)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}class mu extends ea{constructor(e,t,r,n,o,i,a){super(e,r,n,o,a),this.cacheConfig=t,this.logger=n,this.internalStorage=new $l,this.browserStorage=yu(e,t.cacheLocation,n,o),this.temporaryCacheStorage=yu(e,t.temporaryCacheLocation,n,o),this.cookieStorage=new uu,this.eventHandler=i}async initialize(e){await this.browserStorage.initialize(e),this.trackVersionChanges(e)}trackVersionChanges(e){const t=this.browserStorage.getItem(at);t&&(this.logger.info(`MSAL.js was last initialized by version: ${t}`),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==Ul&&this.setItem(at,Ul,e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}setItem(e,t,r){let n=[];for(let i=0;i<=20;i++)try{this.browserStorage.setItem(e,t),i>0&&this.removeAccessTokenKeys(n.slice(0,i),r);break}catch(o){const a=Zi(o);if(!(a.errorCode===Yi&&i<20))throw a;if(n.length||(n=e===`${it}.${this.clientId}`?JSON.parse(t).accessToken:this.getTokenKeys().accessToken),n.length<=i)throw a;this.removeAccessToken(n[i],r,!1)}}async setUserData(e,t,r,n){let o=[];for(let a=0;a<=20;a++)try{await ru(this.browserStorage.setUserData.bind(this.browserStorage),ks,this.logger,this.performanceClient)(e,t,r,n),a>0&&this.removeAccessTokenKeys(o.slice(0,a),r);break}catch(i){const e=Zi(i);if(!(e.errorCode===Yi&&a<20))throw e;if(o.length||(o=this.getTokenKeys().accessToken),o.length<=a)throw e;this.removeAccessToken(o[a],r,!1)}}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.browserStorage.getUserData(e);if(!r)return this.removeAccountKeyFromMap(e,t),null;const n=this.validateAndParseJson(r);return n&&Fi.isAccountEntity(n)?ea.toObject(new Fi,n):null}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey(),n=Date.now().toString();e.lastUpdatedAt=n,await this.setUserData(r,JSON.stringify(e),t,n);const o=this.addAccountKeyToMap(r,t);this.cacheConfig.cacheLocation===Ge&&o&&this.eventHandler.emitEvent(Bt,void 0,e.getAccountInfo())}getAccountKeys(){return du(this.browserStorage)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();return-1===r.indexOf(e)?(r.push(e),this.setItem(ot,JSON.stringify(r),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),n=r.indexOf(e);if(n>-1){if(r.splice(n,1),0===r.length)return void this.removeItem(ot);this.setItem(ot,JSON.stringify(r),t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){super.removeAccount(e,t),this.removeAccountKeyFromMap(e,t)}removeAccountContext(e,t){super.removeAccountContext(e,t),this.cacheConfig.cacheLocation===Ge&&this.eventHandler.emitEvent(Kt,void 0,e.getAccountInfo())}removeIdToken(e,t){super.removeIdToken(e,t);const r=this.getTokenKeys(),n=r.idToken.indexOf(e);n>-1&&(this.logger.info("idToken removed from tokenKeys map"),r.idToken.splice(n,1),this.setTokenKeys(r,t))}removeAccessToken(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super.removeAccessToken(e,t),r&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t){this.logger.trace("removeAccessTokenKey called");const r=this.getTokenKeys();let n=0;if(e.forEach(e=>{const t=r.accessToken.indexOf(e);t>-1&&(r.accessToken.splice(t,1),n++)}),n>0)return this.logger.info(`removed ${n} accessToken keys from tokenKeys map`),void this.setTokenKeys(r,t)}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const r=this.getTokenKeys(),n=r.refreshToken.indexOf(e);n>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),r.refreshToken.splice(n,1),this.setTokenKeys(r,t))}getTokenKeys(){return hu(this.clientId,this.browserStorage)}setTokenKeys(e,t){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(`${it}.${this.clientId}`,JSON.stringify(e),t):this.removeItem(`${it}.${this.clientId}`)}getIdTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const n=this.validateAndParseJson(r);return n&&(o=n)&&Vo(o)&&o.hasOwnProperty("realm")&&o.credentialType===H.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null);var o}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=zo(e),n=Date.now().toString();e.lastUpdatedAt=n,await this.setUserData(r,JSON.stringify(e),t,n);const o=this.getTokenKeys();-1===o.idToken.indexOf(r)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(r),this.setTokenKeys(o,t))}getAccessTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const n=this.validateAndParseJson(r);return n&&(o=n)&&Vo(o)&&o.hasOwnProperty("realm")&&o.hasOwnProperty("target")&&(o.credentialType===H.ACCESS_TOKEN||o.credentialType===H.ACCESS_TOKEN_WITH_AUTH_SCHEME)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null);var o}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=zo(e),n=Date.now().toString();e.lastUpdatedAt=n,await this.setUserData(r,JSON.stringify(e),t,n);const o=this.getTokenKeys(),i=o.accessToken.indexOf(r);-1!==i&&o.accessToken.splice(i,1),this.logger.trace(`access token ${-1===i?"added to":"updated in"} map`),o.accessToken.push(r),this.setTokenKeys(o,t)}getRefreshTokenCredential(e,t){const r=this.browserStorage.getUserData(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const n=this.validateAndParseJson(r);return n&&(o=n)&&Vo(o)&&o.credentialType===H.REFRESH_TOKEN?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null);var o}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=zo(e),n=Date.now().toString();e.lastUpdatedAt=n,await this.setUserData(r,JSON.stringify(e),t,n);const o=this.getTokenKeys();-1===o.refreshToken.indexOf(r)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(r),this.setTokenKeys(o,t))}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&(n=e,(o=r)&&0===n.indexOf(U)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var n,o}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function(e){let{environment:t,clientId:r}=e;return[U,t,r].join(D).toLowerCase()}(e);this.setItem(r,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){const r=0===e.indexOf(Y.CACHE_KEY);let n=!0;return t&&(n=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),r&&n}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),r)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){return!!t&&0===e.indexOf(B)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,t){this.internalStorage.setItem(st,e),this.internalStorage.setItem(ct,t)}getWrapperMetadata(){return[this.internalStorage.getItem(st)||i.EMPTY_STRING,this.internalStorage.getItem(ct)||i.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey(w),r=this.browserStorage.getItem(t);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(r);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const r=this.generateCacheKey(w);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Do().toString()};this.setItem(r,JSON.stringify(n),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r);this.eventHandler.emitEvent(Gt)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&function(e,t){let r=!1;e&&(r=0===e.indexOf(Z));let n=!0;return t&&(n=t.hasOwnProperty("throttleTime")),r&&n}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),r)}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(r);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const n=this.temporaryCacheStorage.getItem(r);if(!n){if(this.cacheConfig.cacheLocation===Ge){const e=this.browserStorage.getItem(r);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),n}setTemporaryCache(e,t,r){const n=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(n,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(n,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(e=>{-1===e.indexOf(i.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{-1===e.indexOf(i.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(vs,e);const t=this.getTokenKeys();let r=0;t.accessToken.forEach(t=>{const n=this.getAccessTokenCredential(t,e);n?.requestedClaimsHash&&t.includes(n.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(t,e),r++)}),r>0&&this.logger.warning(`${r} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Ti.startsWith(e,i.CACHE_PREFIX)?e:`${i.CACHE_PREFIX}.${this.clientId}.${e}`}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(et)),this.removeTemporaryItem(this.generateCacheKey(tt)),this.removeTemporaryItem(this.generateCacheKey(Xe)),this.removeTemporaryItem(this.generateCacheKey(Ze)),this.removeTemporaryItem(this.generateCacheKey(nt)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const r=ol(JSON.stringify(e));if(this.setTemporaryCache(et,r,!0),t){const e=ol(t);this.setTemporaryCache(tt,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(et,!0);if(!e)throw Yc(vc);const t=this.getTemporaryCache(tt,!0);let r,n="";try{r=JSON.parse(al(e)),t&&(n=al(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${e}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),Yc(bc)}return[r,n]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(nt,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress()?.clientId;return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${i.CACHE_PREFIX}.${rt}`,t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(r){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),_l(window),null}}setInteractionInProgress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Je;const r=`${i.CACHE_PREFIX}.${rt}`;if(e){if(this.getInteractionInProgress())throw Yc(ic);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:t}),!1)}else e||this.getInteractionInProgress()?.clientId!==this.clientId||this.removeTemporaryItem(r)}async hydrateCache(e,t){const r=Bo(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId);let n;t.claims&&(n=await this.cryptoImpl.hashString(t.claims));const o={idToken:r,accessToken:Ko(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?Fo(e.expiresOn):0,e.extExpiresOn?Fo(e.extExpiresOn):0,al,void 0,e.tokenType,void 0,t.sshKid,t.claims,n)};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,t,r){try{await super.saveCacheRecord(e,t,r)}catch(n){if(n instanceof Xi&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(n){}throw n}}}function yu(e,t,r,n){try{switch(t){case Ge:return new fu(e,r,n);case Ve:return new pu}}catch(o){r.error(o)}return new $l}class vu{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Dt({}),"undefined"!==typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,r){if("undefined"!==typeof window){const n=r||kl();return this.eventCallbacks.has(n)?(this.logger.error(`Event callback with id: ${n} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(n,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${n}`),n)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,n){const o={eventType:e,interactionType:t||null,payload:r||null,error:n||null,timestamp:Date.now()};switch(e){case Bt:case Kt:case Gt:this.broadcastChannel?.postMessage(o);break;default:this.invokeCallbacks(o)}}invokeCallbacks(e){this.eventCallbacks.forEach((t,r)=>{let[n,o]=t;(0===o.length||o.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${r}: ${e.eventType}`),n.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel?.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel?.removeEventListener("message",this.invokeCrossTabCallbacks)}}const bu="home_account_id",wu="UPN",ku="client_id",Cu="redirect_uri",Iu="token_type",Au="req_cnf",xu="return_spa_code",Su="x-client-xtra-sku",Tu="brk_client_id",Eu="brk_redirect_uri",Pu="instance_aware";function Ru(e,t,r){if(!t)return;const n=e.get(ku);n&&e.has(Tu)&&r?.addFields({embeddedClientId:n,embeddedRedirectUri:e.get(Cu)},t)}function _u(e,t){e.set("response_type",t)}function Nu(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;!r||n.includes("openid")||t.includes("openid")||n.push("openid");const o=r?[...t||[],...n]:t||[],i=new Ei(o);e.set("scope",i.printScopes())}function Mu(e,t){e.set(ku,t)}function Ou(e,t){e.set(Cu,t)}function Lu(e,t){e.set("login_hint",t)}function qu(e,t){e.set(y,`UPN:${t}`)}function ju(e,t){e.set(y,`Oid:${t.uid}@${t.utid}`)}function Du(e,t){e.set("sid",t)}function Fu(e,t,r){const n=function(e,t){let r;if(e)try{r=JSON.parse(e)}catch(n){throw Si(li)}else r={};t&&t.length>0&&(r.hasOwnProperty(A)||(r[A]={}),r[A][x]={values:t});return JSON.stringify(r)}(t,r);try{JSON.parse(n)}catch(o){throw Si(li)}e.set("claims",n)}function Hu(e,t){e.set("client-request-id",t)}function Uu(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function zu(e,t){t?.appName&&e.set("x-app-name",t.appName),t?.appVersion&&e.set("x-app-ver",t.appVersion)}function Bu(e,t){t&&e.set("state",t)}function Ku(e,t){e.set("client_secret",t)}function Gu(e,t){t&&e.set("client_assertion",t)}function Vu(e,t){t&&e.set("client_assertion_type",t)}function Wu(e,t){e.set("grant_type",t)}function Qu(e){e.set("client_info","1")}function Yu(e){e.has(Pu)||e.set(Pu,"true")}function Ju(e,t){Object.entries(t).forEach(t=>{let[r,n]=t;!e.has(r)&&n&&e.set(r,n)})}function $u(e,t){t&&(e.set(Iu,J.POP),e.set(Au,t))}function Xu(e,t){t&&(e.set(Iu,J.SSH),e.set(Au,t))}function Zu(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function ed(e){e.set("x-ms-lib-capability",ee)}function td(e,t,r){e.has(Tu)||e.set(Tu,t),e.has(Eu)||e.set(Eu,r)}async function rd(e,t,r,n,o,i,a){a?.addQueueMeasurement(ns,i);const s=ou.transformCIAMAuthority(iu(e)),c=new ou(s,t,r,n,o,i,a);try{return await ru(c.resolveEndpointsAsync.bind(c),os,o,a,i)(),c}catch(l){throw No(Bn)}}class nd extends ve{constructor(e,t,r,n,o){super(e,t,r),this.name="ServerError",this.errorNo=n,this.status=o,Object.setPrototypeOf(this,nd.prototype)}}class od{static generateThrottlingStorageKey(e){return`${Z}.${JSON.stringify(e)}`}static preProcess(e,t,r){const n=od.generateThrottlingStorageKey(t),o=e.getThrottlingCache(n);if(o){if(o.throttleTime<Date.now())return void e.removeItem(n,r);throw new nd(o.errorCodes?.join(" ")||i.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r,n){if(od.checkResponseStatus(r)||od.checkResponseForRetryAfter(r)){const o={throttleTime:od.calculateThrottleTime(parseInt(r.headers[m])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(od.generateThrottlingStorageKey(t),o,n)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(m)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(t||$),r+X))}static removeThrottle(e,t,r,n){const o=au(t,r,n),i=this.generateThrottlingStorageKey(o);e.removeItem(i,r.correlationId)}}class id{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:r,loggerOptions:n,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:g}=e;const f={...Hs,...n};return{authOptions:(p=t,{clientCapabilities:[],azureCloudOptions:Gs,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1,...p}),systemOptions:{...Fs,...r},loggerOptions:f,cacheOptions:{...Us,...o},storageInterface:i||new ta(t.clientId,Mo,new Dt(f),new Ds),networkInterface:a||zs,cryptoInterface:s||Mo,clientCredentials:c||Ks,libraryInfo:{...Bs,...l},telemetry:{...Vs,...u},serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:g||null};var p}(e),this.logger=new Dt(this.config.loggerOptions,Oo,Lo),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[f]=i.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case bu:try{const r=Ri(e.credential);t[y]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case wu:t[y]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,r,n,o,i){i&&this.performanceClient?.addQueueMeasurement(i,o);const a=await this.sendPostRequest(n,e,{body:t,headers:r},o);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,n){let o;od.preProcess(this.cacheManager,e,n);try{o=await ru(this.networkClient.sendPostRequestAsync.bind(this.networkClient),va,this.logger,this.performanceClient,n)(t,r);const e=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:e[b]||"",requestId:e[v]||""},n)}catch(i){if(i instanceof $c){const e=i.responseHeaders;throw e&&this.performanceClient?.addFields({httpVerToken:e[b]||"",requestId:e[v]||"",contentTypeHeader:e[f]||void 0,contentLengthHeader:e[p]||void 0,httpStatus:i.httpStatus},n),i.error}throw i instanceof ve?i:No(Kn)}return od.postProcess(this.cacheManager,e,o,n),o}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(Ya,t);const r=`https://${e}/${this.authority.tenant}/`,n=await rd(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=n}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&td(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Ju(t,e.tokenQueryParameters),Hu(t,e.correlationId),Ru(t,e.correlationId,this.performanceClient),zi(t)}}class ad{static setRequestState(e,t,r){const n=ad.generateLibraryState(e,r);return t?`${n}${i.RESOURCE_DELIM}${t}`:n}static generateLibraryState(e,t){if(!e)throw No(fo);const r={id:e.createNewGuid()};t&&(r.meta=t);const n=JSON.stringify(r);return e.base64Encode(n)}static parseRequestState(e,t){if(!e)throw No(fo);if(!t)throw No(Wn);try{const r=t.split(i.RESOURCE_DELIM),n=r[0],o=r.length>1?r.slice(1).join(i.RESOURCE_DELIM):i.EMPTY_STRING,a=e.base64Decode(n),s=JSON.parse(a);return{userRequestState:o||i.EMPTY_STRING,libraryState:s}}catch(r){throw No(Wn)}}}const sd="sw";class cd{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(Za,e.correlationId);const r=await ru(this.generateKid.bind(this),Za,t,this.performanceClient,e.correlationId)(e),n=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:n}}async generateKid(e){this.performanceClient?.addQueueMeasurement(es,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:sd}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,n){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:c}=r,l=i?new Bi(i):void 0,u=l?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Do(),m:o?.toUpperCase(),u:u?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...n},t,c,r.correlationId)}}class ld{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class ud{constructor(e,t,r,n,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=n,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||i.NOT_AVAILABLE} - Timestamp: ${e.timestamp||i.NOT_AVAILABLE} - Description: ${e.error_description||i.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||i.NOT_AVAILABLE} - Trace ID: ${e.trace_id||i.NOT_AVAILABLE}`,n=e.error_codes?.length?e.error_codes[0]:void 0,o=new nd(e.error,r,e.suberror,n,e.status);if(t&&e.status&&e.status>=u&&e.status<=d)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${o}`);if(t&&e.status&&e.status>=s&&e.status<=l)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${o}`);if(Fr(e.error,e.error_description,e.suberror))throw new Dr(e.error,e.error_description,e.suberror,e.timestamp||i.EMPTY_STRING,e.trace_id||i.EMPTY_STRING,e.correlation_id||i.EMPTY_STRING,e.claims||i.EMPTY_STRING,n);throw o}}async handleServerTokenResponse(e,t,r,n,o,a,s,c,l){let u,d;if(this.performanceClient?.addQueueMeasurement(ts,e.correlation_id),e.id_token){if(u=qo(e.id_token||i.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&u.nonce!==o.nonce)throw No(Jn);if(n.maxAge||0===n.maxAge){const e=u.auth_time;if(!e)throw No($n);jo(e,n.maxAge)}}this.homeAccountIdentifier=Fi.generateHomeAccountId(e.client_info||i.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u),o&&o.state&&(d=ad.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||n.sshKid||void 0;const h=this.generateCacheRecord(e,t,r,n,u,a,o);let g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new ld(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),s&&!c&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e,n.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ud.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(h,n.correlationId,n.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return ud.generateAuthenticationResult(this.cryptoObj,t,h,!1,n,u,d,e,l)}generateCacheRecord(e,t,r,n,o,i,a){const s=t.getPreferredCache();if(!s)throw No(ho);const c=Di(o);let l,u;e.id_token&&o&&(l=Bo(this.homeAccountIdentifier,s,e.id_token,this.clientId,c||""),u=dd(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,n.correlationId,o,e.client_info,s,c,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?Ei.fromString(e.scope):new Ei(n.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=r+a,g=h+l,f=u&&u>0?r+u:void 0;d=Ko(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",o.printScopes(),h,g,this.cryptoObj.base64Decode,f,e.token_type,i,e.key_id,n.claims,n.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=r+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=Go(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let g=null;return e.foci&&(g={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:l,accessToken:d,refreshToken:h,appMetadata:g}}static async generateAuthenticationResult(e,t,r,n,o,a,s,c,l){let u,d,h=i.EMPTY_STRING,g=[],f=null,p=i.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==J.POP||o.popKid)h=r.accessToken.secret;else{const t=new cd(e),{secret:n,keyId:i}=r.accessToken;if(!i)throw No(Ao);h=await t.signPopToken(n,i,o)}g=Ei.fromString(r.accessToken.target).asArray(),f=Ho(r.accessToken.expiresOn),u=Ho(r.accessToken.extendedExpiresOn),r.accessToken.refreshOn&&(d=Ho(r.accessToken.refreshOn))}r.appMetadata&&(p=r.appMetadata.familyId===z?z:"");const m=a?.oid||a?.sub||"",y=a?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const v=r.account?Mi(r.account.getAccountInfo(),void 0,a,r.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:m,tenantId:y,scopes:g,account:v,idToken:r?.idToken?.secret||"",idTokenClaims:a||{},accessToken:h,fromCache:n,expiresOn:f,extExpiresOn:u,refreshOn:d,correlationId:o.correlationId,requestId:l||i.EMPTY_STRING,familyId:p,tokenType:r.accessToken?.tokenType||i.EMPTY_STRING,state:s?s.userRequestState:i.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||i.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||i.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}}}function dd(e,t,r,n,o,i,a,s,c,l,u,d){d?.verbose("setCachedAccount called");const h=e.getAccountKeys().find(e=>e.startsWith(r));let g=null;h&&(g=e.getAccount(h,o));const f=g||Fi.createAccount({homeAccountId:r,idTokenClaims:i,clientInfo:a,environment:s,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:u},t,n),p=f.tenantProfiles||[],m=c||f.realm;if(m&&!p.find(e=>e.tenantId===m)){const e=Ni(r,f.localAccountId,m,i);p.push(e)}return f.tenantProfiles=p,f}class hd{static validateRedirectUri(e){if(!e)throw Si(ri)}static validatePrompt(e){const t=[];for(const r in S)t.push(S[r]);if(t.indexOf(e)<0)throw Si(ci)}static validateClaims(e){try{JSON.parse(e)}catch(t){throw Si(li)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Si(gi);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([T.PLAIN,T.S256].indexOf(e)<0)throw Si(hi)}}async function gd(e,t,r){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:r})}class fd extends id{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(Ja,e.correlationId),!e.code)throw No(ro);const r=Do(),n=await ru(this.executeTokenRequest.bind(this),$a,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=n.headers?.[v],i=new ud(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return i.validateTokenResponse(n.body),ru(i.handleServerTokenResponse.bind(i),ts,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,r,e,t,void 0,void 0,void 0,o)}getLogoutUri(e){if(!e)throw Si(di);const t=this.createLogoutUrlQueryString(e);return Bi.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement($a,t.correlationId);const r=this.createTokenQueryParameters(t),n=Bi.appendQueryString(e.tokenEndpoint,r),o=await ru(this.createTokenRequestBody.bind(this),Xa,this.logger,this.performanceClient,t.correlationId)(t);let i;if(t.clientInfo)try{const e=Pi(t.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${e.uid}${F}${e.utid}`,type:bu}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}const a=this.createTokenRequestHeaders(i||t.ccsCredential),s=au(this.config.authOptions.clientId,t);return ru(this.executePostToTokenEndpoint.bind(this),wa,this.logger,this.performanceClient,t.correlationId)(n,o,a,s,t.correlationId,wa)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Xa,e.correlationId);const t=new Map;if(Mu(t,e.embeddedClientId||e.tokenBodyParameters?.[ku]||this.config.authOptions.clientId),this.includeRedirectUri?Ou(t,e.redirectUri):hd.validateRedirectUri(e.redirectUri),Nu(t,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(t,e.code),Uu(t,this.config.libraryInfo),zu(t,this.config.telemetry.application),ed(t),this.serverTelemetryManager&&!Ws(this.config)&&Zu(t,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(t,e.codeVerifier),this.config.clientCredentials.clientSecret&&Ku(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;Gu(t,await gd(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Vu(t,r.assertionType)}if(Wu(t,M),Qu(t),e.authenticationScheme===J.POP){const r=new cd(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await ru(r.generateCnf.bind(r),Za,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}$u(t,n)}else if(e.authenticationScheme===J.SSH){if(!e.sshJwk)throw Si(yi);Xu(t,e.sshJwk)}let r;if((!Ti.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Fu(t,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=Pi(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${t.uid}${F}${t.utid}`,type:bu}}catch(n){this.logger.verbose("Could not parse client info for CCS Header: "+n)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case bu:try{ju(t,Ri(r.credential))}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case wu:qu(t,r.credential)}return e.embeddedClientId&&td(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Ju(t,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[xu]||Ju(t,{[xu]:"1"}),Ru(t,e.correlationId,this.performanceClient),zi(t)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&Hu(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&Bu(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&Ju(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Yu(t),zi(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}function pd(e){const{skus:t,libraryName:r,libraryVersion:n,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[r,n]],[2,[o,i]]]);let s=[];if(t?.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:r,skuName:n,skuVersion:o}=e;if(r>=t.length)return;t[r]=[n,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}class md{constructor(e,t){this.cacheOutcome=le,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||i.EMPTY_STRING,this.wrapperVer=e.wrapperVer||i.EMPTY_STRING,this.telemetryCacheKey=Y.CACHE_KEY+D+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${Y.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&t.push(`broker_error=${r}`);const n=t.join(Y.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(Y.VALUE_SEPARATOR);return[Y.SCHEMA_VERSION,o,n].join(Y.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=md.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(Y.VALUE_SEPARATOR),n=e.errors.slice(0,t).join(Y.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?Y.OVERFLOW_TRUE:Y.OVERFLOW_FALSE].join(Y.VALUE_SEPARATOR);return[Y.SCHEMA_VERSION,e.cacheHits,r,n,i].join(Y.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Y.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ve?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Y.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=md.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const r={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r,this.correlationId)}}static maxErrorsToSend(e){let t,r=0,n=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||i.EMPTY_STRING,a=e.failedRequests[2*t+1]||i.EMPTY_STRING,s=e.errors[t]||i.EMPTY_STRING;if(n+=o.toString().length+a.toString().length+s.length+3,!(n<Y.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||i.EMPTY_STRING),e.push(this.regionSource||i.EMPTY_STRING),e.push(this.regionOutcome||i.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return pd(e)}}class yd{constructor(e,t,r,n,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.platformAuthProvider=s,this.correlationId=c||kl(),this.logger=n.clone(Ne,Ul,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,t){if(t){Fi.accountInfoIsEqual(t,this.browserStorage.getActiveAccount(e),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null,e));try{this.browserStorage.removeAccount(Fi.generateAccountCacheKey(t),e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(r){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch(n){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return Bi.getAbsoluteUrl(t,Ml())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new md(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(ma,this.correlationId);const n={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=r?.length?"true"===r:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(Bi.getDomainFromUrl(o),t.environment):o,s=ou.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await ru(rd,ns,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,n,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw Si(Ii);return c}}async function vd(e,t,r,n){r.addQueueMeasurement(Ra,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a={...e,correlationId:e.correlationId,authority:o,scopes:i};if(a.authenticationScheme){if(a.authenticationScheme===J.SSH){if(!e.sshJwk)throw Si(yi);if(!e.sshKid)throw Si(vi)}n.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}else a.authenticationScheme=J.BEARER,n.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!Ti.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await Rl(e.claims)),a}async function bd(e,t,r,n,o){n.addQueueMeasurement(_a,e.correlationId);const i=await ru(vd,Ra,o,n,e.correlationId)(e,r,n,o);return{...e,...i,account:t,forceRefresh:e.forceRefresh||!1}}class wd extends yd{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||kl(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Bi.getAbsoluteUrl(e.postLogoutRedirectUri,Ml())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Bi.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ml())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Bi.getAbsoluteUrl(Ml(),Ml())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(Fa,this.correlationId);const t=await ru(this.getClientConfiguration.bind(this),Ha,this.logger,this.performanceClient,this.correlationId)(e);return new fd(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:n,requestExtraQueryParameters:o,account:a}=e;this.performanceClient.addQueueMeasurement(Ha,this.correlationId);const s=await ru(this.getDiscoveredAuthority.bind(this),ma,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:n,requestExtraQueryParameters:o,account:a}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Ne,version:Ul,cpu:i.EMPTY_STRING,os:i.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(Ua,this.correlationId);const r=this.getRedirectUri(e.redirectUri),n={interactionType:t},o=ad.setRequestState(this.browserCrypto,e&&e.state||i.EMPTY_STRING,n),a={...await ru(vd,Ra,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:o,nonce:e.nonce||kl(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return a;const s=e.account||this.browserStorage.getActiveAccount(this.correlationId);return s&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${s.homeAccountId}`,this.correlationId),a.account=s),a}}function kd(e,t,r){const n=Ui(e);if(!n)throw Hi(e)?(r.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),r.errorPii(`The ${t} detected is: ${e}`),Yc(rc)):(r.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),Yc(ec));return n}function Cd(e,t,r){if(!e.state)throw Yc(tc);const n=function(e,t){if(!t)return null;try{return ad.parseRequestState(e,t).libraryState.meta}catch(r){throw No(Wn)}}(t,e.state);if(!n)throw Yc(nc);if(n.interactionType!==r)throw Yc(oc)}function Id(e,t,r,n){const o=t.correlationId,i=new Map;Mu(i,t.embeddedClientId||t.extraQueryParameters?.[ku]||e.clientId);if(Nu(i,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,e.authority.options.OIDCOptions?.defaultScopes),Ou(i,t.redirectUri),Hu(i,o),function(e,t){e.set("response_mode",t||N)}(i,t.responseMode),Qu(i),t.prompt&&(!function(e,t){e.set("prompt",t)}(i,t.prompt),n?.addFields({prompt:t.prompt},o)),t.domainHint&&(!function(e,t){e.set("domain_hint",t)}(i,t.domainHint),n?.addFields({domainHintFromRequest:!0},o)),t.prompt!==S.SELECT_ACCOUNT)if(t.sid&&t.prompt===S.NONE)r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Du(i,t.sid),n?.addFields({sidFromRequest:!0},o);else if(t.account){const e=(a=t.account,a.idTokenClaims?.sid||null);let c=function(e){return e.idTokenClaims?.login_hint||null}(t.account);if(c&&t.domainHint&&(r.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){r.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),Lu(i,c),n?.addFields({loginHintFromClaim:!0},o);try{ju(i,Ri(t.account.homeAccountId))}catch(s){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===S.NONE){r.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Du(i,e),n?.addFields({sidFromClaim:!0},o);try{ju(i,Ri(t.account.homeAccountId))}catch(s){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)r.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),Lu(i,t.loginHint),qu(i,t.loginHint),n?.addFields({loginHintFromRequest:!0},o);else if(t.account.username){r.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),Lu(i,t.account.username),n?.addFields({loginHintFromUpn:!0},o);try{ju(i,Ri(t.account.homeAccountId))}catch(s){r.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(r.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),Lu(i,t.loginHint),qu(i,t.loginHint),n?.addFields({loginHintFromRequest:!0},o));else r.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");var a;return t.nonce&&function(e,t){e.set("nonce",t)}(i,t.nonce),t.state&&Bu(i,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&Fu(i,t.claims,e.clientCapabilities),t.embeddedClientId&&td(i,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(Pu)||Yu(i),i}function Ad(e,t,r,n){const o=zi(t,r,n);return Bi.appendQueryString(e.authorizationEndpoint,o)}function xd(e,t){if(!e.state||!t)throw e.state?No(Yn,"Cached State"):No(Yn,"Server State");let r,n;try{r=decodeURIComponent(e.state)}catch(o){throw No(Wn,e.state)}try{n=decodeURIComponent(t)}catch(o){throw No(Wn,e.state)}if(r!==n)throw No(Qn);if(e.error||e.error_description||e.suberror){const t=function(e){const t="code=",r=e.error_uri?.lastIndexOf(t);return r&&r>=0?e.error_uri?.substring(r+t.length):void 0}(e);if(Fr(e.error,e.error_description,e.suberror))throw new Dr(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new nd(e.error||"",e.error_description,e.suberror,t)}}class Sd{constructor(e,t,r,n,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=n,this.performanceClient=o}async handleCodeResponse(e,t){let r;this.performanceClient.addQueueMeasurement(Ga,t.correlationId);try{r=function(e,t){if(xd(e,t),!e.code)throw No(ko);return e}(e,t.state)}catch(n){throw n instanceof nd&&n.subError===cc?Yc(cc):n}return ru(this.handleCodeResponseFromServer.bind(this),Ka,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(Ka,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await ru(this.authModule.updateAuthority.bind(this.authModule),Ya,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await ru(this.authModule.acquireToken.bind(this.authModule),Ja,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:bu}:e.loginHint?{credential:e.loginHint,type:wu}:null}}const Td="user_switch",Ed={[Td]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Pd extends ve{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,Pd.prototype),this.name="NativeAuthError",this.ext=r}}function Rd(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function _d(e,t,r){if(r&&r.status)switch(r.status){case"ACCOUNT_UNAVAILABLE":return Hr(_r);case"USER_INTERACTION_REQUIRED":return new Dr(e,t);case"USER_CANCEL":return Yc(cc);case"NO_NETWORK":return Yc(Ac);case"UX_NOT_ALLOWED":return Hr(Mr)}return new Pd(e,Ed[e]||t,r)}class Nd extends id{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Ta,e.correlationId);let t=le;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ti.isEmptyObj(e.claims))throw this.setCacheOutcome(ue,e.correlationId),No(vo);if(!e.account)throw No(lo);const r=e.account.tenantId||function(e){const t=new Bi(e).getUrlComponents(),r=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case k:case C:case I:return;default:return r}}(e.authority),n=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,n,r);if(!o)throw this.setCacheOutcome(de,e.correlationId),No(vo);if(i=o.cachedAt,Number(i)>Do()||Uo(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(he,e.correlationId),No(vo);var i;o.refreshOn&&Uo(o.refreshOn,0)&&(t=ge);const a=e.authority||this.authority.getPreferredCache(),s={account:this.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,n,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await ru(this.generateResultFromCacheRecord.bind(this),Ea,this.logger,this.performanceClient,e.correlationId)(s,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==le&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let r;if(this.performanceClient?.addQueueMeasurement(Ea,t.correlationId),e.idToken&&(r=qo(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=r?.auth_time;if(!e)throw No($n);jo(e,t.maxAge)}return ud.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class Md extends wd{async acquireToken(e){this.performanceClient.addQueueMeasurement(da,e.correlationId);const t=this.initializeServerTelemetryManager(ft),r=await ru(this.getClientConfiguration.bind(this),Ha,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),n=new Nd(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await ru(n.acquireCachedToken.bind(n),Ta,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof Qc&&o.errorCode===Pc&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,t?.account)}}class Od extends yd{constructor(e,t,r,n,o,i,a,s,c,l,u,d){super(e,t,r,n,o,i,s,c,d),this.apiId=a,this.accountId=l,this.platformAuthProvider=c,this.nativeStorageManager=u,this.silentCacheClient=new Md(e,this.nativeStorageManager,r,n,o,i,s,c,d);const h=this.platformAuthProvider.getExtensionName();this.skus=md.makeExtraSkuString({libraryName:Ne,libraryVersion:Ul,extensionName:h,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[Su]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(ya,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const r=this.performanceClient.startMeasurement(ya,e.correlationId),n=Do(),o=this.initializeServerTelemetryManager(this.apiId);try{const a=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,a);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(i){if(t===Rt)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),i;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const s=await this.platformAuthProvider.sendMessage(a);return await this.handleNativeResponse(s,a,n).then(e=>(r.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),o.clearNativeBrokerErrorCode(),e)).catch(e=>{throw r.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e})}catch(i){throw i instanceof Pd&&o.setNativeBrokerErrorCode(i.errorCode),i}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Ei.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),No(go);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!r)throw No(go);try{const e=this.createSilentCacheRequest(t,r),n=await this.silentCacheClient.acquireToken(e),o={...r,idTokenClaims:n?.idTokenClaims,idToken:n?.idToken};return{...n,account:o}}catch(n){throw n}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const n=await this.initializeNativeRequest(r);try{await this.platformAuthProvider.sendMessage(n)}catch(a){if(a instanceof Pd){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),Rd(a))throw a}}this.browserStorage.setTemporaryCache(nt,JSON.stringify(n),!0);const o={apiId:lt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(i,o)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:n,...o}=r;n&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(nt));const i=Do();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.platformAuthProvider.sendMessage(o),t=await this.handleNativeResponse(e,o,i);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),t}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const n=qo(e.id_token,al),o=this.createHomeAccountIdentifier(e,n),i=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId)?.homeAccountId;if(t.extraParameters?.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(o!==i&&e.account.id!==t.accountId)throw _d(Td);const a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),s=dd(this.browserStorage,a,o,al,this.correlationId,n,e.client_info,void 0,n.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const c=await this.generateAuthenticationResult(e,t,n,s,a.canonicalAuthority,r);return await this.cacheAccount(s,this.correlationId),await this.cacheNativeTokens(e,t,o,n,e.access_token,c.tenantId,r),c}createHomeAccountIdentifier(e,t){return Fi.generateHomeAccountId(e.client_info||i.EMPTY_STRING,Oi,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?Ei.fromString(t):Ei.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===J.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new cd(this.browserCrypto),n={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw No(Ao);return r.signPopToken(e.access_token,t.keyId,n)}return e.access_token}async generateAuthenticationResult(e,t,r,n,o,a){const s=this.addTelemetryFromNativeResponse(e.properties.MATS),c=this.generateScopes(t.scope,e.scope),l=e.account.properties||{},u=l.UID||r.oid||r.sub||i.EMPTY_STRING,d=l.TenantId||r.tid||i.EMPTY_STRING,h=Mi(n.getAccountInfo(),void 0,r,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const g=await this.generatePopAccessToken(e,t),f=t.tokenType===J.POP?J.POP:J.BEARER;return{authority:o,uniqueId:u,tenantId:d,scopes:c.asArray(),account:h,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:!!s&&this.isResponseFromCache(s),expiresOn:Ho(a+e.expires_in),tokenType:f,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,t){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,t)}cacheNativeTokens(e,t,r,n,o,a,s){const c=Bo(r,t.authority,e.id_token||"",t.clientId,n.tid||""),l=s+(t.tokenType===J.POP?i.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),u=this.generateScopes(e.scope,t.scope),d={idToken:c,accessToken:Ko(r,t.authority,o,t.clientId,n.tid||a,u.printScopes(),l,0,al,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(d,this.correlationId,t.storeInCache)}getExpiresInValue(e,t){return e===J.POP?i.SHR_NONCE_VALIDITY:("string"===typeof t?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch(t){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=await this.getCanonicalAuthority(e),{scopes:r,...n}=e,o=new Ei(r||[]);o.appendScopes(h);const i={...n,accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:o.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(i.signPopToken&&e.popKid)throw Yc(Uc);if(this.handleExtraBrokerParams(i),i.extraParameters=i.extraParameters||{},i.extraParameters.telemetry=Le,e.authenticationScheme===J.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},r=new cd(this.browserCrypto);let n;if(i.keyId)n=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:i.keyId})),i.signPopToken=!1;else{const o=await ru(r.generateCnf.bind(r),Za,this.logger,this.performanceClient,e.correlationId)(t,this.logger);n=o.reqCnfString,i.keyId=o.kid,i.signPopToken=!0}i.reqCnf=n}return this.addRequestSKUs(i),i}async getCanonicalAuthority(e){const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new Bi(t);return r.validateAsUri(),r}getPrompt(e){switch(this.apiId){case dt:case ft:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),S.NONE}if(e)switch(e){case S.NONE:case S.CONSENT:case S.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e} is not compatible with native flow`),Yc(Fc)}else this.logger.trace("initializeNativeRequest: prompt was not provided")}handleExtraBrokerParams(e){const t=e.extraParameters&&e.extraParameters.hasOwnProperty(Tu)&&e.extraParameters.hasOwnProperty(Eu)&&e.extraParameters.hasOwnProperty(ku);if(!e.embeddedClientId&&!t)return;let r="";const n=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Eu],r=e.extraParameters[ku]),e.extraParameters={child_client_id:r,child_redirect_uri:n},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:n},e.correlationId)}}async function Ld(e,t,r,n,o){const i=Id({...e.auth,authority:t},r,n,o);if(Uu(i,{sku:Ne,version:Ul,os:"",cpu:""}),e.auth.protocolMode!==qn&&zu(i,e.telemetry.application),r.platformBroker&&(function(e){e.set("nativebroker","1")}(i),r.authenticationScheme===J.POP)){const e=new Zl(n,o),t=new cd(e);let a;if(r.popKid)a=e.encodeKid(r.popKid);else{a=(await ru(t.generateCnf.bind(t),Za,n,o,r.correlationId)(r,n)).reqCnfString}$u(i,a)}return Ru(i,r.correlationId,o),i}async function qd(e,t,r,n,o){if(!r.codeChallenge)throw Si(gi);const a=await ru(Ld,Ba,n,o,r.correlationId)(e,t,r,n,o);return _u(a,E),function(e,t,r){if(!t||!r)throw Si(gi);e.set("code_challenge",t),e.set("code_challenge_method",r)}(a,r.codeChallenge,i.S256_CODE_CHALLENGE_METHOD),Ju(a,r.extraQueryParameters||{}),Ad(t,a,e.auth.encodeExtraQueryParams,r.extraQueryParameters)}async function jd(e,t,r,n,o,i){if(!n.earJwk)throw Yc(Js);const a=await Ld(t,r,n,o,i);_u(a,P),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(a,n.earJwk);const s=new Map;Ju(s,n.extraQueryParameters||{});return function(e,t,r){const n=e.createElement("form");return n.method="post",n.action=t,r.forEach((t,r)=>{const o=e.createElement("input");o.hidden=!0,o.name=r,o.value=t,n.appendChild(o)}),e.body.appendChild(n),n}(e,Ad(r,s,t.auth.encodeExtraQueryParams,n.extraQueryParameters),a)}async function Dd(e,t,r,n,o,i,a,s,c,l){if(s.verbose("Account id found, calling WAM for token"),!l)throw Yc(jc);const u=new Zl(s,c),d=new Od(n,o,u,s,a,n.system.navigationClient,r,c,l,t,i,e.correlationId),{userRequestState:h}=ad.parseRequestState(u,e.state);return ru(d.acquireToken.bind(d),ya,s,c,e.correlationId)({...e,state:h,prompt:void 0})}async function Fd(e,t,r,n,o,i,a,s,c,l,u,d){if(od.removeThrottle(a,o.auth.clientId,e),t.accountId)return ru(Dd,Wa,l,u,e.correlationId)(e,t.accountId,n,o,a,s,c,l,u,d);const h={...e,code:t.code||"",codeVerifier:r},g=new Sd(i,a,h,l,u);return await ru(g.handleCodeResponse.bind(g),Ga,l,u,e.correlationId)(t,e)}async function Hd(e,t,r,n,o,i,a,s,c,l,u){if(od.removeThrottle(i,n.auth.clientId,e),xd(t,e.state),!t.ear_jwe)throw Yc($s);if(!e.earJwk)throw Yc(Js);const d=JSON.parse(await ru(Al,Ls,c,l,e.correlationId)(e.earJwk,t.ear_jwe));if(d.accountId)return ru(Dd,Wa,c,l,e.correlationId)(e,d.accountId,r,n,i,a,s,c,l,u);const h=new ud(n.auth.clientId,i,new Zl(c,l),c,null,null,l);h.validateTokenResponse(d);const g={code:"",state:e.state,nonce:e.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await ru(h.handleServerTokenResponse.bind(h),ts,c,l,e.correlationId)(d,o,Do(),e,g,void 0,void 0,void 0,void 0)}async function Ud(e,t,r){e.addQueueMeasurement(Is,r);const n=tu(zd,As,t,e,r)(e,t,r);return{verifier:n,challenge:await ru(Bd,xs,t,e,r)(n,e,t,r)}}function zd(e,t,r){try{const n=new Uint8Array(32);tu(bl,Ts,t,e,r)(n);return nl(n)}catch(n){throw Yc(Ys)}}async function Bd(e,t,r,n){t.addQueueMeasurement(xs,n);try{const o=await ru(vl,Ss,r,t,n)(e,t,n);return nl(new Uint8Array(o))}catch(o){throw Yc(Ys)}}class Kd{constructor(e,t,r,n){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=n,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(ms),this.platformAuthType=He}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const t={method:Be,request:e},r={channel:Me,extensionId:this.extensionId,responseId:kl(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+` - Sending request to browser extension: ${JSON.stringify(r)}`),this.messageChannel.port1.postMessage(r);const n=await new Promise((e,t)=>{this.resolvers.set(r.responseId,{resolve:e,reject:t})});return this.validatePlatformBrokerResponse(n)}static async createProvider(e,t,r){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const n=new Kd(e,t,r,Oe);return await n.sendHandshakeRequest(),n}catch(n){const o=new Kd(e,t,r);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Me,extensionId:this.extensionId,responseId:kl(),body:{method:Ue}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Yc(Lc)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===Me&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Ue){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace(this.platformAuthType+`.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(Yc(qc))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),n=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===Ke){if(!r)return;const e=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+` - Received response from browser extension: ${JSON.stringify(e)}`),"Success"!==e.status)r.reject(_d(e.code,e.description,e.ext));else{if(!e.result)throw be(pe,"Event does not contain result.");e.result.code&&e.result.description?r.reject(_d(e.result.code,e.result.description,e.result.ext)):r.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===ze){if(!n)return void this.logger.trace(this.platformAuthType+`.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+` - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),n.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${o}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(o):n&&n.reject(o)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw be(pe,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){return this.getExtensionId()===Oe?"chrome":this.getExtensionId()?.length?"unknown":void 0}}class Gd{constructor(e,t,r){this.logger=e,this.performanceClient=t,this.correlationId=r,this.platformAuthType=Fe}static async createProvider(e,t,r){if(e.trace("PlatformAuthDOMHandler: createProvider called"),window.navigator?.platformAuthentication){const n=await window.navigator.platformAuthentication.getSupportedContracts(qe);if(n?.includes(De))return e.trace("Platform auth api available in DOM"),new Gd(e,t,r)}}getExtensionId(){return qe}getExtensionVersion(){return""}getExtensionName(){return je}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const t=this.initializePlatformDOMRequest(e),r=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(r)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:r,authority:n,scope:o,redirectUri:i,correlationId:a,state:s,storeInCache:c,embeddedClientId:l,extraParameters:u,...d}=e,h=this.getDOMExtraParams(d);return{accountId:t,brokerId:this.getExtensionId(),authority:n,clientId:r,correlationId:a||this.correlationId,extraParameters:{...u,...h},isSecurityTokenService:!1,redirectUri:i,scope:o,state:s,storeInCache:c,embeddedClientId:l}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(!1===t.isSuccess&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),_d(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw be(pe,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){this.logger.trace(this.platformAuthType+" - convertToNativeResponse called");return{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:e.extendedLifetimeToken??!1,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){return{...Object.entries(e).reduce((e,t)=>{let[r,n]=t;return e[r]=String(n),e},{})}}}async function Vd(e,t,r,n){e.trace("getPlatformAuthProvider called",r);const o=function(){let e;try{return e=window[Ve],"true"===e?.getItem(qt)}catch(t){return!1}}();let i;e.trace("Has client allowed platform auth via DOM API: "+o);try{o&&(i=await Gd.createProvider(e,t,r)),i||(e.trace("Platform auth via DOM API not available, checking for extension"),i=await Kd.createProvider(e,n||2e3,t))}catch(a){e.trace("Platform auth not available",a)}return i}function Wd(e,t,r,n){if(t.trace("isPlatformAuthAllowed called"),!e.system.allowPlatformBroker)return t.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!r)return t.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(n)switch(n){case J.BEARER:case J.POP:return t.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class Qd extends wd{constructor(e,t,r,n,o,i,a,s,c,l){super(e,t,r,n,o,i,a,c,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s,this.eventHandler=o}acquireToken(e,t){try{const r={popupName:this.generatePopupName(e.scopes||h,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r,t))}catch(r){return Promise.reject(r)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},n=e&&e.authority,o=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,n,o)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,n,o))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,r){this.logger.verbose("acquireTokenPopupAsync called");const n=await ru(this.initializeAuthorizationRequest.bind(this),Ua,this.logger,this.performanceClient,this.correlationId)(e,yt.Popup);t.popup&&Fl(n.authority);const o=Wd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return n.platformBroker=o,this.config.auth.protocolMode===jn?this.executeEarFlow(n,t):this.executeCodeFlow(n,t,r)}async executeCodeFlow(e,t,r){const n=e.correlationId,o=this.initializeServerTelemetryManager(ut),i=r||await ru(Ud,Is,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),a={...e,codeChallenge:i.challenge};try{const r=await ru(this.createAuthCodeClient.bind(this),Fa,this.logger,this.performanceClient,n)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account}),s=await ru(qd,za,this.logger,this.performanceClient,n)(this.config,r.authority,a,this.logger,this.performanceClient),c=this.initiateAuthRequest(s,t);this.eventHandler.emitEvent(sr,yt.Popup,{popupWindow:c},null);const l=await this.monitorPopupForHash(c,t.popupWindowParent),u=tu(kd,rs,this.logger,this.performanceClient,this.correlationId)(l,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await ru(Fd,Qa,this.logger,this.performanceClient,n)(e,u,i.verifier,ut,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}catch(s){throw t.popup?.close(),s instanceof ve&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),s}}async executeEarFlow(e,t){const r=e.correlationId,n=await ru(this.getDiscoveredAuthority.bind(this),ma,this.logger,this.performanceClient,r)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await ru(Il,Os,this.logger,this.performanceClient,r)(),i={...e,earJwk:o},a=t.popup||this.openPopup("about:blank",t);(await jd(a.document,this.config,n,i,this.logger,this.performanceClient)).submit();const s=await ru(this.monitorPopupForHash.bind(this),qa,this.logger,this.performanceClient,r)(a,t.popupWindowParent),c=tu(kd,rs,this.logger,this.performanceClient,this.correlationId)(s,this.config.auth.OIDCOptions.serverResponseType,this.logger);return ru(Hd,Va,this.logger,this.performanceClient,r)(i,c,ut,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,r,n){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(cr,yt.Popup,e);const o=this.initializeServerTelemetryManager(mt);try{await this.clearCacheOnLogout(this.correlationId,e.account);const i=await ru(this.createAuthCodeClient.bind(this),Fa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:r,account:e.account||void 0});try{i.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&i.authority.protocolMode===qn){if(this.browserStorage.removeAccount(e.account?.homeAccountId,this.correlationId),this.eventHandler.emitEvent(lr,yt.Popup,e),n){const e={apiId:mt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Bi.getAbsoluteUrl(n,Ml());await this.navigationClient.navigateInternal(t,e)}return void t.popup?.close()}}const a=i.getLogoutUri(e);this.eventHandler.emitEvent(lr,yt.Popup,e);const s=this.openPopup(a,t);if(this.eventHandler.emitEvent(sr,yt.Popup,{popupWindow:s},null),await this.monitorPopupForHash(s,t.popupWindowParent).catch(()=>{}),n){const e={apiId:mt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Bi.getAbsoluteUrl(n,Ml());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${t}`),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(i){throw t.popup?.close(),i instanceof ve&&(i.setCorrelationId(this.correlationId),o.cacheFailedRequest(i)),this.eventHandler.emitEvent(ur,yt.Popup,null,i),this.eventHandler.emitEvent(dr,yt.Popup),i}this.eventHandler.emitEvent(dr,yt.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Yc(Zs)}monitorPopupForHash(e,t){return new Promise((t,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const n=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(n),void r(Yc(cc));let o="";try{o=e.location.href}catch(s){}if(!o||"about:blank"===o)return;clearInterval(n);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===R?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw Yc(sc);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),Yc(ac)}}openSizedPopup(e,t){let{popupName:r,popupWindowAttributes:n,popupWindowParent:o}=t;const i=o.screenLeft?o.screenLeft:o.screenX,a=o.screenTop?o.screenTop:o.screenY,s=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=n.popupSize?.width,u=n.popupSize?.height,d=n.popupPosition?.top,h=n.popupPosition?.left;return(!l||l<0||l>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Ee),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Pe),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Pe/2+a)),(!h||h<0||h>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,s/2-Ee/2+i)),o.open(e,r,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return`${Re}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${Re}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}class Yd extends wd{constructor(e,t,r,n,o,i,a,s,c,l){super(e,t,r,n,o,i,a,c,l),this.nativeStorage=s}async acquireToken(e){const t=await ru(this.initializeAuthorizationRequest.bind(this),Ua,this.logger,this.performanceClient,this.correlationId)(e,yt.Redirect);t.platformBroker=Wd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const r=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(hr,yt.Redirect))},n=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii(`Redirect start page: ${n}`),this.browserStorage.setTemporaryCache(Xe,n,!0),window.addEventListener("pageshow",r);try{this.config.auth.protocolMode===jn?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(o){throw o instanceof ve&&o.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",r),o}}async executeCodeFlow(e,t){const r=e.correlationId,n=this.initializeServerTelemetryManager(lt),o=await ru(Ud,Is,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),i={...e,codeChallenge:o.challenge};this.browserStorage.cacheAuthorizeRequest(i,o.verifier);try{const r=await ru(this.createAuthCodeClient.bind(this),Fa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),o=await ru(qd,za,this.logger,this.performanceClient,e.correlationId)(this.config,r.authority,i,this.logger,this.performanceClient);return await this.initiateAuthRequest(o,t)}catch(a){throw a instanceof ve&&(a.setCorrelationId(this.correlationId),n.cacheFailedRequest(a)),a}}async executeEarFlow(e){const t=e.correlationId,r=await ru(this.getDiscoveredAuthority.bind(this),ma,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),n=await ru(Il,Os,this.logger,this.performanceClient,t)(),o={...e,earJwk:n};this.browserStorage.cacheAuthorizeRequest(o);return(await jd(document,this.config,r,o,this.logger,this.performanceClient)).submit(),new Promise((e,t)=>{setTimeout(()=>{t(Yc(Gc,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const o=this.initializeServerTelemetryManager(ht);try{const[a,s]=this.getRedirectResponse(e||"");if(!a)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return t?.type}()?n.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const c=this.browserStorage.getTemporaryCache(Xe,!0)||i.EMPTY_STRING,l=Bi.removeHashFromUrl(c);if(l===Bi.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),c.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(c);return await this.handleResponse(a,t,r,o)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(a,t,r,o);if(!Nl()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Ze,s,!0);const e={apiId:ht,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let n=!0;if(c&&"null"!==c)this.logger.verbose(`Navigating to loginRequestUrl: ${c}`),n=await this.navigationClient.navigateInternal(c,e);else{const t=function(){const e=new Bi(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();this.browserStorage.setTemporaryCache(Xe,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),n=await this.navigationClient.navigateInternal(t,e)}if(!n)return await this.handleResponse(a,t,r,o)}return null}catch(a){throw a instanceof ve&&(a.setCorrelationId(this.correlationId),o.cacheFailedRequest(a)),a}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===R?window.location.search:window.location.hash);let r=Ui(t);if(r){try{Cd(r,this.browserCrypto,yt.Redirect)}catch(o){return o instanceof ve&&this.logger.error(`Interaction type validation failed due to ${o.errorCode}: ${o.errorMessage}`),[null,""]}return _l(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const n=this.browserStorage.getTemporaryCache(Ze,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ze)),n&&(r=Ui(n),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,n]):[null,""]}async handleResponse(e,t,r,n){if(!e.state)throw Yc(tc);if(e.ear_jwe){const r=await ru(this.getDiscoveredAuthority.bind(this),ma,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return ru(Hd,Va,this.logger,this.performanceClient,t.correlationId)(t,e,lt,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const o=await ru(this.createAuthCodeClient.bind(this),Fa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority});return ru(Fd,Qa,this.logger,this.performanceClient,t.correlationId)(t,e,r,lt,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:lt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},n=t||this.config.auth.onRedirectNavigate;if("function"===typeof n){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==n(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,r)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,r)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Yc(Zs)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(pt);try{this.eventHandler.emitEvent(cr,yt.Redirect,e),await this.clearCacheOnLogout(this.correlationId,t.account);const n={apiId:pt,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await ru(this.createAuthCodeClient.bind(this),Fa,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===qn)try{o.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId)return this.browserStorage.removeAccount(t.account?.homeAccountId,this.correlationId),void this.eventHandler.emitEvent(lr,yt.Redirect,t)}const i=o.getLogoutUri(t);if(this.eventHandler.emitEvent(lr,yt.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,$e),void await this.navigationClient.navigateExternal(i,n);if(!1!==e.onRedirectNavigate(i))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,$e),void await this.navigationClient.navigateExternal(i,n);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(n){throw n instanceof ve&&(n.setCorrelationId(this.correlationId),r.cacheFailedRequest(n)),this.eventHandler.emitEvent(ur,yt.Redirect,null,n),this.eventHandler.emitEvent(dr,yt.Redirect),n}this.eventHandler.emitEvent(dr,yt.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Bi.getAbsoluteUrl(t,Ml())}}async function Jd(e,t,r,n,o){if(t.addQueueMeasurement(La,n),!e)throw r.info("Navigate url is empty"),Yc(Zs);return o?ru(Zd,ja,r,t,n)(e,o,t,n):tu(eh,Da,r,t,n)(e)}async function $d(e,t,r,n,o){const i=th();if(!i.contentDocument)throw"No document associated with iframe!";return(await jd(i.contentDocument,e,t,r,n,o)).submit(),i}async function Xd(e,t,r,n,o,i,a){return n.addQueueMeasurement(qa,i),new Promise((n,i)=>{t<Hl&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (10000ms). This may result in timeouts.`);const s=window.setTimeout(()=>{window.clearInterval(c),i(Yc(uc))},t),c=window.setInterval(()=>{let t="";const r=e.contentWindow;try{t=r?r.location.href:""}catch(i){}if(!t||"about:blank"===t)return;let o="";r&&(o=a===R?r.location.search:r.location.hash),window.clearTimeout(s),window.clearInterval(c),n(o)},r)}).finally(()=>{tu(rh,ys,o,n,i)(e)})}function Zd(e,t,r,n){return r.addQueueMeasurement(ja,n),new Promise((r,n)=>{const o=th();window.setTimeout(()=>{o?(o.src=e,r(o)):n("Unable to load iframe")},t)})}function eh(e){const t=th();return t.src=e,t}function th(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function rh(e){document.body===e.parentNode&&document.body.removeChild(e)}class nh extends wd{constructor(e,t,r,n,o,i,a,s,c,l,u){super(e,t,r,n,o,i,s,l,u),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(ha,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==S.NONE&&t.prompt!==S.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${S.NONE}`),t.prompt=S.NONE):t.prompt=S.NONE;const r=await ru(this.initializeAuthorizationRequest.bind(this),Ua,this.logger,this.performanceClient,e.correlationId)(t,yt.Silent);return r.platformBroker=Wd(this.config,this.logger,this.platformAuthProvider,r.authenticationScheme),Fl(r.authority),this.config.auth.protocolMode===jn?this.executeEarFlow(r):this.executeCodeFlow(r)}async executeCodeFlow(e){let t;const r=this.initializeServerTelemetryManager(this.apiId);try{return t=await ru(this.createAuthCodeClient.bind(this),Fa,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await ru(this.silentTokenHelper.bind(this),Oa,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(n){if(n instanceof ve&&(n.setCorrelationId(this.correlationId),r.cacheFailedRequest(n)),!t||!(n instanceof ve)||n.errorCode!==Te)throw n;return this.performanceClient.addFields({retryError:n.errorCode},this.correlationId),await ru(this.silentTokenHelper.bind(this),Oa,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,r=await ru(this.getDiscoveredAuthority.bind(this),ma,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),n=await ru(Il,Os,this.logger,this.performanceClient,t)(),o={...e,earJwk:n},i=await ru($d,La,this.logger,this.performanceClient,t)(this.config,r,o,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,s=await ru(Xd,qa,this.logger,this.performanceClient,t)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),c=tu(kd,rs,this.logger,this.performanceClient,t)(s,a,this.logger);return ru(Hd,Va,this.logger,this.performanceClient,t)(o,c,this.apiId,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Yc(pc))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(Oa,r);const n=await ru(Ud,Is,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),o={...t,codeChallenge:n.challenge},i=await ru(qd,za,this.logger,this.performanceClient,r)(this.config,e.authority,o,this.logger,this.performanceClient),a=await ru(Jd,La,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,c=await ru(Xd,qa,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,s),l=tu(kd,rs,this.logger,this.performanceClient,r)(c,s,this.logger);return ru(Fd,Qa,this.logger,this.performanceClient,r)(t,l,n.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class oh extends id{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(Ca,e.correlationId);const t=Do(),r=await ru(this.executeTokenRequest.bind(this),ka,this.logger,this.performanceClient,e.correlationId)(e,this.authority),n=r.headers?.[v],o=new ud(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(r.body),ru(o.handleServerTokenResponse.bind(o),ts,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,n)}async acquireTokenByRefreshToken(e){if(!e)throw Si(ui);if(this.performanceClient?.addQueueMeasurement(Aa,e.correlationId),!e.account)throw No(lo);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await ru(this.acquireTokenWithCachedRefreshToken.bind(this),Ia,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(t){const r=t instanceof Dr&&t.errorCode===Rr,n=t instanceof nd&&t.errorCode===te&&t.subError===re;if(r||n)return ru(this.acquireTokenWithCachedRefreshToken.bind(this),Ia,this.logger,this.performanceClient,e.correlationId)(e,!1);throw t}return ru(this.acquireTokenWithCachedRefreshToken.bind(this),Ia,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(Ia,e.correlationId);const r=tu(this.cacheManager.getRefreshToken.bind(this.cacheManager),bs,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw Hr(Rr);if(r.expiresOn&&Uo(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),Hr(Nr);const n={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||J.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:bu}};try{return await ru(this.acquireToken.bind(this),Ca,this.logger,this.performanceClient,e.correlationId)(n)}catch(o){if(o instanceof Dr&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),o.subError===Or)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const t=zo(r);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw o}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(ka,e.correlationId);const r=this.createTokenQueryParameters(e),n=Bi.appendQueryString(t.tokenEndpoint,r),o=await ru(this.createTokenRequestBody.bind(this),xa,this.logger,this.performanceClient,e.correlationId)(e),i=this.createTokenRequestHeaders(e.ccsCredential),a=au(this.config.authOptions.clientId,e);return ru(this.executePostToTokenEndpoint.bind(this),ba,this.logger,this.performanceClient,e.correlationId)(n,o,i,a,e.correlationId,ba)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(xa,e.correlationId);const t=new Map;if(Mu(t,e.embeddedClientId||e.tokenBodyParameters?.[ku]||this.config.authOptions.clientId),e.redirectUri&&Ou(t,e.redirectUri),Nu(t,e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),Wu(t,O),Qu(t),Uu(t,this.config.libraryInfo),zu(t,this.config.telemetry.application),ed(t),this.serverTelemetryManager&&!Ws(this.config)&&Zu(t,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(t,e.refreshToken),this.config.clientCredentials.clientSecret&&Ku(t,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const r=this.config.clientCredentials.clientAssertion;Gu(t,await gd(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Vu(t,r.assertionType)}if(e.authenticationScheme===J.POP){const r=new cd(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await ru(r.generateCnf.bind(r),Za,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}$u(t,n)}else if(e.authenticationScheme===J.SSH){if(!e.sshJwk)throw Si(yi);Xu(t,e.sshJwk)}if((!Ti.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&Fu(t,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case bu:try{ju(t,Ri(e.ccsCredential.credential))}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case wu:qu(t,e.ccsCredential.credential)}return e.embeddedClientId&&td(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Ju(t,e.tokenBodyParameters),Ru(t,e.correlationId,this.performanceClient),zi(t)}}class ih extends wd{async acquireToken(e){this.performanceClient.addQueueMeasurement(fa,e.correlationId);const t=await ru(vd,Ra,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const n=this.initializeServerTelemetryManager(ft),o=await this.createRefreshTokenClient({serverTelemetryManager:n,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return ru(o.acquireTokenByRefreshToken.bind(o),Aa,this.logger,this.performanceClient,e.correlationId)(r).catch(e=>{throw e.setCorrelationId(this.correlationId),n.cacheFailedRequest(e),e})}logout(){return Promise.reject(Yc(pc))}async createRefreshTokenClient(e){const t=await ru(this.getClientConfiguration.bind(this),Ha,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new oh(t,this.performanceClient)}}class ah{constructor(e,t,r,n){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=r,this.cryptoObj=n}async loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw Yc(Cc);const n=e.correlationId||kl(),o=t.id_token?qo(t.id_token,al):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new ou(ou.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||kl()):void 0,s=await this.loadAccount(e,r.clientInfo||t.client_info||"",n,o,a),c=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,n),l=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,r,n),u=await this.loadRefreshToken(t,s.homeAccountId,s.environment,n);return this.generateAuthenticationResult(e,{account:s,idToken:c,accessToken:l,refreshToken:u},o,a)}async loadAccount(e,t,r,n,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=Fi.createFromAccountInfo(e.account);return await this.storage.setAccount(t,r),t}if(!o||!t&&!n)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Yc(Ec);const i=Fi.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,n),a=n?.tid,s=dd(this.storage,o,i,al,r,n,t,o.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,r),s}async loadIdToken(e,t,r,n,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Bo(t,r,e.id_token,this.config.auth.clientId,n);return await this.storage.setIdTokenCredential(i,o),i}async loadAccessToken(e,t,r,n,o,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const s=t.scope?Ei.fromString(t.scope):new Ei(e.scopes),c=i.expiresOn||t.expires_in+Do(),l=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+Do(),u=Ko(r,n,t.access_token,this.config.auth.clientId,o,s.printScopes(),c,l,al);return await this.storage.setAccessTokenCredential(u,a),u}async loadRefreshToken(e,t,r,n){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=Go(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(o,n),o}generateAuthenticationResult(e,t,r,n){let o,i="",a=[],s=null;t?.accessToken&&(i=t.accessToken.secret,a=Ei.fromString(t.accessToken.target).asArray(),s=Ho(t.accessToken.expiresOn),o=Ho(t.accessToken.extendedExpiresOn));const c=t.account;return{authority:n?n.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:a,account:c.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:s,correlationId:e.correlationId||"",requestId:"",extExpiresOn:o,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:c.cloudGraphHostName||"",msGraphHost:c.msGraphHost||"",fromNativeBroker:!1}}}class sh extends fd{constructor(e){super(e),this.includeRedirectUri=!1}}class ch extends wd{constructor(e,t,r,n,o,i,a,s,c,l){super(e,t,r,n,o,i,s,c,l),this.apiId=a}async acquireToken(e){if(!e.code)throw Yc(Rc);const t=await ru(this.initializeAuthorizationRequest.bind(this),Ua,this.logger,this.performanceClient,e.correlationId)(e,yt.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const n={...t,code:e.code},o=await ru(this.getClientConfiguration.bind(this),Ha,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new sh(o);this.logger.verbose("Auth code client created");const a=new Sd(i,this.browserStorage,n,this.logger,this.performanceClient);return await ru(a.handleCodeResponseFromServer.bind(a),Ka,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(n){throw n instanceof ve&&(n.setCorrelationId(this.correlationId),r.cacheFailedRequest(n)),n}}logout(){return Promise.reject(Yc(pc))}}function lh(e){const t=e?.idTokenClaims;return t?.tfp||t?.acr?"B2C":t?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===t?.tid?"MSA":"AAD":void 0}function uh(e,t){try{jl(e)}catch(r){throw t.end({success:!1},r),r}}class dh{constructor(e){var t,r,n,o;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Zl(this.logger,this.performanceClient):Mo,this.eventHandler=new vu(this.logger),this.browserStorage=this.isBrowserEnvironment?new mu(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let r;if(t)try{r=JSON.parse(t)}catch(n){throw Si(fi)}return{canonicalAuthority:e.authority?iu(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:r}}(this.config.auth)):(t=this.config.auth.clientId,r=this.logger,n=this.performanceClient,o=this.eventHandler,new mu(t,{cacheLocation:We,temporaryCacheLocation:We,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Mo,r,n,o));const i={cacheLocation:We,temporaryCacheLocation:We,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new mu(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new ah(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const r=new dh(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(zt);const r=e?.correlationId||this.getRequestCorrelationId(),n=this.config.system.allowPlatformBroker,o=this.performanceClient.startMeasurement(Na,r);if(this.eventHandler.emitEvent(Ut),!t)try{this.logMultipleInstances(o)}catch{}if(await ru(this.browserStorage.initialize.bind(this.browserStorage),Ma,this.logger,this.performanceClient,r)(r),n)try{this.platformAuthProvider=await Vd(this.logger,this.performanceClient,r,this.config.system.nativeBrokerHandshakeTimeout)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),tu(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),vs,this.logger,this.performanceClient,r)(r)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(r),this.initialized=!0,this.eventHandler.emitEvent(zt),o.end({allowPlatformBroker:n,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),ql(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return"undefined"===typeof r?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const t=this.browserStorage.getInteractionInProgress()?.type;if(t===$e)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const r=this.getAllAccounts(),n=this.browserStorage.getCachedNativeRequest(),o=n&&this.platformAuthProvider&&!e;let i,a;this.eventHandler.emitEvent(ir,yt.Redirect);try{if(o&&this.platformAuthProvider){i=this.performanceClient.startMeasurement(ca,n?.correlationId||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new Od(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ht,this.performanceClient,this.platformAuthProvider,n.accountId,this.nativeInternalStorage,n.correlationId);a=ru(e.handleRedirectPromise.bind(e),ps,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{const[t,r]=this.browserStorage.getCachedRequest(),n=t.correlationId;i=this.performanceClient.startMeasurement(ca,n),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const o=this.createRedirectClient(n);a=ru(o.handleRedirectPromise.bind(o),fs,this.logger,this.performanceClient,i.event.correlationId)(e,t,r,i)}}catch(s){throw this.browserStorage.resetRequestCache(),s}return a.then(e=>{if(e){this.browserStorage.resetRequestCache();r.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Wt,yt.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Jt,yt.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:lh(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(ar,yt.Redirect),e}).catch(e=>{this.browserStorage.resetRequestCache();const t=e;throw r.length>0?this.eventHandler.emitEvent($t,yt.Redirect,null,t):this.eventHandler.emitEvent(Qt,yt.Redirect,null,t),this.eventHandler.emitEvent(ar,yt.Redirect),i.end({success:!1},t),e})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement(sa,t);r.add({accountType:lh(e.account),scenarioId:e.scenarioId});const n=e.onRedirectNavigate;if(n)e.onRedirectNavigate=e=>{const t="function"===typeof n?n(e):void 0;return!1!==t?r.end({success:!0}):r.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const n="function"===typeof e?e(t):void 0;return!1!==n?r.end({success:!0}):r.discard(),n}}const o=this.getAllAccounts().length>0;try{let n;if(Dl(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Je),o?this.eventHandler.emitEvent(Yt,yt.Redirect,e):this.eventHandler.emitEvent(Vt,yt.Redirect,e),this.platformAuthProvider&&this.canUsePlatformBroker(e)){n=new Od(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,lt,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(r=>{if(r instanceof Pd&&Rd(r)){this.platformAuthProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(r instanceof Dr){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw r})}else{n=this.createRedirectClient(t).acquireToken(e)}return await n}catch(i){throw this.browserStorage.resetRequestCache(),r.end({success:!1},i),o?this.eventHandler.emitEvent($t,yt.Redirect,null,i):this.eventHandler.emitEvent(Qt,yt.Redirect,null,i),i}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(aa,t);r.add({scenarioId:e.scenarioId,accountType:lh(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),uh(this.initialized,r),this.browserStorage.setInteractionInProgress(!0,Je)}catch(a){return Promise.reject(a)}const n=this.getAllAccounts();let o;n.length>0?this.eventHandler.emitEvent(Yt,yt.Popup,e):this.eventHandler.emitEvent(Vt,yt.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))o=this.acquireTokenNative({...e,correlationId:t},ut).then(e=>(r.end({success:!0,isNativeBroker:!0,accountType:lh(e.account)}),e)).catch(r=>{if(r instanceof Pd&&Rd(r)){this.platformAuthProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(r instanceof Dr){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw r});else{o=this.createPopupClient(t).acquireToken(e,i)}return o.then(e=>(n.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Wt,yt.Popup,e):this.eventHandler.emitEvent(Jt,yt.Popup,e),r.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:lh(e.account)}),e)).catch(e=>(n.length>0?this.eventHandler.emitEvent($t,yt.Popup,null,e):this.eventHandler.emitEvent(Qt,yt.Popup,null,e),r.end({success:!1},e),Promise.reject(e))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};let n;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(pa,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:lh(e.account)}),uh(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(Zt,yt.Silent,r),this.canUsePlatformBroker(r))n=this.acquireTokenNative(r,dt).catch(e=>{if(e instanceof Pd&&Rd(e)){this.platformAuthProvider=void 0;return this.createSilentIframeClient(r.correlationId).acquireToken(r)}throw e});else{n=this.createSilentIframeClient(r.correlationId).acquireToken(r)}return n.then(e=>(this.eventHandler.emitEvent(er,yt.Silent,e),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:lh(e.account)}),e)).catch(e=>{throw this.eventHandler.emitEvent(tr,yt.Silent,null,e),this.ssoSilentMeasurement?.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(ra,t);uh(this.initialized,r),this.eventHandler.emitEvent(rr,yt.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Yc(Nc);if(e.code){const n=e.code;let o=this.hybridAuthCodeResponses.get(n);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(e=>(this.eventHandler.emitEvent(nr,yt.Silent,e),this.hybridAuthCodeResponses.delete(n),r.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:lh(e.account)}),e)).catch(e=>{throw this.hybridAuthCodeResponses.delete(n),this.eventHandler.emitEvent(or,yt.Silent,null,e),r.end({success:!1},e),e}),this.hybridAuthCodeResponses.set(n,o)),await o}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){const n=await this.acquireTokenNative({...e,correlationId:t},gt,e.nativeAccountId).catch(e=>{throw e instanceof Pd&&Rd(e)&&(this.platformAuthProvider=void 0),e});return r.end({accountType:lh(n.account),success:!0}),n}throw Yc(Oc)}throw Yc(_c)}catch(n){throw this.eventHandler.emitEvent(or,yt.Silent,null,n),r.end({success:!1},n),n}}async acquireTokenByCodeAsync(e){this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(gs,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const t=this.createSilentAuthCodeClient(e.correlationId);return await t.acquireToken(e).then(e=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e)).catch(e=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(Sa,e.correlationId),t){case Pt:case Rt:case _t:const t=this.createSilentCacheClient(e.correlationId);return ru(t.acquireToken.bind(t),da,this.logger,this.performanceClient,e.correlationId)(e);default:throw No(vo)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(na,e.correlationId),t){case Pt:case _t:case Nt:case Mt:const t=this.createSilentRefreshClient(e.correlationId);return ru(t.acquireToken.bind(t),fa,this.logger,this.performanceClient,e.correlationId)(e);default:throw No(vo)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(Pa,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return ru(t.acquireToken.bind(t),ha,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);Dl(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,$e);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);jl(this.initialized),this.browserStorage.setInteractionInProgress(!0,$e);return this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){const t=this.getRequestCorrelationId();return function(e,t,r,n,o){return e.verbose("getAllAccounts called"),r?t.getAllAccounts(o||{},n):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const o=r.getAccountInfoFilteredBy(e,n);return o?(t.verbose("getAccount: Account matching provided filter found, returning"),o):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const o=r.getAccountInfoFilteredBy({username:e},n);return o?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),o):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=r.getAccountInfoFilteredBy({homeAccountId:e},n);return o?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),o):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return function(e,t,r,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const o=r.getAccountInfoFilteredBy({localAccountId:e},n);return o?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),o):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();!function(e,t,r){t.setActiveAccount(e,r)}(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return function(e,t){return e.getActiveAccount(t)}(this.browserStorage,e)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=Fi.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(r,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r,n){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw Yc(jc);return new Od(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,n)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Wd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case S.NONE:case S.CONSENT:case S.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Qd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new Yd(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new nh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,dt,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new Md(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new ih(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new ch(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,gt,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Ll(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===Ge?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===Ge?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?kl():i.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||xt})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||xt})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(oa,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),uh(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);const n=e.account||this.getActiveAccount();if(!n)throw Yc(mc);return r.add({accountType:lh(n)}),this.acquireTokenSilentDeduped(e,n,t).then(n=>(r.end({success:!0,fromCache:n.fromCache,isNativeBroker:n.fromNativeBroker,accessTokenSize:n.accessToken.length,idTokenSize:n.idToken.length}),{...n,state:e.state,correlationId:t})).catch(e=>{throw e instanceof ve&&e.setCorrelationId(t),r.end({success:!1},e),e})}async acquireTokenSilentDeduped(e,t,r){const n=au(this.config.auth.clientId,{...e,authority:e.authority||this.config.auth.authority,correlationId:r},t.homeAccountId),o=JSON.stringify(n),i=this.activeSilentTokenRequests.get(o);if("undefined"===typeof i){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",r),this.performanceClient.addFields({deduped:!1},r);const n=ru(this.acquireTokenSilentAsync.bind(this),ia,this.logger,this.performanceClient,r)({...e,correlationId:r},t);return this.activeSilentTokenRequests.set(o,n),n.finally(()=>{this.activeSilentTokenRequests.delete(o)})}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),this.performanceClient.addFields({deduped:!0},r),i}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(ia,e.correlationId),this.eventHandler.emitEvent(Yt,yt.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const n=await ru(bd,_a,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||Pt;return this.acquireTokenSilentNoIframe(n,o).catch(async e=>{const t=function(e,t){const r=!(e instanceof Dr&&e.subError!==Or),n=e.errorCode===Te||e.errorCode===vo,o=r&&n||e.errorCode===Rr||e.errorCode===Nr,i=Lt.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==Ot){const[t,r]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${r}`,n.correlationId);const i=this.performanceClient.startMeasurement(ga,n.correlationId);i.add({awaitIframeCorrelationId:r});const a=await t;if(i.end({success:a}),a)return this.logger.verbose(`Parallel iframe request with correlationId: ${r} succeeded. Retrying cache and/or RT redemption`,n.correlationId),this.acquireTokenSilentNoIframe(n,o);throw this.logger.info(`Iframe request with correlationId: ${r} failed. Interaction is required.`),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",n.correlationId),ru(this.acquireTokenBySilentIframe.bind(this),Pa,this.logger,this.performanceClient,n.correlationId)(n)}{let e;return this.activeIframeRequest=[new Promise(t=>{e=t}),n.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",n.correlationId),ru(this.acquireTokenBySilentIframe.bind(this),Pa,this.logger,this.performanceClient,n.correlationId)(n).then(t=>(e(!0),t)).catch(t=>{throw e(!1),t}).finally(()=>{this.activeIframeRequest=void 0})}}throw e}).then(t=>(this.eventHandler.emitEvent(Jt,yt.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t)).catch(e=>{throw this.eventHandler.emitEvent($t,yt.Silent,null,e),e}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return Wd(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,ft,e.account.nativeAccountId,t).catch(async e=>{if(e instanceof Pd&&Rd(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,No(vo);throw e})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Rt&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),ru(this.acquireTokenFromCache.bind(this),Sa,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===Rt)throw r;return this.eventHandler.emitEvent(Xt,yt.Silent,e),ru(this.acquireTokenByRefreshToken.bind(this),na,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await ru(Ud,Is,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose((t?"Found":"Did not find")+" pre-generated PKCE codes"),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[];window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,r){const n=window.msal?.clientIds||[],o=n.length,i=n.filter(t=>t===e).length;i>1&&r.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:o,sameClientIdInstanceCount:i})}(t,e,this.logger)}}class hh{static async createPublicClientApplication(e){const t=await async function(e,t){const r=new Bl(e);return await r.initialize(),dh.createController(r,t)}(e);return new hh(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new dh(new Bl(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const gh=new hh({auth:{clientId:"6b93b79a-c6e2-4bd9-b3fb-dc5c04fcb61c",authority:"https://login.microsoftonline.com/3bb4d7f8-7011-44c7-bb3b-e869a25ac707",redirectUri:"/",postLogoutRedirectUri:"/"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1}});gh.addEventCallback(e=>{e.eventType!==Bt&&e.eventType!==Kt||e.payload.account&&gh.setActiveAccount(e.payload.account)}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("root");if(e){(0,o.H)(e).render((0,Yr.jsx)(n.StrictMode,{children:(0,Yr.jsx)(br,{instance:gh,children:(0,Yr.jsx)(On,{})})}))}else console.error("Root element not found to render the React app.")})})();
//# sourceMappingURL=main.2127b6b2.js.map